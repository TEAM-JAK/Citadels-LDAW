(this["webpackJsonpcitadels-app"]=this["webpackJsonpcitadels-app"]||[]).push([[0],{189:function(e,a,t){e.exports=t(319)},195:function(e,a,t){},282:function(e,a,t){},306:function(e,a){},319:function(e,a,t){"use strict";t.r(a);var r=t(1),n=t.n(r),c=t(21),o=t.n(c),l=(t(194),t(195),t(20)),s=t(6),i=t.n(s),u=t(13),d={},m={rooms:[],setRooms:Object(l.action)((function(e,a){e.rooms=a})),loadRooms:Object(l.thunk)(function(){var e=Object(u.a)(i.a.mark((function e(a,t,r){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.injections,e.next=3,n.lobbyApi.getRooms();case 3:c=e.sent,a.setRooms(c);case 5:case"end":return e.stop()}}),e)})));return function(a,t,r){return e.apply(this,arguments)}}()),roomID:null,setRoomID:Object(l.action)((function(e,a){e.roomID=a})),createGameRoom:Object(l.thunk)(function(){var e=Object(u.a)(i.a.mark((function e(a,t,r){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.injections,e.next=3,n.lobbyApi.createRoom(t);case 3:c=e.sent,a.setRoomID(c);case 5:case"end":return e.stop()}}),e)})));return function(a,t,r){return e.apply(this,arguments)}}()),roomMetadata:null,setRoomMetadata:Object(l.action)((function(e,a){e.roomMetadata=a})),loadRoomMetadata:Object(l.thunk)(function(){var e=Object(u.a)(i.a.mark((function e(a,t,r){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.injections,e.next=3,n.lobbyApi.getRoomMetadata(t);case 3:c=e.sent,a.setRoomMetadata(c);case 5:case"end":return e.stop()}}),e)})));return function(a,t,r){return e.apply(this,arguments)}}()),loadingJoinRoom:!1,setLoadingJoinRoom:Object(l.action)((function(e,a){e.loadingJoinRoom=a})),activeRoomPlayer:null,setActiveRoomPlayer:Object(l.action)((function(e,a){localStorage.setItem("citadels_player",JSON.stringify(a)),e.activeRoomPlayer=a})),joinRoom:Object(l.thunk)(function(){var e=Object(u.a)(i.a.mark((function e(a,t,r){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.injections,(0,r.getStoreState)().loadingJoinRoom){e.next=8;break}return a.setLoadingJoinRoom(!0),e.next=5,n.lobbyApi.joinRoom(t);case 5:c=e.sent,a.setLoadingJoinRoom(!1),a.setActiveRoomPlayer({credential:c,playerID:t.playerID});case 8:case"end":return e.stop()}}),e)})));return function(a,t,r){return e.apply(this,arguments)}}()),reset:Object(l.action)((function(){return d}))},p=t(14),f=t(18),h=t(163),b=window.location,g=b.origin,y=(b.protocol,b.hostname,g),v=function(){function e(){Object(p.a)(this,e),this.api=h.a.create({prefixUrl:"".concat(y,"/games/").concat("citadels")})}return Object(f.a)(e,[{key:"createRoom",value:function(){var e=Object(u.a)(i.a.mark((function e(a){var t,r,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.numPlayers,r=a.setupData,n=Number.parseInt(t,10),e.next=4,this.api.post("create",{json:{numPlayers:n,setupData:r}}).json();case 4:return c=e.sent,e.abrupt("return",c.matchID);case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var e=Object(u.a)(i.a.mark((function e(a){var t,r,n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.roomID,r=a.playerID,n=a.playerName,e.next=3,this.api.post(t+"/join",{json:{playerID:r,playerName:n}}).json();case 3:return c=e.sent,o=c.playerCredentials,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"getRoomMetadata",value:function(e){return this.api.get(e).json()}},{key:"getRooms",value:function(){var e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/games/").concat("citadels")).then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",a.matches);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),O=t(42),j=t(23),C=t(2),E=t(11),k=t(177),w=t(359),P=n.a.createContext(null),x=t(369),F=t(366),D=t(377),S=t(368),N=t(365),I=t(364),B=t(379),T=t(328),U=t(324),A=t(323),R=t(326),M=t(40),G=t.n(M),H=Object(w.a)({paper:{minWidth:768},form:{display:"flex",flexDirection:"column"},field:{marginBottom:16}});var W=function(e){var a=H(),t=Object(r.useState)(!1),c=Object(E.a)(t,2),o=(c[0],c[1],Object(r.useState)({roomName:"",numberOfPlayers:"4"})),l=Object(E.a)(o,2),s=l[0],i=l[1],u=Object(r.useState)({roomName:null,numberOfPlayers:null}),d=Object(E.a)(u,2),m=d[0],p=d[1];return n.a.createElement(D.a,{classes:{paper:a.paper},open:e.open,onClose:e.onClose,"aria-labelledby":"create-game-dialog"},n.a.createElement(I.a,{id:"create-game-dialog"},"Create a Game"),n.a.createElement(N.a,null,n.a.createElement("div",{className:a.form},n.a.createElement(F.a,{fullWidth:!0,className:a.field,label:"Room Name",value:s.roomName,onChange:function(e){return i(Object(C.a)(Object(C.a)({},s),{},{roomName:e.target.value}))},error:null!=m.roomName,helperText:m.roomName}),n.a.createElement(A.a,{className:a.field,error:null!=m.numberOfPlayers},n.a.createElement(T.a,{id:"create-game-number-players-select-label"},"Number Of Players"),n.a.createElement(R.a,{labelId:"create-game-number-players-select-label",id:"create-game-number-players-select",value:s.numberOfPlayers,onChange:function(e){return i(Object(C.a)(Object(C.a)({},s),{},{numberOfPlayers:e.target.value}))}},n.a.createElement(B.a,{value:"4"},n.a.createElement("em",null,"4")),n.a.createElement(B.a,{value:"2"},"2"),n.a.createElement(B.a,{value:"3"},"3"),n.a.createElement(B.a,{value:"5"},"5"),n.a.createElement(B.a,{value:"6"},"6"),n.a.createElement(B.a,{value:"7"},"7")),null!=m.numberOfPlayers?n.a.createElement(U.a,null,m.numberOfPlayers):null))),n.a.createElement(S.a,null,n.a.createElement(x.a,{onClick:e.onClose,color:"primary"},"Cancel"),n.a.createElement(x.a,{onClick:function(a){var t={roomName:null,numberOfPlayers:null};G.a.isEmpty(s.roomName)&&(t=Object(C.a)(Object(C.a)({},t),{},{roomName:"Must not be empty"})),G.a.isEmpty(s.numberOfPlayers)&&(t=Object(C.a)(Object(C.a)({},t),{},{numberOfPlayers:"Must not be empty"})),p(t);var r=Object.keys(t).reduce((function(e,a){return null==t[a]||(e[a]=t[a]),e}),{});0===Object.keys(r).length&&e.onSubmit({setupData:{roomName:s.roomName},numPlayers:s.numberOfPlayers})},color:"primary"},"Create Game")))};function L(e){var a=function(e){var a=Object(r.useState)(e),t=Object(E.a)(a,2),n=t[0],c=t[1];return{value:n,set:c,toggle:Object(r.useCallback)((function(){return c(!n)}),[]),setTrue:Object(r.useCallback)((function(){return c(!0)}),[]),setFalse:Object(r.useCallback)((function(){return c(!1)}),[])}}(!1),t=a.value,c=a.setTrue,o=a.setFalse;return n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){return c()}},"Create Game"),n.a.createElement(W,{open:t,onClose:function(){return o()},onSubmit:function(a){o(),e.onSubmit(a)}}))}var J=t(19),z=t(7),V=Object(w.a)({root:{display:"flex"},directionHorizontal:{flexDirection:"row"},directionHorizontalReverse:{flexDirection:"row-reverse"},directionVertical:{flexDirection:"column"},directionVerticalReverse:{flexDirection:"column-reverse"},justifyStart:{justifyContent:"flex-start"},justifyEnd:{justifyContent:"flex-end"},justifyCenter:{justifyContent:"center"},justifyBetween:{justifyContent:"space-between"},justifyAround:{justifyContent:"space-around"},justifyEvenly:{justifyContent:"space-evenly"},alignStart:{alignItems:"flex-start"},alignEnd:{alignItems:"flex-end"},alignCenter:{alignItems:"center"},alignStretch:{alignItems:"stretch"},alignBaseline:{alignItems:"baseline"},wrap:{flexWrap:"wrap"},wrapReverse:{flexWrap:"wrap-reverse"}});function _(e){var a,t=e.align,r=void 0===t?"start":t,c=e.children,o=e.className,l=e.direction,s=void 0===l?"horizontal":l,i=e.justify,u=void 0===i?"start":i,d=e.wrap,m=void 0===d?"nowrap":d,p=V();return n.a.createElement("div",{className:Object(z.a)(o,p.root,(a={},Object(J.a)(a,p.directionHorizontal,"horizontal"===s),Object(J.a)(a,p.directionHorizontalReverse,"horizontal-reverse"===s),Object(J.a)(a,p.directionVertical,"vertical"===s),Object(J.a)(a,p.directionVerticalReverse,"vertical-reverse"===s),Object(J.a)(a,p.justifyStart,"start"===u),Object(J.a)(a,p.justifyEnd,"end"===u),Object(J.a)(a,p.justifyCenter,"center"===u),Object(J.a)(a,p.justifyBetween,"between"===u),Object(J.a)(a,p.justifyAround,"around"===u),Object(J.a)(a,p.justifyEvenly,"evenly"===u),Object(J.a)(a,p.alignStart,"start"===r),Object(J.a)(a,p.alignEnd,"end"===r),Object(J.a)(a,p.alignCenter,"center"===r),Object(J.a)(a,p.alignStretch,"stretch"===r),Object(J.a)(a,p.alignBaseline,"baseline"===r),Object(J.a)(a,p.wrap,"wrap"===m),Object(J.a)(a,p.wrapReverse,"wrap-reverse"===m),a))},c)}var Z=Object(w.a)({root:{padding:16,backgroundColor:"#fffffd",borderRadius:8,borderStyle:"solid",borderWidth:4,borderColor:"#f2f2f2"},details:{marginRight:24,width:256}});function q(e){var a=e.room,t=e.onJoin,r=Z();return n.a.createElement(_,{align:"center",className:r.root},n.a.createElement(_,{direction:"vertical",className:r.details},n.a.createElement(k.a,{gutterBottom:!0},"ID: ".concat(a.matchID)),n.a.createElement(k.a,null,"Name: ".concat(a.setupData.roomName))),n.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){return t(a.matchID)}},"Join"))}var K=Object(w.a)({root:{listStyle:"none",padding:0,margin:0}});function X(e){var a=K();return n.a.createElement("ul",{className:a.root},e.rooms.map((function(a){return n.a.createElement("li",{key:a.matchID},n.a.createElement(q,{room:a,onJoin:e.onJoin}))})))}var Q=Object(w.a)({root:{paddingBottom:24,display:"flex",paddingTop:16,flexDirection:"column",paddingRight:24,paddingLeft:24},creation:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:24}});function Y(){var e=Q(),a=Object(l.useStoreState)((function(e){return e.rooms})),t=Object(l.useStoreActions)((function(e){return e.createGameRoom})),c=Object(l.useStoreActions)((function(e){return e.setRooms})),o=(Object(l.useStoreActions)((function(e){return e.loadRooms})),Object(l.useStoreActions)((function(e){return e.setRoomID}))),s=Object(l.useStoreState)((function(e){return e.roomID})),d=Object(r.useContext)(P),m=Object(r.useState)(null),p=Object(E.a)(m,2),f=p[0],h=p[1],b=Object(r.useCallback)((function(e){o(e)}),[o]);return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetchUserProfile();case 2:a=e.sent,h(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[h,d]),Object(r.useEffect)((function(){d.firestore.collection("bgio_metadata").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(Object(C.a)(Object(C.a)({},e.data()),{},{matchID:e.id}))})),c(a)}))}),[d,c]),null!=s?n.a.createElement(j.a,{to:"/rooms/".concat(s)}):n.a.createElement("main",{className:e.root},n.a.createElement("div",{className:e.creation},n.a.createElement(k.a,{variant:"h4",gutterBottom:!0},"Welcome".concat(f?" ".concat(f.username):"","!")),n.a.createElement(L,{onSubmit:t})),n.a.createElement("div",null,n.a.createElement(X,{rooms:a,onJoin:b})))}var $=Object(w.a)({root:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},creation:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:24}});function ee(e){var a=e.startGame,t=Object(j.h)().id,c=$(),o=Object(l.useStoreActions)((function(e){return e.setRoomMetadata})),s=Object(l.useStoreState)((function(e){return e.roomMetadata})),d=Object(r.useContext)(P),m=Object(r.useState)(null),p=Object(E.a)(m,2),f=p[0],h=p[1],b=Object(l.useStoreState)((function(e){return e.activeRoomPlayer})),g=Object(l.useStoreActions)((function(e){return e.joinRoom})),y=null!=s&&0===s.players.filter((function(e){return!e.name})).length;return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetchUserProfile();case 2:a=e.sent,h(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[h,d]),Object(r.useEffect)((function(){if(null!=f&&null!=f.username&&null!=s){var e=s.players.find((function(e){return!e.name})),a=e?e.id:null;!(null!=b&&null!=s.players.find((function(e){return e.id===b.playerID&&e.name===f.username})))&&null!=a&&t&&g({playerID:a,playerName:f.username,roomID:t})}}),[s,f]),Object(r.useEffect)((function(){t&&d.firestore.collection("bgio_metadata").doc(t).onSnapshot((function(e){var a=Object(C.a)({},e.data());a.players=Object.keys(a.players).map((function(e){return a.players[e]})),o(Object(C.a)(Object(C.a)({},a),{},{matchID:e.id}))}))}),[d,o,t]),Object(r.useEffect)((function(){y&&setTimeout((function(){return a()}),2e3)}),[y]),n.a.createElement("main",{className:c.root},n.a.createElement(_,{direction:"vertical"},n.a.createElement("div",null,null!=s?n.a.createElement("ul",null,s.players.map((function(e){return n.a.createElement("li",{key:e.id},null!=e.name?n.a.createElement(k.a,null,"Player ".concat(e.name," joined!")):n.a.createElement(k.a,null,"Waiting for player to join"))}))):n.a.createElement(k.a,null,"Loading...")),n.a.createElement("div",null,y?n.a.createElement(k.a,null,"Starting Game..."):n.a.createElement(k.a,null,"Game will start when all players join!"))))}var ae=t(174),te=t(12);function re(e,a,t,r,n){for(var c=[],o=0;o<e;o++)c.push({name:a,type:r,cost:t,front:n,back:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fback_orange.jpg?alt=media&token=4a5738af-f9f7-43e4-a3cf-62541b32f283"});return c}function ne(e,a){console.log("called getCurrentChar with:"+a.currentPlayer);return e.players[a.currentPlayer].chosenCharacter[0].order}function ce(e,a){e.players[a.currentPlayer].powerUsed=!1,e.players[a.currentPlayer].districtBuiltOnTurn=0,e.deckOfCharacters.push(e.players[a.currentPlayer].chosenCharacter.splice(0,1)[0]),a.events.endStage(),a.events.endTurn()}function oe(e,a,t){var r=function(e,a,t){var r=0;return e.players[a.currentPlayer].builtCity.forEach((function(e){e.type===t&&(r+=1)})),r}(e,a,t);for(console.log("<-------Extra coins to add:"+r);0!==e.pileOfCoins&&0!==r;)e.pileOfCoins=e.pileOfCoins-1,r-=1,e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins+1}function le(e,a,t){if(console.log("<----Use character Power called with payload: "+t),!e.players[a.currentPlayer].powerUsed)switch(e.players[a.currentPlayer].powerUsed=!0,ne(e,a)){case 1:!function(e,a,t){e.murderedCharacter=t}(e,0,t);break;case 2:!function(e,a,t){e.muggedCharacter={muggedFromPlayer:a.currentPlayer,muggedToCharacter:t}}(e,a,t);break;case 3:t.isOptionA?function(e,a,t){var r=Object(C.a)({},e.secret),n=Object(te.a)(e.secret[a.currentPlayer].hand);r[a.currentPlayer].hand=e.secret[t].hand,r[t].hand=n,Object(C.a)(Object(C.a)({},e),{},{secret:r})}(e,a,t.changeHandsWith):function(e,a,t){t.sort((function(e,a){return a-e}));var r=t.length;t.forEach((function(t){e.deckOfDistricts.push(e.secret[a.currentPlayer].hand.splice(t,1)[0])}));for(var n=0;n<r;n++)e.secret[a.currentPlayer].hand.push(e.deckOfDistricts.shift())}(e,a,t.changeMyHandIndx);break;case 4:oe(e,a,0);break;case 5:oe(e,a,1);break;case 6:oe(e,a,2);break;case 7:break;case 8:oe(e,a,3)}}function se(e,a){var t=!1;return 4===e.deckOfCharacters[a].order&&(t=!0),t}function ie(e){for(var a=e.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),r=[e[t],e[a]];e[a]=r[0],e[t]=r[1]}}function ue(e){var a=30,t=function(){var e=[];return e.push.apply(e,Object(te.a)(re(3,"Templo",1,1,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Ftemplo.jpg?alt=media&token=2942172a-29de-4fcf-8ec1-ef95ef919c8d"))),e.push.apply(e,Object(te.a)(re(3,"Iglesia",2,1,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Figlesia.jpg?alt=media&token=008b54c2-55a9-4088-b997-f8310a0a1d76"))),e.push.apply(e,Object(te.a)(re(3,"Monasterio",3,1,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Fmonasterio.jpg?alt=media&token=3355cf48-1f74-4bac-89e3-e055df55823c"))),e.push.apply(e,Object(te.a)(re(2,"Catedral",5,1,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Fcatedral.jpg?alt=media&token=e21f93a0-146d-4aa8-a31e-86407ce0f2b6"))),e.push.apply(e,Object(te.a)(re(2,"Ayuntamiento",5,2,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Fayuntamiento.jpg?alt=media&token=68d71e9a-0858-4f04-9267-878a528131d6"))),e.push.apply(e,Object(te.a)(re(3,"Almacenes",3,2,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Falmacenes.jpg?alt=media&token=7809b068-c802-48ba-b05c-ff98e2b9573a"))),e.push.apply(e,Object(te.a)(re(4,"Mercado",2,2,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Fmercado.jpg?alt=media&token=2b736349-d370-481c-b68f-92e7b7b343fd"))),e.push.apply(e,Object(te.a)(re(5,"Taberna",1,2,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Ftaberna.jpg?alt=media&token=9bbee48d-140c-4ade-b3a6-add77193041e"))),e.push.apply(e,Object(te.a)(re(3,"Puerto",4,2,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Fpuerto.jpg?alt=media&token=1ecf7239-773c-458f-904f-b00f650063f7"))),e.push.apply(e,Object(te.a)(re(3,"Tienda",2,2,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Ftienda.jpg?alt=media&token=987005d7-a83c-43f9-a255-a000259f691a"))),e.push.apply(e,Object(te.a)(re(2,"Fortaleza",5,3,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Ffortaleza.jpg?alt=media&token=4260bf11-ab74-438c-98d6-5b8d92604a58"))),e.push.apply(e,Object(te.a)(re(3,"Prisi\xf3n",2,3,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Fprision.jpg?alt=media&token=edeef978-a05e-4b70-9852-f238d45113b2"))),e.push.apply(e,Object(te.a)(re(3,"Atalaya",1,3,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Fatalaya.jpg?alt=media&token=1558164b-dc8b-4e35-9254-1d966ac45240"))),e.push.apply(e,Object(te.a)(re(3,"Cuartel",3,3,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Fcuartel.jpg?alt=media&token=6aeb48c0-f5ca-445e-aeb7-0c61f39878cf"))),e.push.apply(e,Object(te.a)(re(3,"Palacio",5,0,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fyellow%2Fpalacio.jpg?alt=media&token=6139bca5-bdc1-4455-aa43-1f474594eccb"))),e.push.apply(e,Object(te.a)(re(4,"Castillo",4,0,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fyellow%2Fcastillo.jpg?alt=media&token=d3230b61-e2a6-45ea-9410-eb08224e2ccd"))),e.push.apply(e,Object(te.a)(re(5,"Se\xf1or\xeda",3,0,"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fyellow%2Fsenoria.jpg?alt=media&token=da3b04f7-b6a4-4a3b-a444-c48740308fc2"))),e}();ie(t);var r=function(){var e="https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fback_gray.jpg?alt=media&token=7a1f8e7e-4a08-426a-9edd-09e60e22496a";return[{order:1,name:"Assasin",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fasesino.jpg?alt=media&token=03ceea66-dbc1-435d-b46e-1c1edd48b141",back:e},{order:2,name:"Thief",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fladron.jpg?alt=media&token=dfd057fc-3073-40ce-9053-bad997173482",back:e},{order:3,name:"Magician",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmago.jpg?alt=media&token=7ee85db5-3682-486d-820b-2225fce7aea5",back:e},{order:4,name:"King",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Frey.jpg?alt=media&token=60239d45-6c7c-424c-9b77-e2e10c38ad86",back:e},{order:5,name:"Bishop",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fobispo.jpg?alt=media&token=fda603aa-89c4-4692-b09a-e823940d2409",back:e},{order:6,name:"Merchant",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmercader.jpg?alt=media&token=2705ddf3-cf31-47c5-9a79-56f462f43085",back:e},{order:7,name:"Architect",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Farquitecto.jpg?alt=media&token=ee9cee94-7064-4d4e-8f81-760e2df8c772",back:e},{order:8,name:"Warlord",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fguerrero.jpg?alt=media&token=f56f6050-9c7f-47df-93f6-3b8d157f4b89",back:e}]}();ie(r);for(var n={},c={},o=0;o<e.numPlayers;o++){c[o]={coins:2,builtCity:[],handCount:4,chosenCharacter:[],powerUsed:!1,districtBuiltOnTurn:0},n[o]={},n[o].hand=[];for(var l=0;l<4;l++)n[o].hand.push(t.pop());a-=2}return{pileOfCoins:a,deckOfDistricts:t,deckOfCharacters:r,faceDownCharacterCards:[],faceUpCharacterCards:[],playerWithCrown:0,finishedFirst:-1,murderedCharacter:-1,muggedCharacter:{muggedFromPlayer:-1,muggedToCharacter:-1},secret:n,players:c}}var de={name:"citadels",setup:function(e){return ue(e)},phases:{drawPhase:{turn:{order:{first:function(e,a){return 0},next:function(e,a){return(a.playOrderPos+1)%a.numPlayers},playOrder:function(e,a){return function(e,a){console.log("Entered GetPlayerOrderDrawPhase");var t=Object(te.a)(Array(a.numPlayers).keys());if(a.numPlayers<4){var r=Object(te.a)(Array(a.numPlayers).keys());t=t.concat(r)}for(var n=0;n<e.playerWithCrown;n++){var c=t.shift();t.push(c)}return t}(e,a)}},moveLimit:1},onBegin:function(e,a){return function(e,a){var t=Math.floor(8*Math.random());if(e.faceDownCharacterCards.push(e.deckOfCharacters.splice(t,1)[0]),a.numPlayers<6&&a.numPlayers>3){for(t=Math.floor(7*Math.random());se(e,t);)t=Math.floor(7*Math.random());if(e.faceUpCharacterCards.push(e.deckOfCharacters.splice(t,1)[0]),4===a.numPlayers){for(t=t=Math.floor(6*Math.random());se(e,t);)t=Math.floor(6*Math.random());e.faceUpCharacterCards.push(e.deckOfCharacters.splice(t,1)[0])}return e}}(e,a)},moves:{ChooseCharacter:function(e,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;console.log("Entered ChooseCharacter with: ",t),e.players[a.currentPlayer].chosenCharacter.splice(0,0,e.deckOfCharacters.splice(t,1)[0]),2===a.numPlayers&&6!==e.deckOfCharacters.length&&(t<r&&(r-=1),e.faceDownCharacterCards.push(e.deckOfCharacters.splice(r,1)[0])),7===a.numPlayers&&1===e.deckOfCharacters.length&&5===a.playOrderPos&&e.deckOfCharacters.push(e.faceDownCharacterCards.pop()),1===e.deckOfCharacters.length&&e.faceDownCharacterCards.push(e.deckOfCharacters.pop())}},endIf:function(e,a){return function(e,a){return 0===e.deckOfCharacters.length}(e)},next:"playPhase",start:!0},playPhase:{turn:{activePlayers:{currentPlayer:{stage:"takeActionStage"},next:{currentPlayer:{stage:"takeActionStage"}}},onBegin:function(e,a){return function(e,a){if(4===e.players[a.currentPlayer].chosenCharacter[0].order&&(e.playerWithCrown=a.currentPlayer),ne(e,a)===e.murderedCharacter)return console.log("<-------Player :"+a.currentPlayer+" was murdered and lost turn with character: "+ne(e,a)),ce(e,a),e;if(ne(e,a)===e.muggedCharacter.muggedToCharacter)if(e.muggedCharacter.muggedToCharacter===e.murderedCharacter)console.log("Can not mugg dead people");else{console.log("<-------Player :"+a.currentPlayer+" was mugged: ");var t=function(e,a,t){for(var r=0;r<a.numPlayers;r++)if(e.players[r].chosenCharacter.some((function(e){return e.order===t})))return r;return-1}(e,a,e.muggedCharacter.muggedToCharacter);e.players[e.muggedCharacter.muggedFromPlayer].coins=e.players[e.muggedCharacter.muggedFromPlayer].coins+e.players[t].coins,e.players[t].coins=0}return e}(e,a)},order:{first:function(e,a){return 0},next:function(e,a){return(a.playOrderPos+1)%a.numPlayers},playOrder:function(e,a){return function(e,a){for(var t={},r=0;r<a.numPlayers;r++)for(var n=0;n<e.players[r].chosenCharacter.length;n++){var c=r+n*a.numPlayers;t[c]=e.players[r].chosenCharacter[n].order}var o=Object.keys(t).sort((function(e,a){return t[e]-t[a]}));if(a.numPlayers<4)for(var l=0;l<o.length;l++)o[l]=o[l]%a.numPlayers;return o=o.map((function(e){return parseInt(e,10)})),console.log("GetPlayerOrderPlayPhase"),o}(e,a)}},stages:{takeActionStage:{moves:{TakeCoin:function(e,a){if(console.log("TakeCoin called"),6===ne(e,a)&&e.pileOfCoins>1&&(e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins+1,e.pileOfCoins=e.pileOfCoins-1),1===e.pileOfCoins?(e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins+1,e.pileOfCoins=e.pileOfCoins-1):(e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins+2,e.pileOfCoins=e.pileOfCoins-2),7===ne(e,a)&&e.deckOfCharacters.length>2){var t=e.deckOfDistricts.splice(0,2);e.secret[a.currentPlayer].hand.push(t[0]),e.secret[a.currentPlayer].hand.push(t[1])}a.events.endStage()},TakeDistrictCard:function(e,a,t){console.log("TakeDistrictCard called");var r=e.deckOfDistricts.shift(),n=e.deckOfDistricts.shift();t?(e.secret[a.currentPlayer].hand.push(r),e.deckOfDistricts.push(n)):(e.secret[a.currentPlayer].hand.push(n),e.deckOfDistricts.push(r)),6===ne(e,a)&&e.pileOfCoins>1&&(e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins+1,e.pileOfCoins=e.pileOfCoins-1),7===ne(e,a)&&e.deckOfCharacters.length>2&&(e.secret[a.currentPlayer].hand.push(e.deckOfDistricts.shift()),e.secret[a.currentPlayer].hand.push(e.deckOfDistricts.shift())),a.events.endStage()},UseCharacterPower:le},next:"buildStage"},buildStage:{moves:{BuildDistrict:function(e,a,t){console.log("Entered BuildDistrict"),-1!==t&&(function(e,a){var t=!1;return(0===e.players[a.currentPlayer].districtBuiltOnTurn||e.players[a.currentPlayer].districtBuiltOnTurn<3&&7===ne(e,a))&&(t=!0),t}(e,a)&&(e.players[a.currentPlayer].districtBuiltOnTurn=e.players[a.currentPlayer].districtBuiltOnTurn+1,e.players[a.currentPlayer].coins>=e.secret[a.currentPlayer].hand[t].cost&&(e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins-e.secret[a.currentPlayer].hand[t].cost,e.pileOfCoins=e.pileOfCoins+e.secret[a.currentPlayer].hand[t].cost,e.players[a.currentPlayer].builtCity.push(e.secret[a.currentPlayer].hand.splice(t,1)[0]))),e.players[a.currentPlayer].builtCity.length>=7&&-1===e.finishedFirst&&(e.finishedFirst=a.currentPlayer)),8===ne(e,a)&&a.events.setStage("extraStage")},SkipOrEndStage:function(e,a){e.players[a.currentPlayer].powerUsed=!1,e.players[a.currentPlayer].districtBuiltOnTurn=0,8===ne(e,a)?a.events.setStage("extraStage"):(e.deckOfCharacters.push(e.players[a.currentPlayer].chosenCharacter.splice(0,1)[0]),a.events.endStage(),a.events.endTurn())},UseCharacterPower:le}},extraStage:{moves:{WarlordPower:function(e,a,t){var r=e.players[t.player].builtCity.splice(t.builtCityHandIndx,1)[0];e.players[a.currentPlayer].coins=e.players[a.currentPlayer].coins-(r.cost-1),e.pileOfCoins=e.pileOfCoins+(r.cost-1),e.deckOfDistricts.push(r),e.deckOfCharacters.push(e.players[a.currentPlayer].chosenCharacter.splice(0,1)[0]),a.events.endStage(),a.events.endTurn()},EndTurn:ce}}}},onBegin:function(e,a){return function(e,a){var t=Object(C.a)({},e.players);if(a.numPlayers<4)for(var r in t)t[r].chosenCharacter.sort((function(e,a){return e.order-a.order}));return Object(C.a)(Object(C.a)({},e),{},{players:t})}(e,a)},endIf:function(e,a){return function(e,a){return 8===e.deckOfCharacters.length+e.faceDownCharacterCards.length+e.faceUpCharacterCards.length}(e)},onEnd:function(e,a){return function(e,a){e.murderedCharacter=-1,e.muggedCharacter={muggedFromPlayer:-1,muggedToCharacter:-1};for(var t=0;t<a.numPlayers;t++)for(;0!==e.players[t].chosenCharacter.length;)e.deckOfCharacters.push(e.players[t].chosenCharacter.pop());for(;0!==e.faceDownCharacterCards.length;)e.deckOfCharacters.push(e.faceDownCharacterCards.pop());for(;0!==e.faceUpCharacterCards.length;)e.deckOfCharacters.push(e.faceUpCharacterCards.pop());return e}(e,a)},next:"drawPhase"}},minPlayers:2,maxPlayers:7,endIf:function(e,a){return function(e,a){var t=!1;return-1!==e.finishedFirst&&"drawPhase"===a.phase&&(t=!0),t}(e,a)},onEnd:function(e,a){return function(e,a){for(var t={},r=0;r<e.players.length;r++){var n=0,c=0,o=0,l=!1,s=!1,i=!1,u=!1,d=!1;e.finishedFirst===r?c=4:e.players[r].builtCity.length>7&&(c=2);for(var m=0;m<e.players[r].builtCity.length;m++)switch(n+=e.players[r].builtCity[m].cost,e.players[r].builtCity[m].type){case 0:l=!0;break;case 1:s=!0;break;case 2:i=!0;break;case 3:u=!0;break;case 4:d=!0}return(l&&s&&i&&u||d)&&(o=3),t[r]=n+c+o,t}}(e)},disableUndo:!0},me=t(100);function pe(e){var a,t=0;for(a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t}function fe(e,a,t){for(var r=0;r<a;r++)if(e.players[r].chosenCharacter.some((function(e){return e.order===t})))return r;return-1}function he(e,a){var t=!1;return(0===e.players[a.currentPlayer].districtBuiltOnTurn||e.players[a.currentPlayer].districtBuiltOnTurn<3&&7===function(e,a){console.log("called getCurrentChar with:"+a.currentPlayer);return e.players[a.currentPlayer].chosenCharacter[0].order}(e,a))&&(t=!0),t}var be=t(376),ge=t(27),ye=t(28),ve=function(e){var a=e.width,t=e.height;return n.a.createElement("svg",{width:a||128,height:t||128,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},n.a.createElement("path",{d:"M64,120.37,15.27,92.28V35.91L64,7.82l48.73,28.09V92.28Z",fill:"#373748"}),n.a.createElement("path",{fill:"#000",d:"M64,124,12,94V34L64,4l52,30V94ZM18.33,90.37,64,116.74l45.67-26.37V37.63L64,11.26,18.33,37.63Z"}),n.a.createElement("path",{d:"M81.77,43.17c5.92,0,10.51,1.72,13.57,5.16,3.25,3.44,4.77,8.41,4.77,14.71q0,10.32-5.15,16.06c-3.44,3.82-8.22,5.73-14.53,5.73-5.92,0-10.51-1.72-13.56-5.35-3.25-3.63-4.78-8.6-4.78-15.29s1.72-12,5.16-15.67S75.46,43.17,81.77,43.17Zm-.57,5.16c-4.4,0-7.45,1.15-9.56,3.63s-3,6.31-3,11.66c0,5.73,1,9.74,3,12.42,2.11,2.48,5.16,3.82,9.56,3.82s7.64-1.34,9.74-3.82,3.25-6.5,3.25-11.85c0-5.54-1.15-9.55-3.25-12C88.65,49.48,85.59,48.33,81.2,48.33Z",fill:"#fff"}),n.a.createElement("path",{d:"M39.35,71.45l.19,12.8H33.43L33.62,72l-.19-28.48h6.11l-.19,27.9Z",fill:"#fff"}))},Oe=n.a.createContext(),je=t(124);t(282);var Ce=function(e){Object(ge.a)(t,e);var a=Object(ye.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=a.call(this,e)).onClick=function(){r.props.onClick(r.props.data)},r.dragComponentRef=n.a.createRef(),r.isOverAccepted=!1,r}return Object(f.a)(t,[{key:"render",value:function(){var e=this,a=["bgio-card"];this.props.className&&a.push(this.props.className);var t={};return this.props.inDeck&&(t={position:"absolute",zIndex:this.props.deckPosition}),n.a.createElement("div",null,n.a.createElement(je.b,{id:this.id,type:this.props.dragZone,data:this.props.data},function(e,a,t,r){return function(c){var o=c.isActive,l=c.events;return n.a.createElement("div",Object.assign({className:a.join(" "),style:Object(C.a)(Object(C.a)(Object(C.a)({},e.style),t),{},{opacity:o?0:1,pointerEvents:o?"none":"all"}),onClick:r},l),e.isFaceUp?e.front:e.back)}}(this.props,a,t,this.onClick)),n.a.createElement(je.a,{for:this.id},function(e,a,t,r){return function(c){var o=c.x,l=c.y,s=c.isOverAccepted,i=c.currentlyHoveredDroppableId,u=Object(te.a)(a),d=e.back;return r(s),e.isFaceUp&&(d=e.front),null!==i&&(s?u.push("accept"):u.push("reject")),n.a.createElement("div",{className:u.join(" "),ref:t,style:{cursor:"pointer",borderWidth:2,pointerEvents:"none",position:"fixed",zIndex:2e9,boxShadow:"5px 5px 5px #eee",left:o-50,top:l-70}},d)}}(this.props,a,this.dragComponentRef,(function(a){return e.isOverAccepted=a}))))}}]),t}(n.a.Component);Ce.defaultProps={onClick:function(){},isFaceUp:!1,dragZone:"bgio-card",front:n.a.createElement("div",{className:"bgio-card__front"},"Card"),back:n.a.createElement("div",{className:"bgio-card__back"},n.a.createElement(ve,{width:"48"}))};var Ee=function(e){return n.a.createElement(Oe.Consumer,null,(function(a){return n.a.createElement(Ce,Object.assign({},e,{context:a}))}))};function ke(e){var a=e.deckOfCharacters,t=e.faceDownCharacterCards,c=e.faceUpCharacterCards,o=e.ChooseCharacter,l=Object(r.useState)(!1),s=Object(E.a)(l,2),i=s[0],u=s[1],d=Object(r.useState)({value1:-1,value2:-1}),m=Object(E.a)(d,2),p=m[0],f=m[1],h=Object(r.useContext)(Oe),b=[],g=[];t.forEach((function(e){var a,t=n.a.createElement("img",(a={width:"100px",height:"140px",src:e.back,alt:"Card-Face-Down"},Object(J.a)(a,"width","100px"),Object(J.a)(a,"height","140px"),a));b.push(n.a.createElement(Ee,{back:t,isFaceUp:!1,canHover:!1,className:"card",key:pe(e.name),context:h}))})),c.forEach((function(e){var a=n.a.createElement("img",{width:"100px",height:"140px",src:e.front,alt:e.name+"-Card-Front"});b.push(n.a.createElement(Ee,{front:a,isFaceUp:!0,canHover:!1,className:"card",key:e.name,context:h}))})),g.push(n.a.createElement("br",null));for(var y=function(e){var t=n.a.createElement("img",{width:"100px",height:"140px",src:a[e].front,alt:a[e].name+"-Card-Front"});g.push(n.a.createElement(Ee,{front:t,isFaceUp:!0,canHover:!0,className:"highlight",key:a[e].name,onClick:function(){f({value1:e,value2:-1}),console.log({index:e})},context:h}))},v=0;v<a.length;v++)y(v);return n.a.createElement("div",null,n.a.createElement(x.a,{variant:"outlined",color:"primary",onClick:function(){u(!0)}},"Choose Character"),n.a.createElement(D.a,{open:i,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,"aria-labelledby":"form-dialog-title"},n.a.createElement(I.a,{id:"form-dialog-title"},"Choose Character"),n.a.createElement(N.a,null,n.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},b),n.a.createElement("div",{style:{margin:"10px 0"}},"Personajes para elegir"),n.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},g)),n.a.createElement(S.a,null,n.a.createElement(x.a,{onClick:function(){u(!1),o(p.value1,p.value2)},color:"primary"},"Choose"))))}function we(e){for(var a=e.numPlayers,t=e.setPayload,r=e.currentPlayer,c=[],o=function(e){if(e==r){var a=n.a.createElement("img",{width:"100px",height:"140px",src:"",alt:"Card-Face-Down"});c.push(n.a.createElement(Ee,{back:a,isFaceUp:!1,canHover:!1,className:"card",key:"Player "+e}))}else{var o=n.a.createElement("img",{width:"100px",height:"140px",src:"",alt:"Player "+e});c.push(n.a.createElement(Ee,{front:o,isFaceUp:!0,canHover:!0,className:"highlight",key:"Player "+e,onClick:function(){t({isOptionA:!0,changeHandsWith:e,changeMyHandIndx:[]})}}))}},l=0;l<a;l++)o(l);return c}function Pe(e){for(var a=e.hand,t=e.setPayload,c=[],o=Object(r.useState)([]),l=Object(E.a)(o,2),s=l[0],i=l[1],u=function(e){var r=n.a.createElement("img",{width:"100px",height:"140px",src:a[e].front,alt:a[e].name+"-Card-Front"});c.push(n.a.createElement(Ee,{front:r,isFaceUp:!0,canHover:!0,className:"highlight",key:"Player "+e,onClick:function(){return function(e){var a=s.findIndex((function(a){return a===e}));i(-1!==a?[].concat(Object(te.a)(s.slice(0,a)),[s.slice(0,a)]):[].concat(Object(te.a)(s),[e])),t({isOptionA:!1,changeHandsWith:-1,changeMyHandIndx:s})}(e)}}))},d=0;d<a.length;d++)u(d);return c}function xe(e){var a=e.characterNumber,t=e.murderedCharacter,c=e.numPlayers,o=e.hand,l=e.currentPlayer,s=e.useCharacterBtn,i=e.setUseCharacterBtn,u=e.UseCharacterPower,d=Object(r.useState)(!1),m=Object(E.a)(d,2),p=m[0],f=m[1],h=Object(r.useContext)(Oe),b=Object(r.useState)(),g=Object(E.a)(b,2),y=g[0],v=g[1],O=Object(r.useState)(!1),j=Object(E.a)(O,2),C=j[0],k=j[1],w="https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fback_gray.jpg?alt=media&token=7a1f8e7e-4a08-426a-9edd-09e60e22496a",P=[{order:1,name:"Assasin",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fasesino.jpg?alt=media&token=03ceea66-dbc1-435d-b46e-1c1edd48b141",back:w},{order:2,name:"Thief",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fladron.jpg?alt=media&token=dfd057fc-3073-40ce-9053-bad997173482",back:w},{order:3,name:"Magician",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmago.jpg?alt=media&token=7ee85db5-3682-486d-820b-2225fce7aea5",back:w},{order:4,name:"King",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Frey.jpg?alt=media&token=60239d45-6c7c-424c-9b77-e2e10c38ad86",back:w},{order:5,name:"Bishop",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fobispo.jpg?alt=media&token=fda603aa-89c4-4692-b09a-e823940d2409",back:w},{order:6,name:"Merchant",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmercader.jpg?alt=media&token=2705ddf3-cf31-47c5-9a79-56f462f43085",back:w},{order:7,name:"Architect",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Farquitecto.jpg?alt=media&token=ee9cee94-7064-4d4e-8f81-760e2df8c772",back:w},{order:8,name:"Warlord",front:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fguerrero.jpg?alt=media&token=f56f6050-9c7f-47df-93f6-3b8d157f4b89",back:w}],F=[];switch(a){case 1:console.log("ENTEred");for(var B=function(e){var a=n.a.createElement("img",{width:"100px",height:"140px",src:P[e].front,alt:P[e].name+"-Card-Front"});F.push(n.a.createElement(Ee,{front:a,isFaceUp:!0,canHover:!0,className:"highlight",key:P[e].name,onClick:function(){return v(e)},context:h}))},T=1;T<P.length;T++)B(T);break;case 2:for(var U=function(e){if(e===t){var a=n.a.createElement("img",{width:"100px",height:"140px",src:P[e].back,alt:"Card-Face-Down"});F.push(n.a.createElement(Ee,{back:a,isFaceUp:!1,canHover:!1,className:"card",key:pe(P[e].name),context:h}))}else{var r=n.a.createElement("img",{width:"100px",height:"140px",src:P[e].front,alt:P[e].name+"-Card-Front"});F.push(n.a.createElement(Ee,{front:r,isFaceUp:!0,canHover:!0,className:"highlight",key:P[e].name,onClick:function(){v(e)},context:h}))}},A=2;A<P.length;A++)U(A);break;case 3:F.push(n.a.createElement("div",null,n.a.createElement(be.a,{label:"Option A",checked:C,onChange:function(e){k(e.target.checked)},name:"checkOption",color:"primary"}),C?n.a.createElement(we,{numPlayers:c,setPayload:v,currentPlayer:l}):n.a.createElement(Pe,{hand:o,setPayload:v})))}return n.a.createElement("div",null,a>3?n.a.createElement("div",null,n.a.createElement(x.a,{variant:"outlined",color:"primary",disabled:s,onClick:function(){return u(-1)}},"Use Character Power")):n.a.createElement("div",null,n.a.createElement(x.a,{variant:"outlined",color:"primary",disabled:s,onClick:function(){f(!0)}},"UseCharacterPower"),n.a.createElement(D.a,{open:p,fullWidth:!0,"aria-labelledby":"form-dialog-title"},n.a.createElement(I.a,{id:"form-dialog-title"},"Use Power"),n.a.createElement(N.a,null,F),n.a.createElement(S.a,null,n.a.createElement(x.a,{onClick:function(){f(!1),i(!0),u(y)},color:"primary"},"Use Power")))))}function Fe(e){var a=e.pileOfCoins,t=e.deckOfDistricts,c=e.setEndStageBtn,o=e.setBuildDistrictBtn,l=e.takeActionBtn,s=e.setTakeActionBtn,i=e.TakeCoin,u=e.TakeDistrictCard,d=Object(r.useState)(!1),m=Object(E.a)(d,2),p=m[0],f=m[1],h=Object(r.useContext)(Oe),b=Object(r.useState)(""),g=Object(E.a)(b,2),y=g[0],v=g[1],O=[];if(a>2)if(1===a){var j=n.a.createElement("img",{width:"100px",height:"140px",src:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fone_coin.jpg?alt=media&token=5c54886b-6975-440f-84d9-98f372045981",alt:"One-Coin-Card"});O.push(n.a.createElement(Ee,{front:j,isFaceUp:!0,canHover:!0,className:"highlight",key:"One-Coin",onClick:function(){v("takeCoin")},context:h}))}else{var C=n.a.createElement("img",{width:"100px",height:"140px",src:"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Ftwo_coin.jpg?alt=media&token=71911bbd-817d-44ec-9922-da8af74e91ee",alt:"Two-Coin-Card"});O.push(n.a.createElement(Ee,{front:C,isFaceUp:!0,canHover:!0,className:"highlight",key:"Two-Coins",onClick:function(){v("takeCoin")},context:h}))}if(t.length>2){if(1!==t.length){var k=n.a.createElement("img",{width:"100px",height:"140px",src:t[1].front,alt:t[1].name+"-Card-Front"});O.push(n.a.createElement("div",null,n.a.createElement(Ee,{front:k,isFaceUp:!0,canHover:!0,className:"highlight",key:t[1].name,onClick:function(){v("takeDistrict1")},context:h}),n.a.createElement("div",null,"Elegir ",t[1].name)))}var w=n.a.createElement("img",{width:"100px",height:"140px",src:t[0].front,alt:t[0].name+"-Card-Front"});O.push(n.a.createElement("div",null,n.a.createElement(Ee,{front:w,isFaceUp:!0,canHover:!0,className:"highlight",key:t[0].name,onClick:function(){v("takeDistrict0")},context:h}),n.a.createElement("div",null,"Elegir ",t[0].name)))}return n.a.createElement("div",null,n.a.createElement(x.a,{variant:"outlined",color:"primary",disabled:l,onClick:function(){f(!0)}},"Take Action"),n.a.createElement(D.a,{open:p,fullWidth:!0,"aria-labelledby":"form-dialog-title"},n.a.createElement(I.a,{id:"form-dialog-title"},"Choose which action"),n.a.createElement(N.a,null,O),n.a.createElement(S.a,null,n.a.createElement(x.a,{onClick:function(){f(!1),o(!1),c(!1),s(!0),"takeCoin"===y?i():"takeDistrict0"===y?u(!0):"takeDistrict1"===y&&u(!1)},color:"primary"},"Action"))))}function De(e){for(var a=e.props,t=e.hand,c=e.coins,o=e.buildDistrictBtn,l=e.setBuildDistrictBtn,s=e.BuildDistrict,i=e.setDestroyBtn,u=Object(r.useState)(-1),d=Object(E.a)(u,2),m=d[0],p=d[1],f=Object(r.useState)(!1),h=Object(E.a)(f,2),b=h[0],g=h[1],y=Object(r.useContext)(Oe),v=[],O=function(e){var a=n.a.createElement("img",{width:"100px",height:"140px",src:t[e].front,alt:t[e].name+"-Card-Front"});v.push(n.a.createElement(Ee,{front:a,isFaceUp:!0,canHover:!0,className:"highlight",key:t[e].name+"-Card-Front",onClick:function(){return function(e,a,t){a<=t?p(e):console.log("Can not use because it is expensive. show alert.")}(e,t[e].cost,c)},context:y}))},j=0;j<t.length;j++)O(j);return n.a.createElement("div",null,n.a.createElement(x.a,{variant:"outlined",color:"primary",disabled:o,onClick:function(){g(!0)}},"Build Distric"),n.a.createElement(D.a,{open:b,fullWidth:!0,"aria-labelledby":"form-dialog-title"},n.a.createElement(I.a,{id:"form-dialog-title"},"Build District"),n.a.createElement(N.a,null,v),n.a.createElement(S.a,null,n.a.createElement(x.a,{onClick:function(){return function(e){he(e.G,e.ctx)?l(!1):l(!0),l(!0),g(!1),i(!1),s(m)}(a)},color:"primary"},"Build"))))}function Se(e){for(var a=e.hand,t=e.coins,r=e.setPayLoad,c=e.playerID,o=[],l=function(e){if(a[e].cost>t){var l=n.a.createElement("img",{width:"100px",height:"140px",src:a[e].front,alt:a[e].name+"-Card-Front"});o.push(n.a.createElement(Ee,{front:l,isFaceUp:!0,canHover:!0,className:"highlight",key:a[e].name,onClick:function(){console.log("Not sufficient to destroy")}}))}else{var s=n.a.createElement("img",{width:"100px",height:"140px",src:a[e].front,alt:a[e].name+"-Card-Front"});o.push(n.a.createElement(Ee,{front:s,isFaceUp:!0,canHover:!0,className:"highlight",key:a[e].name,onClick:function(){return function(e){r({player:c,builtCityHandIndx:e})}(e)}}))}},s=0;s<a.length;s++)l(s);return o}function Ne(e){for(var a=e.hands,t=e.bishopPlayerID,c=e.coins,o=e.WarlordPower,l=e.EndTurn,s=e.setEndStageBtn,i=e.setBuildDistrictBtn,u=e.setTakeActionBtn,d=e.setUseCharacterBtn,m=e.destroyBtn,p=e.setDestroyBtn,f=Object(r.useState)(!1),h=Object(E.a)(f,2),b=h[0],g=h[1],y=Object(r.useState)({player:-1,builtCityHandIndx:-1}),v=Object(E.a)(y,2),O=v[0],j=v[1],C=Object(r.useState)(0),k=Object(E.a)(C,2),w=k[0],P=k[1],F=(Object(r.useContext)(Oe),[]),U=0;U<a.length;U++)console.log("HAND:!",a.length),U!==t&&F.push(n.a.createElement(B.a,{value:U},"Player ",U));var A=[];return A.push(n.a.createElement("div",null,n.a.createElement(T.a,{id:"playerToDestroy"},"Player Num"),n.a.createElement(R.a,{labelId:"playerToDestroy",id:"playerToDestroy-select",value:w,onChange:function(e){console.log("Handle Change value",e.target.value),P(e.target.value)}},F),n.a.createElement(Se,{hand:a[w],coins:c,setPayLoad:j,playerID:w}))),n.a.createElement("div",null,n.a.createElement(x.a,{variant:"outlined",color:"primary",disabled:m,onClick:function(){g(!0)}},"Destroy"),n.a.createElement(D.a,{open:b,fullWidth:!0,"aria-labelledby":"form-dialog-title"},n.a.createElement(I.a,{id:"form-dialog-title"},"Destroy Distric"),n.a.createElement(N.a,null,A),n.a.createElement(S.a,null,n.a.createElement(x.a,{onClick:function(){p(!0),g(!1),s(!0),i(!0),u(!1),d(!1),o(O)},color:"primary"},"Destroy"),n.a.createElement(x.a,{onClick:function(){p(!0),g(!1),s(!0),i(!0),u(!1),d(!1),l()},color:"secondary"},"End Turn"))))}var Ie=t(371),Be=t(167),Te=t(170),Ue=t(168),Ae=t(378),Re=Object(w.a)({root:{width:275,padding:8,"&:last-child":{paddingBottom:"8 !important"}}});var Me=function(e){var a=Re();console.log("Player Card"),console.log(e);for(var t=[],r=0;r<e.citiesBuilt.length;r++)t.push(e.citiesBuilt[r].name);return n.a.createElement(Ie.a,{className:a.root,style:{margin:"6px 0 6px 1px",backgroundColor:"rgba(62, 0, 238, 0.6)"}},n.a.createElement(k.a,{variant:"subtitle1"},e.username),n.a.createElement(k.a,{variant:"subtitle1"},0!==e.character.length?e.character[0].name:"???"),n.a.createElement("div",{style:{flex:"0 0 20%",display:"flex",justifyContent:"space-around"}},n.a.createElement(k.a,null,n.a.createElement(Be.a,null)," ",e.coins),n.a.createElement(k.a,null,n.a.createElement(Ue.a,null)," ",e.cardsInHand),n.a.createElement(Ae.a,{title:0!=t.length?t:"",placement:"center"},n.a.createElement(k.a,null,n.a.createElement(Te.a,null)," ",e.citiesBuilt.length))))};function Ge(e){var a=e.props,t=Object(r.useState)(!0),c=Object(E.a)(t,2),o=c[0],l=c[1],s=Object(r.useState)(!0),i=Object(E.a)(s,2),u=i[0],d=i[1],m=Object(r.useState)(!0),p=Object(E.a)(m,2),f=p[0],h=p[1],b=Object(r.useState)(!1),g=Object(E.a)(b,2),y=g[0],v=g[1],O=Object(r.useState)(!1),j=Object(E.a)(O,2),C=j[0],k=j[1];return n.a.createElement("div",null,n.a.createElement(xe,{characterNumber:a.G.players[a.ctx.currentPlayer].chosenCharacter[0].order,murderedCharacter:a.G.murderedCharacter,numPlayers:a.ctx.numPlayers,currentPlayer:a.ctx.currentPlayer,hand:a.G.secret[a.ctx.currentPlayer].hand,useCharacterBtn:C,setUseCharacterBtn:k,UseCharacterPower:a.moves.UseCharacterPower}),n.a.createElement("br",null),n.a.createElement(Fe,{pileOfCoins:a.G.pileOfCoins,deckOfDistricts:a.G.deckOfDistricts,setEndStageBtn:l,setBuildDistrictBtn:d,takeActionBtn:y,setTakeActionBtn:v,TakeCoin:a.moves.TakeCoin,TakeDistrictCard:a.moves.TakeDistrictCard}),n.a.createElement("br",null),n.a.createElement(De,{props:a,hand:a.G.secret[a.ctx.currentPlayer].hand,coins:a.G.players[a.ctx.currentPlayer].coins,buildDistrictBtn:u,setBuildDistrictBtn:d,BuildDistrict:a.moves.BuildDistrict,setDestroyBtn:h}),n.a.createElement("br",null),8===a.G.players[a.ctx.currentPlayer].chosenCharacter[0].order?n.a.createElement(Ne,{hands:a.G.secret,bishopPlayerID:fe(a.G,a.ctx.numPlayers,5),coins:a.G.players[a.ctx.currentPlayer].coins,WarlordPower:a.moves.WarlordPower,EndTurn:a.moves.EndTurn,setEndStageBtn:l,setBuildDistrictBtn:d,setTakeActionBtn:v,setUseCharacterBtn:k,destroyBtn:f,setDestroyBtn:h}):n.a.createElement("div",null),n.a.createElement("br",null),n.a.createElement(x.a,{variant:"outlined",color:"primary",onClick:function(){a.moves.SkipOrEndStage(),l(!0),d(!0),v(!1),k(!1),h(!1)},disabled:o},"End Turn"))}function He(e){var a,t=e.props,r=(t.G,a=t.ctx,console.log("Entered GetCurrentSituation",a.phase,a.activePlayers),{phase:a.phase,activePlayer:null!=a.activePlayers?a.activePlayers[0]:"none"});return n.a.createElement("div",null,n.a.createElement("h1",null,"Not your turn yet"),n.a.createElement("h1",null,"We are on: ",r.phase," phase"),n.a.createElement("h1",null,r.activePlayer," is playing now"))}var We=function(e){console.log(e);for(var a=[],t=0;t<Object.keys(e.G.players).length;t++)e.playerID!=t&&a.push(n.a.createElement(Me,{key:t,username:"Jugador ".concat(t),character:e.ctx.currentPlayer==t?e.G.players[t].chosenCharacter:Array(0),coins:e.G.players[t].coins,cardsInHand:e.G.players[t].handCount,citiesBuilt:e.G.players[t].builtCity}));for(var r=[],c=0;c<e.G.secret[e.playerID].hand.length;c++){console.log("Carta "+c);var o=n.a.createElement("img",{src:e.G.secret[e.playerID].hand[c].front,alt:e.G.secret[e.playerID].hand[c].name+"-Card-Front",width:"100px",height:"140px"});r.push(n.a.createElement(Ee,{isFaceUp:!0,front:o,canHover:!0,className:"highlight",key:c}))}for(var l=[],s=0;s<e.G.players[e.playerID].builtCity.length;s++){console.log("Carta "+s);var i=n.a.createElement("img",{src:e.G.players[e.playerID].builtCity[s].front,alt:e.G.players[e.playerID].builtCity[s].name+"-Card-Front",width:"100px",height:"140px"});l.push(n.a.createElement(Ee,{isFaceUp:!0,front:i,canHover:!0,className:"highlight",key:s}))}if(e.ctx.currentPlayer===e.playerID){if("drawPhase"===e.ctx.phase)return n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{style:{flex:"0 0 20%"}},a),n.a.createElement(ke,{deckOfCharacters:e.G.deckOfCharacters,faceDownCharacterCards:e.G.faceDownCharacterCards,faceUpCharacterCards:e.G.faceUpCharacterCards,ChooseCharacter:e.moves.ChooseCharacter}),n.a.createElement("div",null,n.a.createElement("h1",null,"Built Cities"),l,n.a.createElement("h1",null,"Coins"),e.G.players[e.playerID].coins),n.a.createElement("div",{style:{width:"600px",display:"flex",position:"fixed",left:"50%",bottom:"50px",transform:"translateX(-50%)"}},r));if("playPhase"===e.ctx.phase)return n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{style:{flex:"0 0 20%"}},a),n.a.createElement(Ge,{props:e}),n.a.createElement("div",{style:{width:"600px",display:"flex",position:"fixed",left:"50%",bottom:"50px",transform:"translateX(-50%)"}},r))}return e.ctx.gameover?(console.log(e.ctx.gameover),n.a.createElement("h1",null,"GAME IS OVER WINNERS:...")):n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{style:{flex:"0 0 20%"}},a),n.a.createElement(He,{props:e}),n.a.createElement("div",{style:{width:"600px",display:"flex",position:"fixed",left:"50%",bottom:"50px",transform:"translateX(-50%)"}},r))},Le=Object(ae.a)({game:de,board:We,multiplayer:Object(me.b)({server:y}),debug:!0});function Je(){var e=Object(j.h)().id,a=Object(l.useStoreState)((function(e){return e.activeRoomPlayer}));return n.a.createElement(Le,{matchID:e,playerID:String(a.playerID),credentials:a.credential})}function ze(){var e=Object(r.useState)(!1),a=Object(E.a)(e,2),t=a[0],c=a[1];return t?n.a.createElement(Je,null):n.a.createElement(ee,{startGame:function(){return c(!0)}})}var Ve=t(320),_e=t(81),Ze=t.n(_e),qe=(t(309),t(311),t(313),{apiKey:"AIzaSyCQBdUbTiRwVVlwNzFk8qI06QsnHBWiOTo",authDomain:"citadels-ldaw.firebaseapp.com",databaseURL:"https://citadels-ldaw.firebaseio.com",projectId:"citadels-ldaw",storageBucket:"citadels-ldaw.appspot.com",messagingSenderId:"82097961134",appId:"1:82097961134:web:dd88b4d82a6e50d23a953f",measurementId:"G-9532JM468P"}),Ke="auth/wrong-password",Xe="auth/user-not-found",Qe=function e(){var a=this;Object(p.a)(this,e),this.createUserWithEmailAndPassword=function(e,t){return a.auth.createUserWithEmailAndPassword(e,t)},this.signInWithEmailAndPassword=function(e,t){return a.auth.signInWithEmailAndPassword(e,t)},this.signOut=function(){return a.auth.signOut()},this.fetchUserProfile=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.firestore.collection("Users").doc(a.auth.currentUser.uid).get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)}))),this.updateProfile=function(e){return a.firestore.collection("Users").doc(a.auth.currentUser.uid).update(e).catch((function(e){return console.error("Error: ",e)}))},Ze.a.initializeApp(qe),this.auth=Ze.a.auth(),this.facebookProvider=new Ze.a.auth.FacebookAuthProvider,this.firestore=Ze.a.firestore()},Ye=t(327),$e=t(372),ea=t(79),aa=t.n(ea),ta=t(80),ra=t.n(ta),na=t(370),ca=t(373),oa=t(171),la=t(172),sa=Object(w.a)({root:{width:"100%"},form:{display:"flex",flexDirection:"column"},field:{marginTop:16},title:{marginBottom:24},submit:{marginTop:16,width:"100%",position:"relative"},submitProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{width:"100%",minHeight:36},socialContainer:{width:"100%",display:"flex",justifyContent:"center"},social:{border:"1px solid #ddd",borderRadius:"50%",display:"inline-flex",justifyContent:"center",alignItems:"center",height:40,width:40,cursor:"pointer"}});var ia=function(){var e=Object(r.useContext)(P),a=Object(j.g)(),t=Object(r.useState)(!1),c=Object(E.a)(t,2),o=c[0],l=c[1],s=Object(r.useState)({email:"",password:""}),i=Object(E.a)(s,2),u=i[0],d=i[1],m=Object(r.useState)({email:null,password:null}),p=Object(E.a)(m,2),f=p[0],h=p[1],b=sa(),g=Object(r.useState)(!1),y=Object(E.a)(g,2),v=y[0],O=y[1];return n.a.createElement("div",{className:b.root},n.a.createElement(k.a,{className:b.title,variant:"h3",align:"center",gutterBottom:!0},"Sign In"),n.a.createElement("div",{className:b.socialContainer},n.a.createElement("button",{onClick:function(){e.auth.signInWithPopup(e.facebookProvider).then((function(a){var t=a.user;return e.firestore.collection("Users").doc(t.uid).set({username:t.displayName,email:t.email})})).then((function(){a.replace("/")})).catch((function(){}))},className:b.social},n.a.createElement(oa.a,{icon:la.a}))),n.a.createElement("form",{noValidate:!0,className:b.form,onSubmit:function(t){t.preventDefault();var r={email:null,password:null};G.a.isEmail(u.email)||(r=Object(C.a)(Object(C.a)({},r),{},{email:"Must be a valid email"})),G.a.isEmpty(u.password)&&(r=Object(C.a)(Object(C.a)({},r),{},{password:"Must not be empty"})),h(r);var n=Object.keys(r).reduce((function(e,a){return null==r[a]||(e[a]=r[a]),e}),{});0===Object.keys(n).length&&(O(!0),e.signInWithEmailAndPassword(u.email,u.password).then((function(){O(!1),a.replace("/")})).catch((function(e){console.log(e.code),e.code===Xe?h(Object(C.a)(Object(C.a)({},f),{},{email:"Not found"})):e.code===Ke&&h(Object(C.a)(Object(C.a)({},f),{},{password:"Incorrect password"})),O(!1)})))},method:"POST"},n.a.createElement(F.a,{type:"email",name:"email",className:b.field,value:u.email,onChange:function(e){return d(Object(C.a)(Object(C.a)({},u),{},{email:e.target.value}))},label:"Email",variant:"outlined",error:null!=f.email,helperText:f.email}),n.a.createElement(A.a,{className:b.field,variant:"outlined",error:null!=f.password},n.a.createElement(T.a,{htmlFor:"sign-in-password"},"Password"),n.a.createElement(Ye.a,{id:"sign-in-password",name:"password",type:o?"text":"password",value:u.password,onChange:function(e){return d(Object(C.a)(Object(C.a)({},u),{},{password:e.target.value}))},endAdornment:n.a.createElement($e.a,{position:"end"},n.a.createElement(na.a,{"aria-label":"toggle password visibility",onClick:function(){return l(!o)},edge:"end"},o?n.a.createElement(aa.a,null):n.a.createElement(ra.a,null))),labelWidth:70}),null!=f.password?n.a.createElement(U.a,null,f.password):null),n.a.createElement("div",{className:b.submit},n.a.createElement(x.a,{className:b.button,type:"submit",variant:"contained",color:"primary",disabled:v,id:"sign-in-button"},!v&&"Sign In"),v&&n.a.createElement(ca.a,{size:24,className:b.submitProgress}))))},ua=Object(w.a)({root:{width:"100%"},form:{display:"flex",flexDirection:"column"},field:{marginTop:16},title:{marginBottom:24},submit:{marginTop:16,width:"100%",position:"relative"},submitProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{width:"100%",minHeight:36}});var da=function(){var e=Object(r.useContext)(P),a=Object(j.g)(),t=Object(r.useState)(!1),c=Object(E.a)(t,2),o=c[0],l=c[1],s=Object(r.useState)(!1),i=Object(E.a)(s,2),u=i[0],d=i[1],m=Object(r.useState)({username:"",email:"",password:"",confirmationPassword:""}),p=Object(E.a)(m,2),f=p[0],h=p[1],b=Object(r.useState)({username:null,email:null,password:null,confirmationPassword:null}),g=Object(E.a)(b,2),y=g[0],v=g[1],O=ua(),w=Object(r.useState)(!1),D=Object(E.a)(w,2),S=D[0],N=D[1];return n.a.createElement("div",{className:O.root},n.a.createElement(k.a,{className:O.title,variant:"h3",align:"center",gutterBottom:!0},"Sign Up"),n.a.createElement("form",{className:O.form,onSubmit:function(t){t.preventDefault();var r={username:null,email:null,password:null,confirmationPassword:null};G.a.isEmpty(f.username)&&(r=Object(C.a)(Object(C.a)({},r),{},{username:"Must not be empty"})),G.a.isEmail(f.email)||(r=Object(C.a)(Object(C.a)({},r),{},{email:"Must be a valid email"})),G.a.isLength(f.password,{min:6})||(r=Object(C.a)(Object(C.a)({},r),{},{password:"Must be at least six characters long"})),null!=r.password||G.a.equals(f.password,f.confirmationPassword)||(r=Object(C.a)(Object(C.a)({},r),{},{confirmationPassword:"Passwords must be equal"})),v(r);var n=Object.keys(r).reduce((function(e,a){return null==r[a]||(e[a]=r[a]),e}),{});0===Object.keys(n).length&&(N(!0),e.createUserWithEmailAndPassword(f.email,f.password).then((function(a){return e.firestore.collection("Users").doc(a.user.uid).set({username:f.username,email:f.email})})).then((function(){N(!1),a.replace("/")})).catch((function(){N(!1)})))},noValidate:!0,method:"POST"},n.a.createElement(F.a,{name:"username",className:O.field,value:f.username,onChange:function(e){return h(Object(C.a)(Object(C.a)({},f),{},{username:e.target.value}))},label:"Username",variant:"outlined",error:null!=y.username,helperText:y.username}),n.a.createElement(F.a,{type:"email",name:"email",className:O.field,value:f.email,onChange:function(e){return h(Object(C.a)(Object(C.a)({},f),{},{email:e.target.value}))},label:"Email",variant:"outlined",error:null!=y.email,helperText:y.email}),n.a.createElement(A.a,{className:O.field,variant:"outlined",error:null!=y.password},n.a.createElement(T.a,{htmlFor:"sign-up-password"},"Password"),n.a.createElement(Ye.a,{id:"sign-up-password",name:"password",type:o?"text":"password",value:f.password,onChange:function(e){return h(Object(C.a)(Object(C.a)({},f),{},{password:e.target.value}))},endAdornment:n.a.createElement($e.a,{position:"end"},n.a.createElement(na.a,{"aria-label":"toggle password visibility",onClick:function(){return l(!o)},edge:"end"},o?n.a.createElement(aa.a,null):n.a.createElement(ra.a,null))),labelWidth:70}),null!=y.password?n.a.createElement(U.a,null,y.password):null),n.a.createElement(A.a,{className:O.field,variant:"outlined",error:null!=y.confirmationPassword},n.a.createElement(T.a,{htmlFor:"sign-up-confirmation-password"},"Confirm Password"),n.a.createElement(Ye.a,{id:"sign-up-confirmation-password",name:"confirmationPassword",type:u?"text":"password",value:f.confirmationPassword,onChange:function(e){return h(Object(C.a)(Object(C.a)({},f),{},{confirmationPassword:e.target.value}))},endAdornment:n.a.createElement($e.a,{position:"end"},n.a.createElement(na.a,{"aria-label":"toggle password visibility",onClick:function(){return d(!u)},edge:"end"},u?n.a.createElement(aa.a,null):n.a.createElement(ra.a,null))),labelWidth:135}),null!=y.confirmationPassword?n.a.createElement(U.a,null,y.confirmationPassword):null),n.a.createElement("div",{className:O.submit},n.a.createElement(x.a,{className:O.button,type:"submit",variant:"contained",color:"primary",disabled:S},!S&&"Sign Up"),S&&n.a.createElement(ca.a,{size:24,className:O.submitProgress}))))},ma=Object(w.a)({root:{background:"#6A62D2",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},card:{minWidth:768,display:"flex"},panel:{flex:1,padding:24},rightPanel:{background:"#C0E5C8"}});var pa=function(){var e=ma();return n.a.createElement("main",{className:e.root},n.a.createElement(Ve.a,{className:e.card},n.a.createElement("div",{className:e.panel},n.a.createElement(ia,null)),n.a.createElement("div",{className:Object(z.a)(e.panel,e.rightPanel)},n.a.createElement(da,null))))};var fa=function(e){var a=e.children,t=e.fallback,c=Object(r.useContext)(P),o=Object(r.useState)({loading:!0,authenticated:!1}),l=Object(E.a)(o,2),s=l[0],i=l[1];return Object(r.useEffect)((function(){var e=c.auth.onAuthStateChanged((function(e){i(null!==e?{loading:!1,authenticated:!0}:{loading:!1,authenticated:!1})}));return function(){e()}}),[i,c]),s.loading?t:s.loading||s.authenticated?a:n.a.createElement(j.a,{to:"/auth"})};var ha=function(e){var a=e.children,t=e.fallback,c=Object(r.useContext)(P),o=Object(r.useState)({loading:!0,authenticated:!1}),l=Object(E.a)(o,2),s=l[0],i=l[1];return Object(r.useEffect)((function(){var e=c.auth.onAuthStateChanged((function(e){i(null!==e?{loading:!1,authenticated:!0}:{loading:!1,authenticated:!1})}));return function(){e()}}),[i,c]),s.loading?t:s.loading||s.authenticated?n.a.createElement(j.a,{to:"/"}):a},ba=function(){return n.a.createElement(O.a,null,n.a.createElement(j.d,null,n.a.createElement(j.b,{exact:!0,path:"/"},n.a.createElement(fa,{fallback:n.a.createElement("p",null,"Loading...")},n.a.createElement(Y,null))),n.a.createElement(j.b,{exact:!0,path:"/auth"},n.a.createElement(ha,{fallback:n.a.createElement("p",null,"Loading...")},n.a.createElement(pa,null))),n.a.createElement(j.b,{exact:!0,path:"/rooms/:id"},n.a.createElement(fa,{fallback:n.a.createElement("p",null,"Loading...")},n.a.createElement(ze,null)))))},ga=t(173),ya=t(374),va=Object(ga.a)({typography:{fontFamily:"Nunito, Roboto, sans-serif"}}),Oa=localStorage.getItem("citadels_player"),ja=function(e){var a;return(a=e)&&(d=a),Object(l.createStore)(m,{initialState:e,injections:{lobbyApi:new v}})}({activeRoomPlayer:Oa?JSON.parse(Oa):null});o.a.render(n.a.createElement(l.StoreProvider,{store:ja},n.a.createElement(P.Provider,{value:new Qe},n.a.createElement(ya.a,{theme:va},n.a.createElement(ba,null)))),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.67ed0860.chunk.js.map