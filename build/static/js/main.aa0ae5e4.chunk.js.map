{"version":3,"sources":["store/store.js","game/config/client.js","services/LobbyService.js","game/config/index.js","components/firebase/FirebaseContext.react.js","components/create_game/CreateGameDialog.react.js","components/create_game/CreateGameButton.react.js","hooks/useBoolean.js","components/shared/FlexLayout.react.js","components/home/RoomsListItem.react.js","components/home/RoomsList.react.js","components/home/Home.react.js","components/lobby/LobbySetup.react.js","game/Cards.js","game/Moves.js","game/Logic.js","game/CitadelsGame.js","components/game/Utiliy.js","components/bgioComponents/logo.js","components/bgioComponents/ui-context.js","components/bgioComponents/card.js","components/game/Dialogs.react.js","components/game/PlayerCard.react.js","components/game/Board.react.js","components/game/GameApp.react.js","components/lobby/Lobby.react.js","utils/Firebase.js","components/authentication/SignInForm.react.js","constants/routes.js","components/authentication/SignUpForm.react.js","components/authentication/Authentication.react.js","components/shared/AuthRenderer.react.js","components/shared/NoAuthRenderer.react.js","App.react.js","index.js","store/index.js"],"names":["initState","store","rooms","setRooms","action","state","payload","loadRooms","thunk","actions","a","injections","lobbyApi","getRooms","roomID","setRoomID","createGameRoom","createRoom","roomMetadata","setRoomMetadata","loadRoomMetadata","getRoomMetadata","metadata","loadingJoinRoom","setLoadingJoinRoom","activeRoomPlayer","setActiveRoomPlayer","localStorage","setItem","JSON","stringify","joinRoom","getStoreState","playerCredentials","credential","playerID","reset","window","location","origin","BGIO_SERVER_URL","protocol","hostname","LobbyService","this","api","ky","create","prefixUrl","numPlayers","setupData","players","Number","parseInt","post","json","data","matchID","playerName","get","fetch","then","res","matches","FirebaseContext","React","createContext","useStyles","makeStyles","paper","minWidth","form","display","flexDirection","field","marginBottom","CreateGameDialog","props","classes","useState","roomName","numberOfPlayers","fields","setFields","fieldErrors","setFieldErrors","Dialog","open","onClose","aria-labelledby","DialogTitle","id","DialogContent","className","TextField","fullWidth","label","value","onChange","e","target","error","helperText","FormControl","InputLabel","Select","labelId","MenuItem","FormHelperText","DialogActions","Button","onClick","color","event","errors","validator","isEmpty","noNullErrors","Object","keys","reduce","acc","current","length","onSubmit","CreateGameButton","initialState","setValue","set","toggle","useCallback","setTrue","setFalse","useBoolean","variant","root","directionHorizontal","directionHorizontalReverse","directionVertical","directionVerticalReverse","justifyStart","justifyContent","justifyEnd","justifyCenter","justifyBetween","justifyAround","justifyEvenly","alignStart","alignItems","alignEnd","alignCenter","alignStretch","alignBaseline","wrap","flexWrap","wrapReverse","FlexLayout","align","children","direction","justify","clsx","padding","backgroundColor","borderRadius","borderStyle","borderWidth","borderColor","details","marginRight","width","RoomsListItem","room","onJoin","Typography","gutterBottom","listStyle","margin","RoomsList","map","key","paddingBottom","paddingTop","paddingRight","paddingLeft","creation","Home","useStoreState","s","useStoreActions","firebase","useContext","userProfile","setUserProfile","useEffect","fetchUserProfile","profile","fetchProfile","firestore","collection","onSnapshot","snapshot","result","forEach","doc","push","to","username","height","LobbySetup","startGame","useParams","gameRoomFull","filter","p","name","firstWithoutName","find","emptySeatID","index","setTimeout","player","districtCardInDeck","quantity","cost","type","imageURL","cards","getCurrentCharacter","G","ctx","console","log","currentPlayer","chosenCharacter","order","EndTurn","powerUsed","districtBuiltOnTurn","deckOfCharacters","splice","events","endStage","endTurn","addExtraCoin","typeOfDistrict","addedGold","goldDistrictCount","builtCity","city","getExtraCoins","pileOfCoins","coins","UseCharacterPower","toMurder","murderedCharacter","assasinPower","toSteal","muggedCharacter","muggedFromPlayer","muggedToCharacter","thiefPower","isOptionA","changeHandsWith","resultSecret","secret","currentPlayerHand","hand","magicianPowerA","changeMyHandIndx","sort","b","numOfCards","x","deckOfDistricts","i","shift","magicianPowerB","isKing","indx","Shuffle","array","j","Math","floor","random","GameSetUp","deck","CreateDeckOfDistricts","backSrc","front","back","CreateDeckOfCharacters","handCount","pop","faceDownCharacterCards","faceUpCharacterCards","playerWithCrown","finishedFirst","CitadelsGame","setup","phases","drawPhase","turn","first","next","playOrderPos","playOrder","playerOrder","Array","doubleTurn","concat","element","GetPlayerOrderDrawPhase","moveLimit","onBegin","randomNumber","SetDrawPhase","moves","ChooseCharacter","indx1","indx2","endIf","IsDrawPhaseOver","start","playPhase","activePlayers","stage","muggedPlayer","characterOrder","some","findPlayerWithCharacter","BeginPlayTurn","dict","GetPlayerOrderPlayPhase","stages","takeActionStage","TakeCoin","addCards","TakeDistrictCard","choseFirstCard","second","buildStage","BuildDistrict","handIndex","canBuild","setStage","SkipOrEndStage","extraStage","WarlordPower","destroy","destroyedCity","builtCityHandIndx","newPlayers","SetPlayPhase","IsPlayPhaseOver","onEnd","CleanPlayPhase","minPlayers","maxPlayers","gameIsOver","phase","IsGameOver","disableUndo","HashOfString","string","hash","charCodeAt","FindPlayerWithCharacter","Logo","xmlns","viewBox","d","fill","UIContext","CardImpl","dragComponentRef","createRef","isOverAccepted","classNames","cardStyle","inDeck","position","zIndex","deckPosition","dragZone","isActive","join","style","opacity","pointerEvents","isFaceUp","GetDraggable","for","ref","isOverAcceptedCallback","y","currentlyHoveredDroppableId","content","cursor","boxShadow","left","top","GetDragComponent","o","Component","defaultProps","Card","Consumer","context","ChooseCharacterDialog","dialogOpen","setDialogOpen","value1","value2","setChosenCharacter","uicontext","cardsToChoose","cardElement","image","src","alt","canHover","disableBackdropClick","disableEscapeKeyDown","ShowPlayers","setPayload","ShowHand","handCards","selectedCards","setSelectedCards","containIndx","findIndex","slice","handleClick","UseCharacterPowerDialog","characterNumber","useCharacterBtn","setUseCharacterBtn","checkBox","setCheckBox","dialogContent","Checkbox","checked","disabled","TakeActionDialog","setEndStageBtn","setBuildDistrictBtn","takeActionBtn","setTakeActionBtn","setAction","takeActionOptions","BuildDistricDialog","buildDistrictBtn","districtToBuild","setDistrictToBuild","handleClickOpen","buildOptions","PlayerHand","setPayLoad","DestroyDistricDialog","hands","bishopPlayerID","destroyBtn","setDestroyBtn","payLoad","setPlayerID","handleChange","menuItems","distroyDialogContent","PlayerCard","citiesBuilt","character","flex","cardsInHand","Tooltip","title","placement","PlayPhaseUI","endStageBtn","Board","playerCards","districtsInMyHand","isMyTurn","IsMyTurn","bottom","transform","GameApp","Client","game","board","multiplayer","SocketIO","server","debug","LobbyPlay","String","credentials","Lobby","isGameRunning","setGameRunning","config","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","AUTH_ERRORS","Firebase","createUserWithEmailAndPassword","email","password","auth","signInWithEmailAndPassword","signOut","currentUser","uid","userData","updateProfile","user","update","catch","app","initializeApp","facebookProvider","FacebookAuthProvider","marginTop","submit","submitProgress","marginLeft","button","minHeight","socialContainer","social","border","SignInForm","history","useHistory","showPassword","setShowPassword","loading","setLoading","signInWithPopup","displayName","replace","icon","faFacebookF","noValidate","preventDefault","isEmail","err","code","method","htmlFor","OutlinedInput","endAdornment","InputAdornment","IconButton","aria-label","edge","labelWidth","CircularProgress","size","SignUpForm","showConfirmationPassword","setShowConfirmationPassword","confirmationPassword","isLength","min","equals","background","card","panel","rightPanel","Authentication","Paper","AuthRenderer","fallback","authenticated","setState","listener","onAuthStateChanged","logged","NoAuthRenderer","App","exact","path","theme","createMuiTheme","typography","fontFamily","savedPlayer","getItem","createStore","initializeStore","parse","ReactDOM","render","Provider","document","getElementById"],"mappings":"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EACA,yKAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,SACA,EACA,EACA,yKAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,YACA,EACA,EACA,0KAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,aACA,EACA,EACA,wKAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,UACA,EACA,EACA,wKAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,UACA,EACA,EACA,wKAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,UACA,EACA,EACA,2KAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,WACA,EACA,EACA,4KAGJiE,EAAKlF,KAAL,MAAAkF,EAAI,aACCjE,GACD,EACA,gBACA,EACA,EACA,2KAcGiE,EGzFeC,GACtBR,GAAQN,GACR,IAAInC,EH0FC,WACL,IAAMkD,EACJ,qJAmIF,MAlIa,CACX,CACEtD,MAAO,EACPpB,KAAM,UACN2E,MACE,uKACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,QACN2E,MACE,sKACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,WACN2E,MACE,oKACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,OACN2E,MACE,mKACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,SACN2E,MACE,sKACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,WACN2E,MACE,wKACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,YACN2E,MACE,0KACFC,KAAMF,GAER,CACEtD,MAAO,EACPpB,KAAM,UACN2E,MACE,wKACFC,KAAMF,IGpJaG,GACvBZ,GAAQzC,GASR,IARA,IAMI0B,EAAS,GACTtN,EAAU,GACLgO,EAAI,EAAGA,EAAI7C,EAAIrL,WAAYkO,IAAK,CACvChO,EAAQgO,GA9BH,CACLvB,MAAO,EACPJ,UAAW,GACX6C,UAAW,EACX3D,gBAAiB,GACjBG,WAAW,EACXC,oBAAqB,GAyBrB2B,EAAOU,GAAK,GACZV,EAAOU,GAAGR,KAAO,GACjB,IAAK,IAAIe,EAAI,EAAGA,EAAI,EAAGA,IACrBjB,EAAOU,GAAGR,KAAK9D,KAAKqE,EAAgBoB,OAEtC3C,GAA4B,EAE9B,MAAO,CACLA,cACAuB,kBACAnC,mBACAwD,uBArB2B,GAsB3BC,qBArByB,GAsBzBC,gBApDK,EAqDLC,eArBmB,EAsBnB3C,mBArBuB,EAsBvBG,gBArBoB,CAACC,kBAAmB,EAAGC,mBAAoB,GAsB/DK,SACAtN,WAIJ,IA0EewP,GA1EM,CACnBpF,Kb1IuB,Wa4IvBqF,MAAO,SAACtE,GAAD,OAASwD,GAAUxD,IAI1BuE,OAAQ,CACNC,UAAW,CACTC,KAAM,CACJpE,MAAO,CAGLqE,MAAO,SAAC3E,EAAGC,GAAJ,OAAY,GAInB2E,KAAM,SAAC5E,EAAGC,GAAJ,OAAaA,EAAI4E,aAAe,GAAK5E,EAAIrL,YAC/CkQ,UAAW,SAAC9E,EAAGC,GAAJ,ODnId,SAAiCD,EAAGC,GACzCC,QAAQC,IAAI,mCACZ,IAAI4E,EAAW,aAAOC,MAAM/E,EAAIrL,YAAYsE,QAE5C,GADiB+G,EAAIrL,WACJ,EAAG,CAClB,IAAIqQ,EAAU,aAAOD,MAAM/E,EAAIrL,YAAYsE,QAC3C6L,EAAcA,EAAYG,OAAOD,GAEnC,IAAK,IAAInC,EAAI,EAAGA,EAAI9C,EAAEoE,gBAAiBtB,IAAK,CAC1C,IAAMqC,EAAUJ,EAAYhC,QAC5BgC,EAAYvG,KAAK2G,GAEnB,OAAOJ,ECuHwBK,CAAwBpF,EAAGC,KAEpDoF,UAAW,GAEbC,QAAS,SAACtF,EAAGC,GAAJ,ODpER,SAAsBD,EAAGC,GAC9B,IAAIsF,EAAejC,KAAKC,MAAsB,EAAhBD,KAAKE,UAEnC,GADAxD,EAAEkE,uBAAuB1F,KAAKwB,EAAEU,iBAAiBC,OAAO4E,EAAc,GAAG,IACrEtF,EAAIrL,WAAa,GAAKqL,EAAIrL,WAAa,EAAG,CAE5C,IADA2Q,EAAejC,KAAKC,MAAsB,EAAhBD,KAAKE,UACxBP,GAAOjD,EAAGuF,IACfA,EAAejC,KAAKC,MAAsB,EAAhBD,KAAKE,UAGjC,GADAxD,EAAEmE,qBAAqB3F,KAAKwB,EAAEU,iBAAiBC,OAAO4E,EAAc,GAAG,IAChD,IAAnBtF,EAAIrL,WAAkB,CAExB,IADA2Q,EAAeA,EAAejC,KAAKC,MAAsB,EAAhBD,KAAKE,UACvCP,GAAOjD,EAAGuF,IACfA,EAAejC,KAAKC,MAAsB,EAAhBD,KAAKE,UAEjCxD,EAAEmE,qBAAqB3F,KAAKwB,EAAEU,iBAAiBC,OAAO4E,EAAc,GAAG,IAEzE,OAAOvF,GCoDgBwF,CAAaxF,EAAGC,IACrCwF,MAAO,CAACC,gBFlJP,SAAyB1F,EAAGC,EAAK0F,GAAoB,IAAbC,EAAY,wDAAH,EACtD1F,QAAQC,IAAI,iCAAkCwF,GAC9C3F,EAAElL,QAAQmL,EAAIG,eAAeC,gBAAgBM,OAAO,EAAE,EAAEX,EAAEU,iBAAiBC,OAAOgF,EAAM,GAAG,IAIpE,IAAnB1F,EAAIrL,YAAkD,IAA9BoL,EAAEU,iBAAiBpH,SACzCqM,EAAQC,IACVA,GAAgB,GAElB5F,EAAEkE,uBAAuB1F,KAAKwB,EAAEU,iBAAiBC,OAAOiF,EAAM,GAAG,KAK5C,IAAnB3F,EAAIrL,YAAmD,IAA9BoL,EAAEU,iBAAiBpH,QAAqC,IAArB2G,EAAI4E,cAClE7E,EAAEU,iBAAiBlC,KAAKwB,EAAEkE,uBAAuBD,OAIlB,IAA9BjE,EAAEU,iBAAiBpH,QACpB0G,EAAEkE,uBAAuB1F,KAAKwB,EAAEU,iBAAiBuD,SE8H/C4B,MAAO,SAAC7F,EAAGC,GAAJ,OD7CN,SAAyBD,EAAGC,GAEjC,OADoD,IAA9BD,EAAEU,iBAAiBpH,OC4ClBwM,CAAgB9F,IACnC4E,KAAM,YACNmB,OAAO,GAGTC,UAAW,CACTtB,KAAM,CACJuB,cAAe,CACb7F,cAAe,CAAC8F,MAAO,mBACvBtB,KAAM,CACJxE,cAAe,CAAC8F,MAAO,qBAG3BZ,QAAS,SAACtF,EAAGC,GAAJ,ODhDV,SAAuBD,EAAGC,GAK/B,GAJ8D,IAA1DD,EAAElL,QAAQmL,EAAIG,eAAeC,gBAAgB,GAAGC,QAClDN,EAAEoE,gBAAkBnE,EAAIG,eAGtBL,GAAoBC,EAAGC,KAASD,EAAE0B,kBAQpC,OAPAxB,QAAQC,IACN,mBACEF,EAAIG,cACJ,+CACAL,GAAoBC,EAAGC,IAE3BM,GAAQP,EAAGC,GACJD,EAGT,GAAID,GAAoBC,EAAGC,KAASD,EAAE6B,gBAAgBE,kBACpD,GAAI/B,EAAE6B,gBAAgBE,oBAAsB/B,EAAE0B,kBAC5CxB,QAAQC,IAAI,gCACP,CACLD,QAAQC,IAAI,mBAAqBF,EAAIG,cAAgB,iBACrD,IAAI+F,ED/FH,SAAiCnG,EAAGC,EAAKmG,GAC9C,IAAK,IAAItD,EAAI,EAAGA,EAAI7C,EAAIrL,WAAYkO,IAClC,GAAI9C,EAAElL,QAAQgO,GAAGzC,gBAAgBgG,MAAK,SAAAvO,GAAC,OAAIA,EAAEwI,QAAU8F,KACrD,OAAOtD,EAGX,OAAQ,ECyFewD,CACjBtG,EACAC,EACAD,EAAE6B,gBAAgBE,mBAEpB/B,EAAElL,QAAQkL,EAAE6B,gBAAgBC,kBAAkBP,MAC5CvB,EAAElL,QAAQkL,EAAE6B,gBAAgBC,kBAAkBP,MAC9CvB,EAAElL,QAAQqR,GAAc5E,MAC1BvB,EAAElL,QAAQqR,GAAc5E,MAAQ,EAIpC,OAAOvB,ECeoBuG,CAAcvG,EAAGC,IACtCK,MAAO,CACLqE,MAAO,SAAC3E,EAAGC,GAAJ,OAAY,GACnB2E,KAAM,SAAC5E,EAAGC,GAAJ,OAAaA,EAAI4E,aAAe,GAAK5E,EAAIrL,YAC/CkQ,UAAW,SAAC9E,EAAGC,GAAJ,ODpId,SAAiCD,EAAGC,GAGzC,IAFA,IAAIuG,EAAO,GAEF1D,EAAI,EAAGA,EAAI7C,EAAIrL,WAAYkO,IAClC,IAAK,IAAIO,EAAI,EAAGA,EAAIrD,EAAElL,QAAQgO,GAAGzC,gBAAgB/G,OAAQ+J,IAAK,CAC5D,IAAItG,EAAM+F,EAAIO,EAAIpD,EAAIrL,WACtB4R,EAAKzJ,GAAOiD,EAAElL,QAAQgO,GAAGzC,gBAAgBgD,GAAG/C,MAKhD,IAAIyE,EAAc9L,OAAOC,KAAKsN,GAAM/D,MAAK,SAAUpQ,EAAGqQ,GACpD,OAAO8D,EAAKnU,GAAKmU,EAAK9D,MAExB,GAAIzC,EAAIrL,WAAa,EACnB,IAAK,IAAIkO,EAAI,EAAGA,EAAIiC,EAAYzL,OAAQwJ,IACtCiC,EAAYjC,GAAKiC,EAAYjC,GAAK7C,EAAIrL,WAS1C,OAJAmQ,EAAcA,EAAYjI,KAAI,SAAU8F,GACtC,OAAO5N,SAAS4N,EAAG,OAErB1C,QAAQC,IAAI,2BACL4E,EC2GwB0B,CAAwBzG,EAAGC,KAEpDyG,OAAQ,CACNC,gBAAiB,CACflB,MAAO,CAACmB,SFpHb,SAAkB5G,EAAGC,GAmB1B,GAlBAC,QAAQC,IAAI,mBAIuB,IAAhCJ,GAAoBC,EAAGC,IAAcD,EAAEsB,YAAc,IACtDtB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQvB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQ,EAC1EvB,EAAEsB,YAActB,EAAEsB,YAAc,GAGZ,IAAlBtB,EAAEsB,aACJtB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQvB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQ,EAC1EvB,EAAEsB,YAActB,EAAEsB,YAAc,IAEhCtB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQvB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQ,EAC1EvB,EAAEsB,YAActB,EAAEsB,YAAc,GAIC,IAAhCvB,GAAoBC,EAAGC,IAAcD,EAAEU,iBAAiBpH,OAAS,EAAG,CACrE,IAAIuN,EAAW7G,EAAE6C,gBAAgBlC,OAAO,EAAE,GAC1CX,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK9D,KAAKqI,EAAS,IAC/C7G,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK9D,KAAKqI,EAAS,IAKjD5G,EAAIW,OAAOC,YEyFiBiG,iBFhFvB,SAA0B9G,EAAGC,EAAK8G,GACvC7G,QAAQC,IAAI,2BACZ,IAAIwE,EAAQ3E,EAAE6C,gBAAgBE,QAC1BiE,EAAShH,EAAE6C,gBAAgBE,QAE5BgE,GACD/G,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK9D,KAAKmG,GACtC3E,EAAE6C,gBAAgBrE,KAAKwI,KAEvBhH,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK9D,KAAKwI,GACtChH,EAAE6C,gBAAgBrE,KAAKmG,IAIU,IAAhC5E,GAAoBC,EAAGC,IAAcD,EAAEsB,YAAc,IACtDtB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQvB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQ,EAC1EvB,EAAEsB,YAActB,EAAEsB,YAAc,GAIC,IAAhCvB,GAAoBC,EAAGC,IAAcD,EAAEU,iBAAiBpH,OAAS,IAClE0G,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK9D,KAAKwB,EAAE6C,gBAAgBE,SACxD/C,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK9D,KAAKwB,EAAE6C,gBAAgBE,UAG1D9C,EAAIW,OAAOC,YEuDmCW,sBACpCoD,KAAM,cAERqC,WAAY,CACVxB,MAAO,CAACyB,cFrCb,SAAuBlH,EAAGC,EAAKkH,GACpCjH,QAAQC,IAAI,yBAfd,SAAkBH,EAAGC,GACnB,IAAImH,GAAW,EAIf,OAHwD,IAArDpH,EAAElL,QAAQmL,EAAIG,eAAeK,qBAA8BT,EAAElL,QAAQmL,EAAIG,eAAeK,oBAAsB,GAAqC,IAAhCV,GAAoBC,EAAGC,MAC3ImH,GAAW,GAENA,EAYJA,CAASpH,EAAGC,KACbD,EAAElL,QAAQmL,EAAIG,eAAeK,oBAAsBT,EAAElL,QAAQmL,EAAIG,eAAeK,oBAAsB,EAEnGT,EAAElL,QAAQmL,EAAIG,eAAemB,OAASvB,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK6E,GAAWxH,OACnFK,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQvB,EAAElL,QAAQmL,EAAIG,eAAemB,MAAQvB,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK6E,GAAWxH,KACtHK,EAAEsB,YAActB,EAAEsB,YAActB,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK6E,GAAWxH,KAC5EK,EAAElL,QAAQmL,EAAIG,eAAee,UAAU3C,KAAKwB,EAAEoC,OAAOnC,EAAIG,eAAekC,KAAK3B,OAAOwG,EAAU,GAAG,MAIlGnH,EAAElL,QAAQmL,EAAIG,eAAee,UAAU7H,QAAU,IAA0B,IAArB0G,EAAEqE,gBACzDrE,EAAEqE,cAAgBpE,EAAIG,eAGW,IAAhCL,GAAoBC,EAAGC,IACxBA,EAAIW,OAAOyG,SAAS,eEmBWC,eFT5B,SAAwBtH,EAAGC,GAChCD,EAAElL,QAAQmL,EAAIG,eAAeI,WAAY,EACzCR,EAAElL,QAAQmL,EAAIG,eAAeK,oBAAsB,EAGhB,IAAhCV,GAAoBC,EAAGC,GACxBA,EAAIW,OAAOyG,SAAS,eAGpBrH,EAAEU,iBAAiBlC,KAAKwB,EAAElL,QAAQmL,EAAIG,eAAeC,gBAAgBM,OAAO,EAAE,GAAG,IACjFV,EAAIW,OAAOC,WACXZ,EAAIW,OAAOE,YEFoCU,uBAEzC+F,WAAY,CACV9B,MAAO,CAAC+B,aF+Gb,SAAsBxH,EAAGC,EAAKwH,GAMnC,IAAIC,EAAgB1H,EAAElL,QAAQ2S,EAAQjI,QAAQ2B,UAAUR,OAAO8G,EAAQE,kBAAmB,GAAG,GAC7F3H,EAAElL,QAAQmL,EAAIG,eAAemB,MAASvB,EAAElL,QAAQmL,EAAIG,eAAemB,OAASmG,EAAc/H,KAAO,GACjGK,EAAEsB,YAActB,EAAEsB,aAAeoG,EAAc/H,KAAO,GACtDK,EAAE6C,gBAAgBrE,KAAKkJ,GAGvB1H,EAAEU,iBAAiBlC,KAAKwB,EAAElL,QAAQmL,EAAIG,eAAeC,gBAAgBM,OAAO,EAAE,GAAG,IACjFV,EAAIW,OAAOC,WACXZ,EAAIW,OAAOE,WE7HqBP,eAI5B+E,QAAS,SAACtF,EAAGC,GAAJ,OD1BR,SAAsBD,EAAGC,GAC9B,IAAI2H,EAAU,eAAO5H,EAAElL,SACvB,GAAImL,EAAIrL,WAAa,EACnB,IAAK,IAAMmI,KAAO6K,EAChBA,EAAW7K,GAAKsD,gBAAgBoC,MAAK,SAAUpQ,EAAGqQ,GAChD,OAAOrQ,EAAEiO,MAAQoC,EAAEpC,SAIzB,OAAO,2BAAIN,GAAX,IAAclL,QAAS8S,ICiBEC,CAAa7H,EAAGC,IACrC4F,MAAO,SAAC7F,EAAGC,GAAJ,ODfN,SAAyBD,EAAGC,GAMjC,OAAqB,IAHnBD,EAAEU,iBAAiBpH,OACnB0G,EAAEkE,uBAAuB5K,OACzB0G,EAAEmE,qBAAqB7K,OCUFwO,CAAgB9H,IACnC+H,MAAO,SAAC/H,EAAGC,GAAJ,ODFN,SAAwBD,EAAGC,GAEhCD,EAAE0B,mBAAqB,EACvB1B,EAAE6B,gBAAkB,CAACC,kBAAmB,EAAGC,mBAAoB,GAE/D,IAAK,IAAIe,EAAI,EAAGA,EAAI7C,EAAIrL,WAAYkO,IAClC,KAA+C,IAAxC9C,EAAElL,QAAQgO,GAAGzC,gBAAgB/G,QAClC0G,EAAEU,iBAAiBlC,KAAKwB,EAAElL,QAAQgO,GAAGzC,gBAAgB4D,OAIzD,KAA2C,IAApCjE,EAAEkE,uBAAuB5K,QAC9B0G,EAAEU,iBAAiBlC,KAAKwB,EAAEkE,uBAAuBD,OAGnD,KAAyC,IAAlCjE,EAAEmE,qBAAqB7K,QAC5B0G,EAAEU,iBAAiBlC,KAAKwB,EAAEmE,qBAAqBF,OAGjD,OAAOjE,ECjBgBgI,CAAehI,EAAGC,IACrC2E,KAAM,cAIVqD,WAAY,EACZC,WAAY,EAEZrC,MAAO,SAAC7F,EAAGC,GAAJ,ODkBF,SAAoBD,EAAGC,GAC5B,IAAIkI,GAAa,EAKjB,OAJyB,IAArBnI,EAAEqE,eAAsC,cAAdpE,EAAImI,QAChCD,GAAa,GAGRA,ECxBYE,CAAWrI,EAAGC,IAEjC8H,MAAO,SAAC/H,EAAGC,KAGXqI,aAAa,G,UCxMf,SAASC,GAAaC,GACpB,IAAc1F,EAAV2F,EAAO,EACT,IAAK3F,EAAI,EAAGA,EAAI0F,EAAOlP,OAAQwJ,IAE7B2F,GAAUA,GAAQ,GAAKA,EADfD,EAAOE,WAAW5F,GAE1B2F,GAAQ,EAEV,OAAOA,EAGX,SAASE,GAAwB3I,EAAGpL,EAAYwR,GAC9C,IAAK,IAAItD,EAAI,EAAGA,EAAIlO,EAAYkO,IAC9B,GAAI9C,EAAElL,QAAQgO,GAAGzC,gBAAgBgG,MAAK,SAAAvO,GAAC,OAAIA,EAAEwI,QAAU8F,KACrD,OAAOtD,EAGX,OAAQ,E,gCCkBK8F,GA/BF,SAAC,GAAD,IAAGvM,EAAH,EAAGA,MAAOsC,EAAV,EAAUA,OAAV,OACX,yBACEtC,MAAOA,GAAS,IAChBsC,OAAQA,GAAU,IAClBkK,MAAM,6BACNC,QAAQ,eAER,0BACEC,EAAE,0DACFC,KAAK,YAEP,0BACEA,KAAK,OACLD,EAAE,kGAEJ,0BACEA,EAAE,mbACFC,KAAK,SAEP,0BACED,EAAE,kEACFC,KAAK,WCpBIC,GAFGrT,IAAMC,gB,iBC4EjB,IAAMqT,GAAb,oDA4BE,WAAY1S,GAAQ,IAAD,8BACjB,cAAMA,IAMRkC,QAAU,WACR,EAAKlC,MAAMkC,QAAQ,EAAKlC,MAAMrB,OAL9B,EAAKgU,iBAAmBvT,IAAMwT,YAC9B,EAAKC,gBAAiB,EAJL,EA5BrB,qDAuCY,IAAD,OACDC,EAAa,CAAC,aAChB/U,KAAKiC,MAAMgB,WACb8R,EAAW9K,KAAKjK,KAAKiC,MAAMgB,WAG7B,IAAI+R,EAAY,GAShB,OAPIhV,KAAKiC,MAAMgT,SACbD,EAAY,CACVE,SAAU,WACVC,OAAQnV,KAAKiC,MAAMmT,eAKrB,6BACE,kBAAC,KAAD,CACErS,GAAI/C,KAAK+C,GACTsI,KAAMrL,KAAKiC,MAAMoT,SACjBzU,KAAMZ,KAAKiC,MAAMrB,MAlIpB,SAAsBqB,EAAO8S,EAAYC,EAAW7Q,GAEzD,OAAO,YAA2B,IAAxBmR,EAAuB,EAAvBA,SAAUjJ,EAAa,EAAbA,OAClB,OACE,uCACEpJ,UAAW8R,EAAWQ,KAAK,KAC3BC,MAAK,uCACAvT,EAAMuT,OACNR,GAFA,IAGHS,QAASH,EAAW,EAAI,EACxBI,cAAeJ,EAAW,OAAS,QAErCnR,QAASA,GACLkI,GAEHpK,EAAM0T,SAAW1T,EAAMqN,MAAQrN,EAAMsN,OAqHnCqG,CAAa5V,KAAKiC,MAAO8S,EAAYC,EAAWhV,KAAKmE,UAGxD,kBAAC,KAAD,CAAe0R,IAAK7V,KAAK+C,IAlH1B,SACLd,EACA8S,EACAe,EACAC,GAGA,OAAO,YAA4D,IAAzD1H,EAAwD,EAAxDA,EAAG2H,EAAqD,EAArDA,EAAGlB,EAAkD,EAAlDA,eAAgBmB,EAAkC,EAAlCA,4BACxB/T,EAAO,aAAO6S,GAEhBmB,EAAUjU,EAAMsN,KAkBpB,OAhBAwG,EAAuBjB,GAGnB7S,EAAM0T,WAERO,EAAUjU,EAAMqN,OAGkB,OAAhC2G,IACEnB,EACF5S,EAAQ+H,KAAK,UAEb/H,EAAQ+H,KAAK,WAKf,yBACEhH,UAAWf,EAAQqT,KAAK,KACxBO,IAAKA,EACLN,MAAO,CACLW,OAAQ,UACRzO,YAAa,EACbgO,cAAe,OACfR,SAAU,QACVC,OAAQ,IACRiB,UAAW,mBACXC,KAAMhI,EAAI,GACViI,IAAKN,EAAI,KAGVE,IAwEEK,CACCvW,KAAKiC,MACL8S,EACA/U,KAAK4U,kBACL,SAAA4B,GAAC,OAAK,EAAK1B,eAAiB0B,WArExC,GAA8BnV,IAAMoV,WAAvB9B,GAgBJ+B,aAAe,CACpBvS,QAAS,aACTwR,UAAU,EACVN,SAAU,YACV/F,MAAO,yBAAKrM,UAAU,oBAAf,QACPsM,KACE,yBAAKtM,UAAU,mBACb,kBAAC,GAAD,CAAM6E,MAAM,SAsDpB,IAAM6O,GAAO,SAAA1U,GAAK,OAChB,kBAAC,GAAU2U,SAAX,MACG,SAAAC,GAAO,OAAI,kBAAC,GAAD,iBAAc5U,EAAd,CAAqB4U,QAASA,SC/J9C,SAASC,GAAT,GAAiH,IAAjF3K,EAAgF,EAAhFA,iBAAiBwD,EAA+D,EAA/DA,uBAAuBC,EAAwC,EAAxCA,qBAAsBuB,EAAkB,EAAlBA,gBAAkB,EAC1EhP,oBAAS,GADiE,mBACvG4U,EADuG,KAC3FC,EAD2F,OAGhE7U,mBAAS,CACrD8U,QAAS,EACTC,QAAS,IALmG,mBAGvGpL,EAHuG,KAGtFqL,EAHsF,KAOxGC,EAAYjO,qBAAWuL,IAWzB2C,EAAgB,GAGpB1H,EAAuB5F,SAAQ,SAAAuN,GAC7B,IAAMC,EAAQ,yBAAKC,IAAKF,EAAY/H,KAAMkI,IAAI,mBAC9CJ,EAAcpN,KACZ,kBAAC,GAAD,CACEsF,KAAMgI,EACN5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,OACVuF,IAAKwL,GAAasD,EAAY3M,MAC9BkM,QAASO,QAIfC,EAAcpN,KAAK,8BAGnB2F,EAAqB7F,SAAQ,SAAAuN,GAC3B,IACMC,EAAQ,yBAAKC,IAAKF,EAAYhI,MAAOmI,IAAKH,EAAY3M,KAAK,gBACjE0M,EAAcpN,KACZ,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,OACVuF,IAAK8O,EAAY3M,KACjBkM,QAASO,QAKfC,EAAcpN,KAAK,8BAGnB,IAvD8G,eAuDrGc,GACP,IAAMwM,EAAQ,yBAAKC,IAAKrL,EAAiBpB,GAAOuE,MAAOmI,IAAKtL,EAAiBpB,GAAOJ,KAAK,gBACzF0M,EAAcpN,KACZ,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM2D,EAAiBpB,GAAOJ,KAC9BxG,QAAS,WAAOgT,EAAmB,CAACF,OAAQlM,EAAOmM,QAAS,IAAIvL,QAAQC,IAAI,CAACb,WAC7E8L,QAASO,MAVNrM,EAAQ,EAAGA,EAAQoB,EAAiBpH,OAAQgG,IAAU,EAAtDA,GAeT,OACE,6BACE,kBAAC7G,EAAA,EAAD,CAAQwB,QAAQ,WAAWtB,MAAM,UAAUD,QA/DvB,WACtB6S,GAAc,KA8DZ,oBAGA,kBAACtU,EAAA,EAAD,CAAQC,KAAMoU,EACZY,sBAAsB,EACtBC,sBAAsB,EACtBzU,WAAW,EACXN,kBAAgB,qBAChB,kBAACC,EAAA,EAAD,CAAaC,GAAG,qBAAhB,oBACA,kBAACC,EAAA,EAAD,KACGqU,GAEH,kBAACpT,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,QAxEI,WAClB6S,GAAc,GACd7F,EAAgBrF,EAAgBmL,OAAQnL,EAAgBoL,SAsEpB9S,MAAM,WAApC,aASV,SAASyT,GAAT,GAEE,IAF6D,IAAzCxX,EAAwC,EAAxCA,WAAYyX,EAA4B,EAA5BA,WAAYjM,EAAgB,EAAhBA,cACxCtL,EAAU,GAD8C,WAEnDwK,GACP,GAAIA,GAASc,EAAe,CAC1B,IAAM0L,EAAQ,yBAAKC,IAAK,GAAIC,IAAK,mBACjClX,EAAQ0J,KACN,kBAAC,GAAD,CACEsF,KAAMgI,EACN5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,OACVuF,IAAK,UAAUuC,SAGd,CACL,IAAMwM,EAAQ,yBAAKC,IAAK,GAAIC,IAAK,UAAU1M,IAC3CxK,EAAQ0J,KACN,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM,UAAUuC,EAChB5G,QAAS,WAAO2T,EAAW,CAACpK,WAAW,EAAMC,gBAAiB5C,EAAOkD,iBAAkB,WArBtFlD,EAAQ,EAAGA,EAAQ1K,EAAY0K,IAAU,EAAzCA,GA2BT,OACExK,EAIJ,SAASwX,GAAT,GAgBE,IAhBqC,IAApBhK,EAAmB,EAAnBA,KAAM+J,EAAa,EAAbA,WACnBE,EAAY,GADoB,EAEM7V,mBAAS,IAFf,mBAE7B8V,EAF6B,KAEdC,EAFc,gBAgB3BnN,GACP,IAAMwM,EAAQ,yBAAKC,IAAKzJ,EAAKhD,GAAOuE,MAAOmI,IAAK1J,EAAKhD,GAAOJ,KAAK,gBACjEqN,EAAU/N,KACR,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM,UAAUuC,EAChB5G,QAAS,kBArBK,SAAC4G,GAEnB,IAAIoN,EAAcF,EAAcG,WAAU,SAAAxH,GAAO,OAAIA,IAAY7F,KAE/DmN,GADmB,IAAjBC,EACe,GAAD,oBAAKF,EAAcI,MAAM,EAAEF,IAA3B,CAAyCF,EAAcI,MAAM,EAAEF,KAE9D,GAAD,oBAAKF,GAAL,CAAoBlN,KAGtC+M,EAAW,CAACpK,WAAW,EAAOC,iBAAkB,EAAGM,iBAAkBgK,IAYlDK,CAAYvN,QATxBA,EAAQ,EAAGA,EAAQgD,EAAKhJ,OAAQgG,IAAU,EAA1CA,GAcT,OACEiN,EAIJ,SAASO,GAAT,GAAiK,IAA/HC,EAA8H,EAA9HA,gBAAiBrL,EAA6G,EAA7GA,kBAAmB9M,EAA0F,EAA1FA,WAAY0N,EAA8E,EAA9EA,KAAMlC,EAAwE,EAAxEA,cAAe4M,EAAyD,EAAzDA,gBAAiBC,EAAwC,EAAxCA,mBAAoBzL,EAAoB,EAApBA,kBAAoB,EAC1H9K,oBAAS,GADiH,mBACvJ4U,EADuJ,KAC3IC,EAD2I,KAExJI,EAAYjO,qBAAWuL,IAFiI,EAGhIvS,qBAHgI,mBAGvJzE,EAHuJ,KAG9Ioa,EAH8I,OAI9H3V,oBAAS,GAJqH,mBAIvJwW,EAJuJ,KAI7IC,EAJ6I,KAMxJvJ,EAAU,qJACVF,EAAO,CACX,CAACpD,MAAO,EAAGpB,KAAM,UAAW2E,MAAO,uKAAwKC,KAAMF,GACjN,CAACtD,MAAO,EAAGpB,KAAM,QAAS2E,MAAO,sKAAuKC,KAAMF,GAC9M,CAACtD,MAAO,EAAGpB,KAAM,WAAY2E,MAAO,oKAAqKC,KAAMF,GAC/M,CAACtD,MAAO,EAAGpB,KAAM,OAAQ2E,MAAO,mKAAoKC,KAAMF,GAC1M,CAACtD,MAAO,EAAGpB,KAAM,SAAU2E,MAAO,sKAAuKC,KAAMF,GAC/M,CAACtD,MAAO,EAAGpB,KAAM,WAAY2E,MAAO,wKAAyKC,KAAMF,GACnN,CAACtD,MAAO,EAAGpB,KAAM,YAAa2E,MAAO,0KAA2KC,KAAMF,GACtN,CAACtD,MAAO,EAAGpB,KAAM,UAAW2E,MAAO,wKAAyKC,KAAMF,IAiBhNwJ,EAAgB,GAEpB,OAAQL,GACN,KAAK,EACH7M,QAAQC,IAAI,WACV,IAFJ,eAEab,GACP,IAAMwM,EAAQ,yBAAKC,IAAKrI,EAAKpE,GAAOuE,MAAOmI,IAAKtI,EAAKpE,GAAOJ,KAAK,gBACjEkO,EAAc5O,KACZ,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM2G,EAAKpE,GAAOJ,KAClBxG,QAAS,kBAAM2T,EAAW/M,IAC1B8L,QAASO,MAVNrM,EAAQ,EAAGA,EAAQoE,EAAKpK,OAAQgG,IAAU,EAA1CA,GAcT,MACF,KAAK,EACH,IADF,eACWA,GACP,GAAIA,IAAUoC,EAAmB,CAC/B,IAAMoK,EAAQ,yBAAKC,IAAKrI,EAAKpE,GAAOwE,KAAMkI,IAAK,mBAC/CoB,EAAc5O,KACZ,kBAAC,GAAD,CACEsF,KAAMgI,EACN5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,OACVuF,IAAKwL,GAAa7E,EAAKpE,GAAOJ,MAC9BkM,QAASO,SAGR,CACL,IAAMG,EAAQ,yBAAKC,IAAKrI,EAAKpE,GAAOuE,MAAOmI,IAAKtI,EAAKpE,GAAOJ,KAAK,gBACjEkO,EAAc5O,KACZ,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM2G,EAAKpE,GAAOJ,KAClBxG,QAAS,WAAO2T,EAAW/M,IAC3B8L,QAASO,OAvBRrM,EAAQ,EAAGA,EAAQoE,EAAKpK,OAAQgG,IAAU,EAA1CA,GA4BT,MACF,KAAK,EACH8N,EAAc5O,KACZ,6BACE,kBAAC6O,GAAA,EAAD,CACE1V,MAAM,WACN2V,QAASJ,EACTrV,SA5DS,SAACe,GACpBuU,EAAYvU,EAAMb,OAAOuV,UA4DfpO,KAAK,cACLvG,MAAM,YAENuU,EACA,kBAACd,GAAD,CAAaxX,WAAYA,EAAYyX,WAAYA,EAAYjM,cAAeA,IAC5E,kBAACkM,GAAD,CAAUhK,KAAMA,EAAM+J,WAAYA,MAO9C,OACE,6BACIU,EAAkB,EAChB,6BACE,kBAACtU,EAAA,EAAD,CAAQwB,QAAQ,WAAWtB,MAAM,UAAU4U,SAAUP,EAAiBtU,QAAU,kBAAM8I,GAAmB,KAAzG,wBAIF,6BACE,kBAAC/I,EAAA,EAAD,CAAQwB,QAAQ,WAAWtB,MAAM,UAAU4U,SAAUP,EAAiBtU,QA5FxD,WACtB6S,GAAc,KA2FN,qBAGA,kBAACtU,EAAA,EAAD,CAAQC,KAAMoU,EACZ5T,WAAW,EACXN,kBAAgB,qBAChB,kBAACC,EAAA,EAAD,CAAaC,GAAG,qBAAhB,aACA,kBAACC,EAAA,EAAD,KACG6V,GAEH,kBAAC5U,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,QAnGF,WAClB6S,GAAc,GACd0B,GAAmB,GACnBzL,EAAkBvP,IAgGwB0G,MAAM,WAApC,iBAWhB,SAAS6U,GAAT,GAA8J,IAAnIlM,EAAkI,EAAlIA,YAAauB,EAAqH,EAArHA,gBAAiB4K,EAAoG,EAApGA,eAAgBC,EAAoF,EAApFA,oBAAqBC,EAA+D,EAA/DA,cAAeC,EAAgD,EAAhDA,iBAAmBhH,EAA6B,EAA7BA,SAAUE,EAAmB,EAAnBA,iBAAmB,EACvHpQ,oBAAS,GAD8G,mBACpJ4U,EADoJ,KACxIC,EADwI,KAErJI,EAAYjO,qBAAWuL,IAF8H,EAG/HvS,mBAAS,IAHsH,mBAGpJ3E,EAHoJ,KAG5I8b,EAH4I,KAyBvJC,EAAoB,GAGxB,GAAIxM,EAAY,EACd,GAAmB,IAAhBA,EAAmB,CACpB,IAAMwK,EAAQ,yBAAKC,IAAK,oJAAqJC,IAAK,kBAClL8B,EAAkBtP,KAChB,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM,WACNrE,QAAS,WAAOmV,EAAU,aAC1BzC,QAASO,SAGR,CACL,IAAMG,EAAQ,yBAAKC,IAAK,oJAAqJC,IAAK,kBAClL8B,EAAkBtP,KAChB,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM,YACNrE,QAAS,WAAOmV,EAAU,aAC1BzC,QAASO,KAOjB,GAAI9I,EAAgBvJ,OAAS,EAAG,CAC9B,GAA8B,IAA3BuJ,EAAgBvJ,OAAc,CAC/B,IAAMwS,EAAQ,yBAAKC,IAAKlJ,EAAgB,GAAGgB,MAAOmI,IAAKnJ,EAAgB,GAAG3D,KAAK,gBAC/E4O,EAAkBtP,KAChB,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM8F,EAAgB,GAAG3D,KACzBxG,QAAS,WAAOmV,EAAU,kBAC1BzC,QAASO,KAIf,IAAMG,EAAQ,yBAAKC,IAAKlJ,EAAgB,GAAGgB,MAAOmI,IAAKnJ,EAAgB,GAAG3D,KAAK,gBAC/E4O,EAAkBtP,KAChB,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAM8F,EAAgB,GAAG3D,KACzBxG,QAAS,WAAOmV,EAAU,kBAC1BzC,QAASO,KAKf,OACE,6BACE,kBAAClT,EAAA,EAAD,CAAQwB,QAAQ,WAAWtB,MAAM,UAAU4U,SAAUI,EAAejV,QArFhD,WACtB6S,GAAc,KAoFZ,eAGA,kBAACtU,EAAA,EAAD,CAAQC,KAAMoU,EACZ5T,WAAW,EACXN,kBAAgB,qBAChB,kBAACC,EAAA,EAAD,CAAaC,GAAG,qBAAhB,uBACA,kBAACC,EAAA,EAAD,KACGuW,GAEH,kBAACtV,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,QA5FI,WAClB6S,GAAc,GACdmC,GAAoB,GACpBD,GAAe,GACfG,GAAiB,GAEF,aAAX7b,EACF6U,IACoB,kBAAX7U,EACT+U,GAAiB,GACE,kBAAX/U,GACR+U,GAAiB,IAiFiBnO,MAAM,WAApC,aASV,SAASoV,GAAT,GAAwG,EAA3EvX,MAgC3B,IAhCuG,IAArE8L,EAAoE,EAApEA,KAAMf,EAA8D,EAA9DA,MAAOyM,EAAuD,EAAvDA,iBAAkBN,EAAqC,EAArCA,oBAAqBxG,EAAgB,EAAhBA,cAAgB,EAExDxQ,oBAAU,GAF8C,mBAE/FuX,EAF+F,KAE9EC,EAF8E,OAGlExX,oBAAS,GAHyD,mBAG/F4U,EAH+F,KAGnFC,EAHmF,KAIhGI,EAAYjO,qBAAWuL,IAEvBkF,EAAkB,WACtB5C,GAAc,IAuBZ6C,EAAe,GA9BmF,WAgC7F9O,GACP,IAAMwM,EAAQ,yBAAKC,IAAKzJ,EAAKhD,GAAOuE,MAAOmI,IAAK1J,EAAKhD,GAAOJ,KAAK,gBACjEkP,EAAa5P,KACX,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAMuF,EAAKhD,GAAOJ,KAAK,cACvBxG,QAAS,kBA/BK,SAAC4G,EAAOK,EAAM4B,GAE7B5B,GAAQ4B,EACT2M,EAAmB5O,GAEnBY,QAAQC,IAAI,oDA0BK0M,CAAYvN,EAAOgD,EAAKhD,GAAOK,KAAM4B,IACpD6J,QAASO,MAVNrM,EAAQ,EAAGA,EAAQgD,EAAKhJ,OAAQgG,IAAU,EAA1CA,GAeT,OACE,6BACE,kBAAC7G,EAAA,EAAD,CAAQwB,QAAQ,WAAWtB,MAAM,UAAU4U,SAAUS,EAAkBtV,QAAS,kBAAMyV,IAAtF,iBAGA,kBAAClX,EAAA,EAAD,CAAQC,KAAMoU,EACZ5T,WAAW,EACXN,kBAAgB,qBAChB,kBAACC,EAAA,EAAD,CAAaC,GAAG,qBAAhB,kBACA,kBAACC,EAAA,EAAD,KACG6W,GAEH,kBAAC5V,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,QAAS,kBAnCvBgV,GAAoB,GACpBnC,GAAc,QACdrE,EAAc+G,IAiCmCtV,MAAM,WAAjD,YASV,SAAS0V,GAAT,GAYE,IAZwD,IAArC/L,EAAoC,EAApCA,KAAMf,EAA8B,EAA9BA,MAAO+M,EAAuB,EAAvBA,WAAYxa,EAAW,EAAXA,SACxCyY,EAAY,GADuC,WAY9CjN,GACP,GAAIgD,EAAKhD,GAAOK,KAAO4B,EAAO,CAC5B,IAAMuK,EAAQ,yBAAKC,IAAKzJ,EAAKhD,GAAOuE,MAAOmI,IAAK1J,EAAKhD,GAAOJ,KAAK,gBACjEqN,EAAU/N,KACR,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAMuF,EAAKhD,GAAOJ,KAClBxG,QAAS,WAbfwH,QAAQC,IAAI,qCAgBL,CACL,IAAM2L,EAAQ,yBAAKC,IAAKzJ,EAAKhD,GAAOuE,MAAOmI,IAAK1J,EAAKhD,GAAOJ,KAAK,gBACjEqN,EAAU/N,KACR,kBAAC,GAAD,CACEqF,MAAOiI,EACP5B,UAAU,EACV+B,UAAU,EACVzU,UAAU,YACVuF,IAAMuF,EAAKhD,GAAOJ,KAClBxG,QAAS,kBA/BG,SAAC4G,GACnBgP,EAAW,CAAC9O,OAAQ1L,EAAU6T,kBAAmBrI,IA8B5BuN,CAAYvN,SAtB1BA,EAAQ,EAAGA,EAAQgD,EAAKhJ,OAAQgG,IAAU,EAA1CA,GA4BT,OACEiN,EAIJ,SAASgC,GAAT,GAqCE,IArC+J,IAAlIC,EAAiI,EAAjIA,MAAOC,EAA0H,EAA1HA,eAAgBlN,EAA0G,EAA1GA,MAAOiG,EAAmG,EAAnGA,aAAcjH,EAAqF,EAArFA,QAASkN,EAA4E,EAA5EA,eAAgBC,EAA4D,EAA5DA,oBAAqBE,EAAuC,EAAvCA,iBAAkBX,EAAqB,EAArBA,mBAAqB,EAC1HvW,oBAAS,GADiH,mBACvJgY,EADuJ,KAC3IC,EAD2I,OAE1HjY,oBAAS,GAFiH,mBAEvJ4U,EAFuJ,KAE3IC,EAF2I,OAGhI7U,mBAAS,CAAC8I,QAAS,EAAGmI,mBAAoB,IAHsF,mBAGvJiH,EAHuJ,KAG9IN,EAH8I,OAI9H5X,mBAAS,GAJqH,mBAIvJ5C,EAJuJ,KAI7I+a,EAJ6I,KA+BxJC,GA1BYpR,qBAAWuL,IA0BR,SAACrQ,GACpBiW,EAAYjW,EAAMb,OAAOH,SAGvBmX,EAAY,GAEPzP,EAAQ,EAAGA,EAAQkP,EAAMlV,OAAQgG,IACrCA,IAAUmP,GACXM,EAAUvQ,KACR,kBAAClG,EAAA,EAAD,CAAUV,MAAO0H,GAAjB,UAAgCA,IAKtC,IAAI0P,EAAuB,GAkB3B,OAhBAA,EAAqBxQ,KACnB,6BACE,kBAACrG,EAAA,EAAD,CAAYb,GAAG,mBAAf,cACA,kBAACc,EAAA,EAAD,CACIC,QAAQ,kBACRf,GAAG,yBACHM,MAAO9D,EACP+D,SAAU,kBAAMiX,IAEfC,GAEH,kBAACV,GAAD,CAAY/L,KAAMkM,EAAM1a,GAAWyN,MAAOA,EAAO+M,WAAYA,EAAYxa,SAAUA,MAMvF,6BACE,kBAAC2E,EAAA,EAAD,CAAQwB,QAAQ,WAAWtB,MAAM,UAAU4U,SAAUmB,EAAYhW,QA1D7C,WACtB6S,GAAc,KAyDZ,WAGA,kBAACtU,EAAA,EAAD,CAAQC,KAAMoU,EACZ5T,WAAW,EACXN,kBAAgB,qBAChB,kBAACC,EAAA,EAAD,CAAaC,GAAG,qBAAhB,mBACA,kBAACC,EAAA,EAAD,KACGyX,GAEH,kBAACxW,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQC,QAjEI,WAClBiW,GAAc,GACdpD,GAAc,GACdkC,GAAe,GACfC,GAAoB,GACpBE,GAAiB,GACjBX,GAAmB,GACnBzF,EAAaoH,IA0DuBjW,MAAM,WAApC,WAGA,kBAACF,EAAA,EAAD,CAAQC,QA1DO,WACrBiW,GAAc,GACdpD,GAAc,GACdkC,GAAe,GACfC,GAAoB,GACpBE,GAAiB,GACjBX,GAAmB,GACnB1M,KAmDuC5H,MAAM,aAAvC,e,sDCjlBJ7C,GAAYC,YAAW,CAC3BmE,KAAM,CACJmC,MAAO,IACPR,QAAS,EACT,eAAgB,CACdmB,cAAe,mBAgDNiS,OA3Cf,SAAoBzY,GAClB,IAAMC,EAAUX,KAEhBoK,QAAQC,IAAI,eACZD,QAAQC,IAAI3J,GAGZ,IADA,IAAI0Y,EAAc,GACT5P,EAAQ,EAAGA,EAAQ9I,EAAM0Y,YAAY5V,OAAQgG,IACpD4P,EAAY1Q,KAAKhI,EAAM0Y,YAAY5P,GAAOJ,MAG5C,OACE,kBAAC,KAAD,CACE1H,UAAWf,EAAQyD,KACnB6P,MAAO,CAACnN,OAAQ,gBAAiBd,gBAAiB,0BAElD,kBAACW,EAAA,EAAD,CAAYxC,QAAQ,aAAazD,EAAMkI,UACvC,kBAACjC,EAAA,EAAD,CAAYxC,QAAQ,aACU,IAA3BzD,EAAM2Y,UAAU7V,OAAe9C,EAAM2Y,UAAU,GAAGjQ,KAAO,OAE5D,yBACE6K,MAAO,CACLqF,KAAM,UACNjZ,QAAS,OACTqE,eAAgB,iBAGlB,kBAACiC,EAAA,EAAD,KACE,kBAAC,KAAD,MADF,IACsBjG,EAAM+K,OAE5B,kBAAC9E,EAAA,EAAD,KACE,kBAAC,KAAD,MADF,IACkBjG,EAAM6Y,aAExB,kBAACC,GAAA,EAAD,CAASC,MAA6B,GAAtBL,EAAY5V,OAAc4V,EAAc,GAAIM,UAAU,UACpE,kBAAC/S,EAAA,EAAD,KACE,kBAAC,KAAD,MADF,IACcjG,EAAM0Y,YAAY5V,YC3C1C,SAASmW,GAAT,GAA+B,IAATjZ,EAAQ,EAARA,MAAQ,EACUE,oBAAS,GADnB,mBACrBgZ,EADqB,KACRjC,EADQ,OAEoB/W,oBAAS,GAF7B,mBAErBsX,EAFqB,KAEHN,EAFG,OAGchX,oBAAS,GAHvB,mBAGrBiX,EAHqB,KAGNC,EAHM,OAIkBlX,oBAAS,GAJ3B,mBAIrBsW,EAJqB,KAIJC,EAJI,KAa5B,OACE,6BACE,kBAACH,GAAD,CAEEC,gBACEvW,EAAMwJ,EAAElL,QAAQ0B,EAAMyJ,IAAIG,eAAeC,gBAAgB,GAAGC,MAE9DoB,kBAAmBlL,EAAMwJ,EAAE0B,kBAC3B9M,WAAY4B,EAAMyJ,IAAIrL,WACtBwL,cAAe5J,EAAMyJ,IAAIG,cACzBkC,KAAM9L,EAAMwJ,EAAEoC,OAAO5L,EAAMyJ,IAAIG,eAAekC,KAC9C0K,gBAAiBA,EACjBC,mBAAoBA,EACpBzL,kBAAmBhL,EAAMiP,MAAMjE,oBAEjC,6BACA,kBAACgM,GAAD,CACElM,YAAa9K,EAAMwJ,EAAEsB,YACrBuB,gBAAiBrM,EAAMwJ,EAAE6C,gBACzB4K,eAAgBA,EAChBC,oBAAqBA,EACrBC,cAAeA,EACfC,iBAAkBA,EAClBhH,SAAUpQ,EAAMiP,MAAMmB,SACtBE,iBAAkBtQ,EAAMiP,MAAMqB,mBAEhC,6BACA,kBAACiH,GAAD,CACEvX,MAAOA,EACP8L,KAAM9L,EAAMwJ,EAAEoC,OAAO5L,EAAMyJ,IAAIG,eAAekC,KAC9Cf,MAAO/K,EAAMwJ,EAAElL,QAAQ0B,EAAMyJ,IAAIG,eAAemB,MAChDyM,iBAAkBA,EAClBN,oBAAqBA,EACrBxG,cAAe1Q,EAAMiP,MAAMyB,gBAE7B,6BACuE,IAAtE1Q,EAAMwJ,EAAElL,QAAQ0B,EAAMyJ,IAAIG,eAAeC,gBAAgB,GAAGC,MAC3D,kBAACiO,GAAD,CACEC,MAAOhY,EAAMwJ,EAAEoC,OACfqM,eAAgB9F,GACdnS,EAAMwJ,EAAElL,QACR0B,EAAMyJ,IAAIrL,WACV,GAEF2M,MAAO/K,EAAMwJ,EAAElL,QAAQ0B,EAAMyJ,IAAIG,eAAemB,MAChDiG,aAAchR,EAAMiP,MAAM+B,aAC1BjH,QAAS/J,EAAMiP,MAAMlF,QACrBkN,eAAgBA,EAChBC,oBAAqBA,EACrBE,iBAAkBA,EAClBX,mBAAoBA,IAGtB,8BAEF,6BACA,kBAACxU,EAAA,EAAD,CACEwB,QAAQ,WACRtB,MAAM,UACND,QAAS,WACPlC,EAAMiP,MAAM6B,iBACZmG,GAAe,GACfC,GAAoB,GACpBE,GAAiB,GACjBX,GAAmB,IAErBM,SAAUmC,GAVZ,aAsJSC,OAxHf,SAAenZ,GAIb0J,QAAQC,IAAI3J,GAGZ,IADA,IAAIoZ,EAAc,GACTtQ,EAAQ,EAAGA,EAAQrG,OAAOC,KAAK1C,EAAMwJ,EAAElL,SAASwE,OAAQgG,IAC3D9I,EAAM1C,UAAYwL,GACpBsQ,EAAYpR,KACV,kBAAC,GAAD,CACEzB,IAAKuC,EACLZ,SAAQ,kBAAaY,GACrB6P,UACE3Y,EAAMyJ,IAAIG,eAAiBd,EACvB9I,EAAMwJ,EAAElL,QAAQwK,GAAOe,gBACvB2E,MAAM,GAEZzD,MAAO/K,EAAMwJ,EAAElL,QAAQwK,GAAOiC,MAC9B8N,YAAa7Y,EAAMwJ,EAAElL,QAAQwK,GAAO0E,UACpCkL,YAAa1Y,EAAMwJ,EAAElL,QAAQwK,GAAO6B,aAO5C,IADA,IAAI0O,EAAoB,GACfvQ,EAAQ,EAAGA,EAAQ9I,EAAMwJ,EAAEoC,OAAO5L,EAAM1C,UAAUwO,KAAKhJ,OAAQgG,IAAS,CAC/EY,QAAQC,IAAI,SAAWb,GACvB,IAAMwM,EACJ,yBACEC,IAAKvV,EAAMwJ,EAAEoC,OAAO5L,EAAM1C,UAAUwO,KAAKhD,GAAOO,SAChDmM,IAAKxV,EAAMwJ,EAAEoC,OAAO5L,EAAM1C,UAAUwO,KAAKhD,GAAOJ,KAAO,cACvD7C,MAAM,QACNsC,OAAO,UAGXkR,EAAkBrR,KAChB,kBAAC,GAAD,CACE0L,UAAU,EACVrG,MAAOiI,EACPG,UAAU,EACVzU,UAAU,YACVuF,IAAKuC,KAMT,ONjKJ,SAAkBc,EAAetM,GAC/B,IAAIgc,GAAW,EACX1P,IAAkBtM,IACpBgc,GAAW,GM6JTC,CAASvZ,EAAMyJ,IAAIG,cAAe5J,EAAMyJ,IAAInM,UACtB,cAApB0C,EAAMyJ,IAAImI,MAEV,yBAAK2B,MAAO,CAAC5T,QAAS,SACpB,yBAAK4T,MAAO,CAACqF,KAAM,YAAaQ,GAEhC,kBAACvE,GAAD,CACE3K,iBAAkBlK,EAAMwJ,EAAEU,iBAC1BwD,uBAAwB1N,EAAMwJ,EAAEkE,uBAChCC,qBAAsB3N,EAAMwJ,EAAEmE,qBAC9BuB,gBAAiBlP,EAAMiP,MAAMC,kBAE/B,yBACEqE,MAAO,CACL1N,MAAO,QACPlG,QAAS,OACTsT,SAAU,QACVmB,KAAM,MACNoF,OAAQ,OACRC,UAAW,qBAGZJ,KAIErZ,EAAMyJ,IAAImI,MAEjB,yBAAK2B,MAAO,CAAC5T,QAAS,SACpB,yBAAK4T,MAAO,CAACqF,KAAM,YAAaQ,GAChC,kBAACH,GAAD,CAAajZ,MAAOA,IACpB,yBACEuT,MAAO,CACL1N,MAAO,QACPlG,QAAS,OACTsT,SAAU,QACVmB,KAAM,MACNoF,OAAQ,OACRC,UAAW,qBAGZJ,MC5LEK,GAPCC,aAAO,CACrBC,KAAM9L,GACN+L,MAAOV,GACPW,YAAaC,aAAS,CAACC,OAAQrc,IAC/Bsc,OAAO,ICJT,SAASC,KAAa,IACbpZ,EAAMwH,cAANxH,GACDlE,EAAmBkK,yBAAc,SAACC,GAAD,OAAOA,EAAEnK,oBAEhD,OACE,kBAAC,GAAD,CACEgC,QAASkC,EACTxD,SAAU6c,OAAOvd,EAAiBU,UAClC8c,YAAaxd,EAAiBS,aAKrB,SAASgd,KAAS,IAAD,EACUna,oBAAS,GADnB,mBACvBoa,EADuB,KACRC,EADQ,KAG9B,OAAOD,EACL,kBAACJ,GAAD,MAEA,kBAAC9R,GAAD,CAAYC,UAAW,kBAAMkS,GAAe,M,kCCpB1CC,I,qBAAS,CACbC,OAAQC,0CACRC,WAAYD,gCACZE,YAAaF,uCACbG,UAAWH,gBACXI,cAAeJ,4BACfK,kBAAmBL,cACnBM,MAAON,2CACPO,cAAeP,iBAqCJQ,GACK,sBADLA,GAEK,sBAGHC,GAtCb,aAAe,IAAD,gCAQdC,+BAAiC,SAACC,EAAOC,GAAR,OAC/B,EAAKC,KAAKH,+BAA+BC,EAAOC,IATpC,KAWdE,2BAA6B,SAACH,EAAOC,GAAR,OAC3B,EAAKC,KAAKC,2BAA2BH,EAAOC,IAZhC,KAcdG,QAAU,kBAAM,EAAKF,KAAKE,WAdZ,KAgBdnU,iBAhBc,sBAgBK,4BAAAzL,EAAA,sEACM,EAAK4L,UACzBC,WAAW,SACXK,IAAI,EAAKwT,KAAKG,YAAYC,KAC1B7c,MAJc,cACX8c,EADW,yBAKVA,EAASjd,QALC,2CAhBL,KAwBdkd,cAAgB,SAACC,GACf,OAAO,EAAKrU,UACTC,WAAW,SACXK,IAAI,EAAKwT,KAAKG,YAAYC,KAC1BI,OAAOD,GACPE,OAAM,SAACxa,GAAD,OAAWkI,QAAQlI,MAAM,UAAWA,OA5B7Cya,KAAIC,cAAc1B,IAElBzc,KAAKwd,KAAOU,KAAIV,OAChBxd,KAAKoe,iBAAmB,IAAIF,KAAIV,KAAKa,qBACrCre,KAAK0J,UAAYwU,KAAIxU,a,oGCCnBnI,GAAYC,YAAW,CAC3BmE,KAAM,CACJmC,MAAO,QAETnG,KAAM,CACJC,QAAS,OACTC,cAAe,UAEjBC,MAAO,CACLwc,UAAW,IAEbtD,MAAO,CACLjZ,aAAc,IAEhBwc,OAAQ,CACND,UAAW,GACXxW,MAAO,OACPoN,SAAU,YAEZsJ,eAAgB,CACdtJ,SAAU,WACVoB,IAAK,MACLD,KAAM,MACNiI,WAAY,GACZG,YAAa,IAEfC,OAAQ,CACN5W,MAAO,OACP6W,UAAW,IAEbC,gBAAiB,CACf9W,MAAO,OACPlG,QAAS,OACTqE,eAAgB,UAElB4Y,OAAQ,CACNC,OAAQ,iBACRtX,aAAc,MACd5F,QAAS,cACTqE,eAAgB,SAChBO,WAAY,SACZ4D,OAAQ,GACRtC,MAAO,GACPqO,OAAQ,aA8JG4I,OA1Jf,WACE,IAAM7V,EAAWC,qBAAW/H,GACtB4d,EAAUC,cAFI,EAGoB9c,oBAAS,GAH7B,mBAGb+c,EAHa,KAGCC,EAHD,OAIQhd,mBAAS,CACnCmb,MAAO,GACPC,SAAU,KANQ,mBAIbjb,EAJa,KAILC,EAJK,OAQkBJ,mBAAS,CAC7Cmb,MAAO,KACPC,SAAU,OAVQ,mBAQb/a,EARa,KAQAC,EARA,KAadP,EAAUX,KAbI,EAcUY,oBAAS,GAdnB,mBAcbid,EAda,KAcJC,EAdI,KAqFpB,OACE,yBAAKpc,UAAWf,EAAQyD,MACtB,kBAACuC,EAAA,EAAD,CAAYjF,UAAWf,EAAQ8Y,MAAOtV,QAAQ,KAAKuB,MAAM,SAASkB,cAAY,GAA9E,WAGA,yBAAKlF,UAAWf,EAAQ0c,iBACtB,4BAAQza,QA3Ed,WACE+E,EAASsU,KACN8B,gBAAgBpW,EAASkV,kBACzBnd,MAAK,SAAC6I,GAEL,IAAMiU,EAAOjU,EAAOiU,KAEpB,OAAO7U,EAASQ,UAAUC,WAAW,SAASK,IAAI+T,EAAKH,KAAKxY,IAAI,CAC9D+E,SAAU4T,EAAKwB,YACfjC,MAAOS,EAAKT,WAGfrc,MAAK,WACJ+d,EAAQQ,QCjGI,QDmGbvB,OAAM,gBA4D6Bhb,UAAWf,EAAQ2c,QACnD,kBAAC,KAAD,CAAiBY,KAAMC,SAG3B,0BAAMC,YAAU,EAAC1c,UAAWf,EAAQP,KAAMqD,SA3D9C,SAAkBX,GAChBA,EAAMub,iBAEN,IAAItb,EAAS,CACXgZ,MAAO,KACPC,SAAU,MAGPhZ,IAAUsb,QAAQvd,EAAOgb,SAC5BhZ,EAAM,2BAAOA,GAAP,IAAegZ,MAAO,2BAG1B/Y,IAAUC,QAAQlC,EAAOib,YAC3BjZ,EAAM,2BAAOA,GAAP,IAAeiZ,SAAU,uBAGjC9a,EAAe6B,GAEf,IAAMG,EAAeC,OAAOC,KAAKL,GAAQM,QAAO,SAACC,EAAKC,GACpD,OAAuB,MAAnBR,EAAOQ,KAGXD,EAAIC,GAAWR,EAAOQ,IAFbD,IAIR,IAEsC,IAArCH,OAAOC,KAAKF,GAAcM,SAI9Bsa,GAAW,GAEXnW,EACGuU,2BAA2Bnb,EAAOgb,MAAOhb,EAAOib,UAChDtc,MAAK,WACJoe,GAAW,GACXL,EAAQQ,QC5II,QD8IbvB,OAAM,SAAC6B,GACNnU,QAAQC,IAAIkU,EAAIC,MACZD,EAAIC,OAAS5C,GACf1a,EAAe,2BAAID,GAAL,IAAkB8a,MAAO,eAC9BwC,EAAIC,OAAS5C,IACtB1a,EAAe,2BAAID,GAAL,IAAkB+a,SAAU,wBAE5C8B,GAAW,QAciDW,OAAO,QACnE,kBAAC9c,EAAA,EAAD,CACEmI,KAAK,QACLV,KAAK,QACL1H,UAAWf,EAAQJ,MACnBuB,MAAOf,EAAOgb,MACdha,SAAU,SAACC,GAAD,OAAOhB,EAAU,2BAAID,GAAL,IAAagb,MAAO/Z,EAAEC,OAAOH,UACvDD,MAAM,QACNsC,QAAQ,WACRjC,MAA4B,MAArBjB,EAAY8a,MACnB5Z,WAAYlB,EAAY8a,QAE1B,kBAAC3Z,EAAA,EAAD,CACEV,UAAWf,EAAQJ,MACnB4D,QAAQ,WACRjC,MAA+B,MAAxBjB,EAAY+a,UAEnB,kBAAC3Z,EAAA,EAAD,CAAYqc,QAAQ,oBAApB,YACA,kBAACC,GAAA,EAAD,CACEnd,GAAG,mBACH4H,KAAK,WACLU,KAAM6T,EAAe,OAAS,WAC9B7b,MAAOf,EAAOib,SACdja,SAAU,SAACC,GAAD,OAAOhB,EAAU,2BAAID,GAAL,IAAaib,SAAUha,EAAEC,OAAOH,UAC1D8c,aACE,kBAACC,GAAA,EAAD,CAAgBlL,SAAS,OACvB,kBAACmL,GAAA,EAAD,CACEC,aAAW,6BACXnc,QAAS,kBAAMgb,GAAiBD,IAChCqB,KAAK,OAEJrB,EAAe,kBAAC,KAAD,MAAiB,kBAAC,KAAD,QAIvCsB,WAAY,KAEW,MAAxBhe,EAAY+a,SACX,kBAACvZ,EAAA,EAAD,KAAiBxB,EAAY+a,UAC3B,MAEN,yBAAKta,UAAWf,EAAQqc,QACtB,kBAACra,EAAA,EAAD,CACEjB,UAAWf,EAAQwc,OACnBrT,KAAK,SACL3F,QAAQ,YACRtB,MAAM,UACN4U,SAAUoG,EACVrc,GAAG,mBAEDqc,GAAW,WAEdA,GAAW,kBAACqB,GAAA,EAAD,CAAkBC,KAAM,GAAIzd,UAAWf,EAAQsc,qBErM/Djd,GAAYC,YAAW,CAC3BmE,KAAM,CACJmC,MAAO,QAETnG,KAAM,CACJC,QAAS,OACTC,cAAe,UAEjBC,MAAO,CACLwc,UAAW,IAEbtD,MAAO,CACLjZ,aAAc,IAEhBwc,OAAQ,CACND,UAAW,GACXxW,MAAO,OACPoN,SAAU,YAEZsJ,eAAgB,CACdtJ,SAAU,WACVoB,IAAK,MACLD,KAAM,MACNiI,WAAY,GACZG,YAAa,IAEfC,OAAQ,CACN5W,MAAO,OACP6W,UAAW,MAgMAgC,OA5Lf,WACE,IAAMzX,EAAWC,qBAAW/H,GACtB4d,EAAUC,cAFI,EAGoB9c,oBAAS,GAH7B,mBAGb+c,EAHa,KAGCC,EAHD,OAI4Chd,oBAAS,GAJrD,mBAIbye,EAJa,KAIaC,EAJb,OAKQ1e,mBAAS,CACnCgI,SAAU,GACVmT,MAAO,GACPC,SAAU,GACVuD,qBAAsB,KATJ,mBAKbxe,EALa,KAKLC,EALK,OAWkBJ,mBAAS,CAC7CgI,SAAU,KACVmT,MAAO,KACPC,SAAU,KACVuD,qBAAsB,OAfJ,mBAWbte,EAXa,KAWAC,EAXA,KAiBdP,EAAUX,KAjBI,EAkBUY,oBAAS,GAlBnB,mBAkBbid,EAlBa,KAkBJC,EAlBI,KAkFpB,OACE,yBAAKpc,UAAWf,EAAQyD,MACtB,kBAACuC,EAAA,EAAD,CAAYjF,UAAWf,EAAQ8Y,MAAOtV,QAAQ,KAAKuB,MAAM,SAASkB,cAAY,GAA9E,WAGA,0BAAMlF,UAAWf,EAAQP,KAAMqD,SAnEnC,SAAkBX,GAChBA,EAAMub,iBAEN,IAAItb,EAAS,CACX6F,SAAU,KACVmT,MAAO,KACPC,SAAU,KACVuD,qBAAsB,MAGpBvc,IAAUC,QAAQlC,EAAO6H,YAC3B7F,EAAM,2BAAOA,GAAP,IAAe6F,SAAU,uBAG5B5F,IAAUsb,QAAQvd,EAAOgb,SAC5BhZ,EAAM,2BAAOA,GAAP,IAAegZ,MAAO,2BAGzB/Y,IAAUwc,SAASze,EAAOib,SAAU,CAACyD,IAAK,MAC7C1c,EAAM,2BAAOA,GAAP,IAAeiZ,SAAU,0CAIZ,MAAnBjZ,EAAOiZ,UACNhZ,IAAU0c,OAAO3e,EAAOib,SAAUjb,EAAOwe,wBAE1Cxc,EAAM,2BAAOA,GAAP,IAAewc,qBAAsB,6BAG7Cre,EAAe6B,GAEf,IAAMG,EAAeC,OAAOC,KAAKL,GAAQM,QAAO,SAACC,EAAKC,GACpD,OAAuB,MAAnBR,EAAOQ,KAGXD,EAAIC,GAAWR,EAAOQ,IAFbD,IAIR,IAEsC,IAArCH,OAAOC,KAAKF,GAAcM,SAI9Bsa,GAAW,GAEXnW,EACGmU,+BAA+B/a,EAAOgb,MAAOhb,EAAOib,UACpDtc,MAAK,SAAC6I,GAAD,OACJZ,EAASQ,UAAUC,WAAW,SAASK,IAAIF,EAAOiU,KAAKH,KAAKxY,IAAI,CAC9D+E,SAAU7H,EAAO6H,SACjBmT,MAAOhb,EAAOgb,WAGjBrc,MAAK,WACJoe,GAAW,GACXL,EAAQQ,QD7HI,QC+HbvB,OAAM,WACLoB,GAAW,QASsCM,YAAU,EAACK,OAAO,QACnE,kBAAC9c,EAAA,EAAD,CACEyH,KAAK,WACL1H,UAAWf,EAAQJ,MACnBuB,MAAOf,EAAO6H,SACd7G,SAAU,SAACC,GAAD,OAAOhB,EAAU,2BAAID,GAAL,IAAa6H,SAAU5G,EAAEC,OAAOH,UAC1DD,MAAM,WACNsC,QAAQ,WACRjC,MAA+B,MAAxBjB,EAAY2H,SACnBzG,WAAYlB,EAAY2H,WAE1B,kBAACjH,EAAA,EAAD,CACEmI,KAAK,QACLV,KAAK,QACL1H,UAAWf,EAAQJ,MACnBuB,MAAOf,EAAOgb,MACdha,SAAU,SAACC,GAAD,OAAOhB,EAAU,2BAAID,GAAL,IAAagb,MAAO/Z,EAAEC,OAAOH,UACvDD,MAAM,QACNsC,QAAQ,WACRjC,MAA4B,MAArBjB,EAAY8a,MACnB5Z,WAAYlB,EAAY8a,QAE1B,kBAAC3Z,EAAA,EAAD,CACEV,UAAWf,EAAQJ,MACnB4D,QAAQ,WACRjC,MAA+B,MAAxBjB,EAAY+a,UAEnB,kBAAC3Z,EAAA,EAAD,CAAYqc,QAAQ,oBAApB,YACA,kBAACC,GAAA,EAAD,CACEnd,GAAG,mBACH4H,KAAK,WACLU,KAAM6T,EAAe,OAAS,WAC9B7b,MAAOf,EAAOib,SACdja,SAAU,SAACC,GAAD,OAAOhB,EAAU,2BAAID,GAAL,IAAaib,SAAUha,EAAEC,OAAOH,UAC1D8c,aACE,kBAACC,GAAA,EAAD,CAAgBlL,SAAS,OACvB,kBAACmL,GAAA,EAAD,CACEC,aAAW,6BACXnc,QAAS,kBAAMgb,GAAiBD,IAChCqB,KAAK,OAEJrB,EAAe,kBAAC,KAAD,MAAiB,kBAAC,KAAD,QAIvCsB,WAAY,KAEW,MAAxBhe,EAAY+a,SACX,kBAACvZ,EAAA,EAAD,KAAiBxB,EAAY+a,UAC3B,MAEN,kBAAC5Z,EAAA,EAAD,CACEV,UAAWf,EAAQJ,MACnB4D,QAAQ,WACRjC,MAA2C,MAApCjB,EAAYse,sBAEnB,kBAACld,EAAA,EAAD,CAAYqc,QAAQ,iCAApB,oBAGA,kBAACC,GAAA,EAAD,CACEnd,GAAG,gCACH4H,KAAK,uBACLU,KAAMuV,EAA2B,OAAS,WAC1Cvd,MAAOf,EAAOwe,qBACdxd,SAAU,SAACC,GAAD,OACRhB,EAAU,2BAAID,GAAL,IAAawe,qBAAsBvd,EAAEC,OAAOH,UAEvD8c,aACE,kBAACC,GAAA,EAAD,CAAgBlL,SAAS,OACvB,kBAACmL,GAAA,EAAD,CACEC,aAAW,6BACXnc,QAAS,kBAAM0c,GAA6BD,IAC5CL,KAAK,OAEJK,EAA2B,kBAAC,KAAD,MAAiB,kBAAC,KAAD,QAInDJ,WAAY,MAEuB,MAApChe,EAAYse,qBACX,kBAAC9c,EAAA,EAAD,KAAiBxB,EAAYse,sBAC3B,MAEN,yBAAK7d,UAAWf,EAAQqc,QACtB,kBAACra,EAAA,EAAD,CACEjB,UAAWf,EAAQwc,OACnBrT,KAAK,SACL3F,QAAQ,YACRtB,MAAM,UACN4U,SAAUoG,IAERA,GAAW,WAEdA,GAAW,kBAACqB,GAAA,EAAD,CAAkBC,KAAM,GAAIzd,UAAWf,EAAQsc,qBClO/Djd,GAAYC,YAAW,CAC3BmE,KAAM,CACJub,WAAY,UACZ9W,OAAQ,QACRxI,QAAS,OACTqE,eAAgB,SAChBO,WAAY,UAEd2a,KAAM,CACJzf,SAAU,IACVE,QAAS,QAEXwf,MAAO,CACLvG,KAAM,EACNvT,QAAS,IAEX+Z,WAAY,CACVH,WAAY,aAoBDI,OAhBf,WACE,IAAMpf,EAAUX,KAChB,OACE,0BAAM0B,UAAWf,EAAQyD,MACvB,kBAAC4b,GAAA,EAAD,CAAOte,UAAWf,EAAQif,MACxB,yBAAKle,UAAWf,EAAQkf,OACtB,kBAAC,GAAD,OAEF,yBAAKne,UAAWoE,YAAKnF,EAAQkf,MAAOlf,EAAQmf,aAC1C,kBAAC,GAAD,UCAKG,OA9Bf,YAA6C,IAAtBta,EAAqB,EAArBA,SAAUua,EAAW,EAAXA,SACzBvY,EAAWC,qBAAW/H,GADc,EAGhBe,mBAAS,CAACid,SAAS,EAAMsC,eAAe,IAHxB,mBAGnCjkB,EAHmC,KAG5BkkB,EAH4B,KAmB1C,OAdArY,qBAAU,WACR,IAAMsY,EAAW1Y,EAASsU,KAAKqE,oBAAmB,SAACC,GAKjDH,EAJe,OAAXG,EAIK,CAAC1C,SAAS,EAAOsC,eAAe,GAH9B,CAACtC,SAAS,EAAOsC,eAAe,OAK7C,OAAO,WAELE,OAED,CAACD,EAAUzY,IAEVzL,EAAM2hB,QACDqC,EAGJhkB,EAAM2hB,SAAY3hB,EAAMikB,cAItBxa,EAHE,kBAAC,IAAD,CAAUgD,GH/BS,WIsCf6X,OA9Bf,YAA+C,IAAtB7a,EAAqB,EAArBA,SAAUua,EAAW,EAAXA,SAC3BvY,EAAWC,qBAAW/H,GADgB,EAGlBe,mBAAS,CAACid,SAAS,EAAMsC,eAAe,IAHtB,mBAGrCjkB,EAHqC,KAG9BkkB,EAH8B,KAmB5C,OAdArY,qBAAU,WACR,IAAMsY,EAAW1Y,EAASsU,KAAKqE,oBAAmB,SAACC,GAKjDH,EAJe,OAAXG,EAIK,CAAC1C,SAAS,EAAOsC,eAAe,GAH9B,CAACtC,SAAS,EAAOsC,eAAe,OAK7C,OAAO,WAELE,OAED,CAACD,EAAUzY,IAEVzL,EAAM2hB,QACDqC,EAGJhkB,EAAM2hB,SAAY3hB,EAAMikB,cAItB,kBAAC,IAAD,CAAUxX,GJjCC,MI8BThD,GCDI8a,GAtBH,kBACV,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,OAAK,EAACC,KLVC,KKWZ,kBAAC,GAAD,CAAcT,SAAU,0CACtB,kBAAC3Y,EAAD,QAGJ,kBAAC,IAAD,CAAOmZ,OAAK,EAACC,KLjBW,SKkBtB,kBAAC,GAAD,CAAgBT,SAAU,0CACxB,kBAAC,GAAD,QAGJ,kBAAC,IAAD,CAAOQ,OAAK,EAACC,KLrBE,cKsBb,kBAAC,GAAD,CAAcT,SAAU,0CACtB,kBAACnF,GAAD,W,oBCTJ6F,GAAQC,aAAe,CAC3BC,WAAY,CACVC,WAAY,gCAIVC,GAAcxjB,aAAayjB,QlCCC,mBkCC5BnlB,GCfyB,SAAC6H,GnCiBJ,IAACzH,EmCf3B,OnCe2BA,EmChBdyH,KnCiBF9H,EAAYK,GmChBhBglB,sBAAYplB,EAAO,CACxB6H,eACAnH,WAAY,CAACC,SAAU,IAAI+B,KDWjB2iB,CAAgB,CAC5B7jB,iBAAkB0jB,GAActjB,KAAK0jB,MAAMJ,IAAe,OAG5DK,IAASC,OACP,kBAAC,gBAAD,CAAexlB,MAAOA,IACpB,kBAAC,EAAgBylB,SAAjB,CAA0Bzf,MAAO,IAAI+Z,IAEnC,kBAAC,KAAD,CAAkB+E,MAAOA,IACvB,kBAAC,GAAD,SAMNY,SAASC,eAAe,W","file":"static/js/main.aa0ae5e4.chunk.js","sourcesContent":["import {action, thunk} from 'easy-peasy';\n\n// export interface ActiveRoomPlayer {\n//   playerID: number;\n//   credential: string;\n// }\n\n// export interface StoreModel {\n//   rooms: RoomMetadata[];\n//   roomID: string | null;\n//   setRoomID: Action<StoreModel, string>;\n//   createGameRoom: Thunk<StoreModel, number, StoreInjections>;\n//   roomMetadata: RoomMetadata | null;\n//   setRoomMetadata: Action<StoreModel, RoomMetadata>;\n//   loadRoomMetadata: Thunk<StoreModel, string, StoreInjections>;\n//   activeRoomPlayer: ActiveRoomPlayer | null;\n//   setActiveRoomPlayer: Action<StoreModel, ActiveRoomPlayer>;\n//   joinRoom: Thunk<StoreModel, JoinRoomParams, StoreInjections>;\n//   reset: Action;\n// }\n\n// 'player' refers to users player in the game room\nexport const PLAYER_STORAGE_KEY = 'citadels_player';\n\nexport let initState = {};\nexport const setInitState = (state) => {\n  if (state) initState = state;\n};\n\nexport const store = {\n  rooms: [],\n  setRooms: action((state, payload) => {\n    state.rooms = payload;\n  }),\n  loadRooms: thunk(async (actions, payload, {injections}) => {\n    const rooms = await injections.lobbyApi.getRooms();\n    actions.setRooms(rooms);\n  }),\n\n  roomID: null,\n  setRoomID: action((state, payload) => {\n    state.roomID = payload;\n  }),\n  createGameRoom: thunk(async (actions, payload, {injections}) => {\n    const roomID = await injections.lobbyApi.createRoom(payload);\n    actions.setRoomID(roomID);\n  }),\n\n  roomMetadata: null,\n  setRoomMetadata: action((state, payload) => {\n    state.roomMetadata = payload;\n  }),\n  loadRoomMetadata: thunk(async (actions, payload, {injections}) => {\n    const metadata = await injections.lobbyApi.getRoomMetadata(payload);\n    actions.setRoomMetadata(metadata);\n  }),\n\n  loadingJoinRoom: false,\n  setLoadingJoinRoom: action((state, payload) => {\n    state.loadingJoinRoom = payload;\n  }),\n  activeRoomPlayer: null,\n  setActiveRoomPlayer: action((state, payload) => {\n    localStorage.setItem(PLAYER_STORAGE_KEY, JSON.stringify(payload));\n    state.activeRoomPlayer = payload;\n  }),\n  joinRoom: thunk(async (actions, payload, {injections, getStoreState}) => {\n    if (!getStoreState().loadingJoinRoom) {\n      actions.setLoadingJoinRoom(true);\n      const playerCredentials = await injections.lobbyApi.joinRoom(payload);\n      actions.setLoadingJoinRoom(false);\n      actions.setActiveRoomPlayer({\n        credential: playerCredentials,\n        playerID: payload.playerID,\n      });\n    }\n  }),\n\n  reset: action(() => initState),\n};\n","import {isProduction, DEFAULT_PORT} from '.';\n\nconst {origin, protocol, hostname} = window.location;\nexport const BGIO_SERVER_URL = isProduction\n  ? origin\n  : `${protocol}//${hostname}:${DEFAULT_PORT}`;\n","import ky from 'ky';\nimport {GAME_NAME} from 'game/config';\nimport {BGIO_SERVER_URL} from 'game/config/client';\n\n// export interface Player {\n//   id: number;\n//   name?: string;\n// }\n\n// export interface RoomMetadata {\n//   players: Player[];\n//   matchID: string;\n//   setupData: object;\n//   unlisted: bool;\n// }\n\n// export interface ActiveRoomPlayer {\n//   playerID: number;\n//   credential: string;\n// }\n\n// export interface JoinRoomParams {\n//   roomID: string;\n//   playerID: number;\n//   playerName: string;\n// }\n\nexport default class LobbyService {\n  constructor() {\n    this.api = ky.create({prefixUrl: `${BGIO_SERVER_URL}/games/${GAME_NAME}`});\n  }\n\n  async createRoom({numPlayers, setupData}) {\n    const players = Number.parseInt(numPlayers, 10);\n    const data = await this.api\n      .post('create', {json: {numPlayers: players, setupData}})\n      .json();\n    return data.matchID;\n  }\n\n  async joinRoom({roomID, playerID, playerName}) {\n    const {playerCredentials} = await this.api\n      .post(roomID + '/join', {\n        json: {playerID, playerName},\n      })\n      .json();\n\n    return playerCredentials;\n  }\n\n  getRoomMetadata(roomID) {\n    return this.api.get(roomID).json();\n  }\n\n  async getRooms() {\n    const data = await fetch(`${BGIO_SERVER_URL}/games/${GAME_NAME}`).then((res) =>\n      res.json(),\n    );\n    return data.matches;\n  }\n}\n","export const GAME_NAME = 'citadels';\nexport const DEFAULT_PORT = '3002';\nexport const isProduction = process.env.NODE_ENV === 'production';\n","import React from 'react';\n\nconst FirebaseContext = React.createContext(null);\n\nexport default FirebaseContext;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {useState} from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport validator from 'validator';\nimport {makeStyles} from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  paper: {\n    minWidth: 768,\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  field: {\n    marginBottom: 16,\n  },\n});\n\nfunction CreateGameDialog(props) {\n  const classes = useStyles();\n  const [isPrivateGame, setIsPrivateGame] = useState(false);\n  const [fields, setFields] = useState({\n    roomName: '',\n    numberOfPlayers: '4',\n  });\n  const [fieldErrors, setFieldErrors] = useState({\n    roomName: null,\n    numberOfPlayers: null,\n  });\n\n  const handleFormOnSubmit = (event) => {\n    let errors = {\n      roomName: null,\n      numberOfPlayers: null,\n    };\n\n    if (validator.isEmpty(fields.roomName)) {\n      errors = {...errors, roomName: 'Must not be empty'};\n    }\n\n    if (validator.isEmpty(fields.numberOfPlayers)) {\n      errors = {...errors, numberOfPlayers: 'Must not be empty'};\n    }\n\n    setFieldErrors(errors);\n\n    const noNullErrors = Object.keys(errors).reduce((acc, current) => {\n      if (errors[current] == null) {\n        return acc;\n      }\n      acc[current] = errors[current];\n      return acc;\n    }, {});\n\n    if (Object.keys(noNullErrors).length !== 0) {\n      return;\n    }\n\n    props.onSubmit({\n      setupData: {roomName: fields.roomName},\n      numPlayers: fields.numberOfPlayers,\n    });\n  };\n\n  return (\n    <Dialog\n      classes={{paper: classes.paper}}\n      open={props.open}\n      onClose={props.onClose}\n      aria-labelledby=\"create-game-dialog\"\n    >\n      <DialogTitle id=\"create-game-dialog\">Create a Game</DialogTitle>\n      <DialogContent>\n        <div className={classes.form}>\n          <TextField\n            fullWidth\n            className={classes.field}\n            label=\"Room Name\"\n            value={fields.roomName}\n            onChange={(e) => setFields({...fields, roomName: e.target.value})}\n            error={fieldErrors.roomName != null}\n            helperText={fieldErrors.roomName}\n          />\n          <FormControl\n            className={classes.field}\n            error={fieldErrors.numberOfPlayers != null}\n          >\n            <InputLabel id=\"create-game-number-players-select-label\">\n              Number Of Players\n            </InputLabel>\n            <Select\n              labelId=\"create-game-number-players-select-label\"\n              id=\"create-game-number-players-select\"\n              value={fields.numberOfPlayers}\n              onChange={(e) => setFields({...fields, numberOfPlayers: e.target.value})}\n            >\n              <MenuItem value=\"4\">\n                <em>4</em>\n              </MenuItem>\n              <MenuItem value=\"2\">2</MenuItem>\n              <MenuItem value=\"3\">3</MenuItem>\n              <MenuItem value=\"5\">5</MenuItem>\n              <MenuItem value=\"6\">6</MenuItem>\n              <MenuItem value=\"7\">7</MenuItem>\n            </Select>\n            {fieldErrors.numberOfPlayers != null ? (\n              <FormHelperText>{fieldErrors.numberOfPlayers}</FormHelperText>\n            ) : null}\n          </FormControl>\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={props.onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={handleFormOnSubmit} color=\"primary\">\n          Create Game\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default CreateGameDialog;\n","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport CreateGameDialog from 'components/create_game/CreateGameDialog.react';\nimport useBoolean from 'hooks/useBoolean';\n\nexport default function CreateGameButton(props) {\n  const {value: open, setTrue, setFalse} = useBoolean(false);\n\n  function onSubmit(data) {\n    setFalse();\n    props.onSubmit(data);\n  }\n\n  return (\n    <>\n      <Button variant=\"contained\" color=\"primary\" onClick={() => setTrue()}>\n        Create Game\n      </Button>\n      <CreateGameDialog open={open} onClose={() => setFalse()} onSubmit={onSubmit} />\n    </>\n  );\n}\n","import {useCallback, useState} from 'react';\n\nexport default function useBoolean(initialState) {\n  const [value, setValue] = useState(initialState);\n\n  return {\n    value,\n    set: setValue,\n    toggle: useCallback(() => setValue(!value), []),\n    setTrue: useCallback(() => setValue(true), []),\n    setFalse: useCallback(() => setValue(false), []),\n  };\n}\n","// @flow strict\n\nimport React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport clsx from 'clsx';\n\n// type Align = 'start' | 'end' | 'center' | 'baseline' | 'stretch';\n// type Direction = 'horizontal' | 'horizontal-reverse' | 'vertical' | 'vertical-reverse';\n// type Justify = 'start' | 'end' | 'center' | 'between' | 'around' | 'evenly';\n// type Wrap = 'nowrap' | 'wrap' | 'wrap-reverse';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n  },\n  directionHorizontal: {\n    flexDirection: 'row',\n  },\n  directionHorizontalReverse: {\n    flexDirection: 'row-reverse',\n  },\n  directionVertical: {\n    flexDirection: 'column',\n  },\n  directionVerticalReverse: {\n    flexDirection: 'column-reverse',\n  },\n  justifyStart: {\n    justifyContent: 'flex-start',\n  },\n  justifyEnd: {\n    justifyContent: 'flex-end',\n  },\n  justifyCenter: {\n    justifyContent: 'center',\n  },\n  justifyBetween: {\n    justifyContent: 'space-between',\n  },\n  justifyAround: {\n    justifyContent: 'space-around',\n  },\n  justifyEvenly: {\n    justifyContent: 'space-evenly',\n  },\n  alignStart: {\n    alignItems: 'flex-start',\n  },\n  alignEnd: {\n    alignItems: 'flex-end',\n  },\n  alignCenter: {\n    alignItems: 'center',\n  },\n  alignStretch: {\n    alignItems: 'stretch',\n  },\n  alignBaseline: {\n    alignItems: 'baseline',\n  },\n  wrap: {\n    flexWrap: 'wrap',\n  },\n  wrapReverse: {\n    flexWrap: 'wrap-reverse',\n  },\n});\n\n// type Props = $ReadOnly<{\n//   align?: Align,\n//   children?: ?Node,\n//   className?: ?string,\n//   direction?: Direction,\n//   justify?: Justify,\n//   wrap?: Wrap,\n// }>;\n\nexport default function FlexLayout({\n  align = 'start',\n  children,\n  className,\n  direction = 'horizontal',\n  justify = 'start',\n  wrap = 'nowrap',\n}) {\n  const classes = useStyles();\n  return (\n    <div\n      className={clsx(className, classes.root, {\n        [classes.directionHorizontal]: direction === 'horizontal',\n        [classes.directionHorizontalReverse]: direction === 'horizontal-reverse',\n        [classes.directionVertical]: direction === 'vertical',\n        [classes.directionVerticalReverse]: direction === 'vertical-reverse',\n        [classes.justifyStart]: justify === 'start',\n        [classes.justifyEnd]: justify === 'end',\n        [classes.justifyCenter]: justify === 'center',\n        [classes.justifyBetween]: justify === 'between',\n        [classes.justifyAround]: justify === 'around',\n        [classes.justifyEvenly]: justify === 'evenly',\n        [classes.alignStart]: align === 'start',\n        [classes.alignEnd]: align === 'end',\n        [classes.alignCenter]: align === 'center',\n        [classes.alignStretch]: align === 'stretch',\n        [classes.alignBaseline]: align === 'baseline',\n        // flex-wrap: nowrap is the default\n        [classes.wrap]: wrap === 'wrap',\n        [classes.wrapReverse]: wrap === 'wrap-reverse',\n      })}\n    >\n      {children}\n    </div>\n  );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport FlexLayout from 'components/shared/FlexLayout.react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles({\n  root: {\n    padding: 16,\n    backgroundColor: '#fffffd',\n    borderRadius: 8,\n    borderStyle: 'solid',\n    borderWidth: 4,\n    borderColor: '#f2f2f2',\n  },\n  details: {\n    marginRight: 24,\n    width: 256,\n  },\n});\n\nexport default function RoomsListItem({room, onJoin}) {\n  const classes = useStyles();\n  return (\n    <FlexLayout align=\"center\" className={classes.root}>\n      <FlexLayout direction=\"vertical\" className={classes.details}>\n        <Typography gutterBottom>{`ID: ${room.matchID}`}</Typography>\n        <Typography>{`Name: ${room.setupData.roomName}`}</Typography>\n      </FlexLayout>\n      <Button variant=\"contained\" color=\"primary\" onClick={() => onJoin(room.matchID)}>\n        Join\n      </Button>\n    </FlexLayout>\n  );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport RoomsListItem from 'components/home/RoomsListItem.react';\n\nconst useStyles = makeStyles({\n  root: {\n    listStyle: 'none',\n    padding: 0,\n    margin: 0,\n  },\n});\n\nexport default function RoomsList(props) {\n  const classes = useStyles();\n  return (\n    <ul className={classes.root}>\n      {props.rooms.map((room) => (\n        <li key={room.matchID}>\n          <RoomsListItem room={room} onJoin={props.onJoin} />\n        </li>\n      ))}\n    </ul>\n  );\n}\n","import React, {useContext, useState, useEffect, useCallback} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {useStoreActions, useStoreState} from 'easy-peasy';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport CreateGameButton from 'components/create_game/CreateGameButton.react';\nimport RoomsList from 'components/home/RoomsList.react';\n\nconst useStyles = makeStyles({\n  root: {\n    paddingBottom: 24,\n    display: 'flex',\n    paddingTop: 16,\n    flexDirection: 'column',\n    paddingRight: 24,\n    paddingLeft: 24,\n  },\n  creation: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    marginBottom: 24,\n  },\n});\n\nexport default function Home() {\n  const classes = useStyles();\n  const rooms = useStoreState((s) => s.rooms);\n  const createGameRoom = useStoreActions((s) => s.createGameRoom);\n  const setRooms = useStoreActions((s) => s.setRooms);\n  const loadRooms = useStoreActions((s) => s.loadRooms);\n  const setRoomID = useStoreActions((s) => s.setRoomID);\n  const roomID = useStoreState((s) => s.roomID);\n  const firebase = useContext(FirebaseContext);\n  const [userProfile, setUserProfile] = useState(null);\n\n  const onJoin = useCallback(\n    (matchID) => {\n      setRoomID(matchID);\n    },\n    [setRoomID],\n  );\n\n  useEffect(() => {\n    async function fetchProfile() {\n      const profile = await firebase.fetchUserProfile();\n      setUserProfile(profile);\n    }\n    fetchProfile();\n  }, [setUserProfile, firebase]);\n\n  useEffect(() => {\n    // const intervalID = setInterval(() => {\n    //   loadRooms();\n    // }, 500);\n\n    // return () => clearInterval(intervalID);\n    firebase.firestore.collection('bgio_metadata').onSnapshot((snapshot) => {\n      const result = [];\n      snapshot.forEach((doc) => {\n        result.push({...doc.data(), matchID: doc.id});\n      });\n      setRooms(result);\n    });\n  }, [firebase, setRooms]);\n\n  if (roomID != null) return <Redirect to={`/rooms/${roomID}`} />;\n\n  return (\n    <main className={classes.root}>\n      <div className={classes.creation}>\n        <Typography variant=\"h4\" gutterBottom>\n          {`Welcome${userProfile ? ` ${userProfile.username}` : ''}!`}\n        </Typography>\n        <CreateGameButton onSubmit={createGameRoom} />\n      </div>\n      <div>\n        <RoomsList rooms={rooms} onJoin={onJoin} />\n      </div>\n    </main>\n  );\n}\n","import React, {useContext, useState, useEffect, useCallback} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {useStoreActions, useStoreState} from 'easy-peasy';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport CreateGameButton from 'components/create_game/CreateGameButton.react';\nimport RoomsList from 'components/home/RoomsList.react';\nimport {useParams} from 'react-router-dom';\nimport FlexLayout from 'components/shared/FlexLayout.react';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100vw',\n    height: '100vh',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  creation: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-start',\n    marginBottom: 24,\n  },\n});\n\nexport default function LobbySetup({startGame}) {\n  const {id} = useParams();\n  const classes = useStyles();\n  const setRoomMetadata = useStoreActions((s) => s.setRoomMetadata);\n  const roomMetadata = useStoreState((s) => s.roomMetadata);\n  const firebase = useContext(FirebaseContext);\n  const [userProfile, setUserProfile] = useState(null);\n  const activeRoomPlayer = useStoreState((s) => s.activeRoomPlayer);\n  const joinRoom = useStoreActions((s) => s.joinRoom);\n\n  const gameRoomFull =\n    roomMetadata != null\n      ? roomMetadata.players.filter((p) => !p.name).length === 0\n      : false;\n\n  useEffect(() => {\n    async function fetchProfile() {\n      const profile = await firebase.fetchUserProfile();\n      setUserProfile(profile);\n    }\n    fetchProfile();\n  }, [setUserProfile, firebase]);\n\n  useEffect(() => {\n    if (userProfile != null && userProfile.username != null && roomMetadata != null) {\n      // find first empty seat ID\n      const firstWithoutName = roomMetadata.players.find((p) => !p.name);\n      const emptySeatID = firstWithoutName ? firstWithoutName.id : null;\n      const alreadyJoined =\n        activeRoomPlayer == null\n          ? false\n          : roomMetadata.players.find((p) => {\n              return (\n                p.id === activeRoomPlayer.playerID && p.name === userProfile.username\n              );\n            }) != null;\n      if (!alreadyJoined && emptySeatID != null && id) {\n        joinRoom({\n          playerID: emptySeatID,\n          playerName: userProfile.username,\n          roomID: id,\n        });\n      }\n    }\n  }, [roomMetadata, userProfile]);\n\n  useEffect(() => {\n    if (id) {\n      firebase.firestore\n        .collection('bgio_metadata')\n        .doc(id)\n        .onSnapshot((doc) => {\n          const data = {...doc.data()};\n          data.players = Object.keys(data.players).map((index) => data.players[index]);\n          setRoomMetadata({...data, matchID: doc.id});\n        });\n    }\n  }, [firebase, setRoomMetadata, id]);\n\n  useEffect(() => {\n    if (gameRoomFull) {\n      setTimeout(() => startGame(), 2000);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [gameRoomFull]);\n\n  return (\n    <main className={classes.root}>\n      <FlexLayout direction=\"vertical\">\n        <div>\n          {roomMetadata != null ? (\n            <ul>\n              {roomMetadata.players.map((player) => (\n                <li key={player.id}>\n                  {player.name != null ? (\n                    <Typography>{`Player ${player.name} joined!`}</Typography>\n                  ) : (\n                    <Typography>Waiting for player to join</Typography>\n                  )}\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <Typography>Loading...</Typography>\n          )}\n        </div>\n        <div>\n          {gameRoomFull ? (\n            <Typography>Starting Game...</Typography>\n          ) : (\n            <Typography>Game will start when all players join!</Typography>\n          )}\n        </div>\n      </FlexLayout>\n    </main>\n  );\n}\n","// TODO: implement\n// createDeckOfDistricts() -> returns {array of district cards}, set up random purple cards\n// createDeckOfCharacters() -> returns {array of character cards}\n//\n// districtCard {\n//   cost: Int,\n//   type: Int, // 0: Novel|Yellow, 1:Religious|Blue, 2: Trade|Green, 3: Military|Red, 4: Special|Purple\n//   // specialPower: funct // implement after if ther is time\n// }\n//\n// characterCard {\n//   order : Int,\n//   name : String,\n//   power : funct\n// }\n\nfunction districtCardInDeck(quantity, name, cost, type, imageURL) {\n  let cards = [];\n  for (let index = 0; index < quantity; index++) {\n    cards.push({name: name, type: type, cost: cost, imageURL: imageURL});\n  }\n  return cards;\n}\n\nexport function CreateDeckOfDistricts() {\n  const deck = [];\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Templo',\n      1,\n      1,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Ftemplo.jpg?alt=media&token=2942172a-29de-4fcf-8ec1-ef95ef919c8d',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Iglesia',\n      2,\n      1,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Figlesia.jpg?alt=media&token=008b54c2-55a9-4088-b997-f8310a0a1d76',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Monasterio',\n      3,\n      1,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Fmonasterio.jpg?alt=media&token=3355cf48-1f74-4bac-89e3-e055df55823c',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      2,\n      'Catedral',\n      5,\n      1,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fblue%2Fcatedral.jpg?alt=media&token=e21f93a0-146d-4aa8-a31e-86407ce0f2b6',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      2,\n      'Ayuntamiento',\n      5,\n      2,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Fayuntamiento.jpg?alt=media&token=68d71e9a-0858-4f04-9267-878a528131d6',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Almacenes',\n      3,\n      2,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Falmacenes.jpg?alt=media&token=7809b068-c802-48ba-b05c-ff98e2b9573a',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      4,\n      'Mercado',\n      2,\n      2,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Fmercado.jpg?alt=media&token=2b736349-d370-481c-b68f-92e7b7b343fd',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      5,\n      'Taberna',\n      1,\n      2,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Ftaberna.jpg?alt=media&token=9bbee48d-140c-4ade-b3a6-add77193041e',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Puerto',\n      4,\n      2,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Fpuerto.jpg?alt=media&token=1ecf7239-773c-458f-904f-b00f650063f7',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Tienda',\n      2,\n      2,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fgreen%2Ftienda.jpg?alt=media&token=987005d7-a83c-43f9-a255-a000259f691a',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      2,\n      'Fortaleza',\n      5,\n      3,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Ffortaleza.jpg?alt=media&token=4260bf11-ab74-438c-98d6-5b8d92604a58',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Prisión',\n      2,\n      3,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Fprision.jpg?alt=media&token=edeef978-a05e-4b70-9852-f238d45113b2',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Atalaya',\n      1,\n      3,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Fatalaya.jpg?alt=media&token=1558164b-dc8b-4e35-9254-1d966ac45240',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Cuartel',\n      3,\n      3,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fred%2Fcuartel.jpg?alt=media&token=6aeb48c0-f5ca-445e-aeb7-0c61f39878cf',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      3,\n      'Palacio',\n      5,\n      0,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fyellow%2Fpalacio.jpg?alt=media&token=6139bca5-bdc1-4455-aa43-1f474594eccb',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      4,\n      'Castillo',\n      4,\n      0,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fyellow%2Fcastillo.jpg?alt=media&token=d3230b61-e2a6-45ea-9410-eb08224e2ccd',\n    ),\n  );\n  deck.push(\n    ...districtCardInDeck(\n      5,\n      'Señoría',\n      3,\n      0,\n      'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fdistricts%2Fyellow%2Fsenoria.jpg?alt=media&token=da3b04f7-b6a4-4a3b-a444-c48740308fc2',\n    ),\n  );\n\n  // Will need to keep a file or something with the distric information.\n  // for (let index = 0; index < 68; index++) {\n  //   deck.push(\n  //     CreateDistrictCard(\n  //       'Name: ' + index,\n  //       Math.floor(Math.random() * 3) + 1,\n  //       Math.floor(Math.random() * 4),\n  //     ),\n  //   );\n  // }\n  return deck;\n}\n\nexport function CreateDeckOfCharacters() {\n  const backSrc =\n    'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fback_gray.jpg?alt=media&token=7a1f8e7e-4a08-426a-9edd-09e60e22496a';\n  const deck = [\n    {\n      order: 1,\n      name: 'Assasin',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fasesino.jpg?alt=media&token=03ceea66-dbc1-435d-b46e-1c1edd48b141',\n      back: backSrc,\n    },\n    {\n      order: 2,\n      name: 'Thief',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fladron.jpg?alt=media&token=dfd057fc-3073-40ce-9053-bad997173482',\n      back: backSrc,\n    },\n    {\n      order: 3,\n      name: 'Magician',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmago.jpg?alt=media&token=7ee85db5-3682-486d-820b-2225fce7aea5',\n      back: backSrc,\n    },\n    {\n      order: 4,\n      name: 'King',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Frey.jpg?alt=media&token=60239d45-6c7c-424c-9b77-e2e10c38ad86',\n      back: backSrc,\n    },\n    {\n      order: 5,\n      name: 'Bishop',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fobispo.jpg?alt=media&token=fda603aa-89c4-4692-b09a-e823940d2409',\n      back: backSrc,\n    },\n    {\n      order: 6,\n      name: 'Merchant',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmercader.jpg?alt=media&token=2705ddf3-cf31-47c5-9a79-56f462f43085',\n      back: backSrc,\n    },\n    {\n      order: 7,\n      name: 'Architect',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Farquitecto.jpg?alt=media&token=ee9cee94-7064-4d4e-8f81-760e2df8c772',\n      back: backSrc,\n    },\n    {\n      order: 8,\n      name: 'Warlord',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fguerrero.jpg?alt=media&token=f56f6050-9c7f-47df-93f6-3b8d157f4b89',\n      back: backSrc,\n    },\n  ];\n  const specialCharacters = [\n    {\n      order: 1,\n      name: 'Witch',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Fbruja.jpg?alt=media&token=ecb9c8f3-0d57-49e9-802c-ef714bcbc7f9',\n      back: backSrc,\n    },\n    {\n      order: 2,\n      name: 'Tax Collector',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Frecaudador.jpg?alt=media&token=a2197f82-7bb6-4d9d-a6f5-84b84f214e06',\n      back: backSrc,\n    },\n    {\n      order: 3,\n      name: 'Wizard',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Fhechicero.jpg?alt=media&token=e6869073-ead8-49c1-8544-f4eedb17ee53',\n      back: backSrc,\n    },\n    {\n      order: 4,\n      name: 'Emperor',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Femperador.jpg?alt=media&token=090e596a-089c-419c-bc9b-e497a7c38e66',\n      back: backSrc,\n    },\n    {\n      order: 5,\n      name: 'Abbot',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Fabad.jpg?alt=media&token=ad3b577d-2a42-45ad-b55f-2c10926d60c7',\n      back: backSrc,\n    },\n    {\n      order: 6,\n      name: 'Alchemist',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Falquimista.jpg?alt=media&token=b212e452-208d-4e7a-ac49-1b86190e20b8',\n      back: backSrc,\n    },\n    {\n      order: 7,\n      name: 'Navigator',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Fnavegante.jpg?alt=media&token=ca05adf4-370b-4d40-a623-071e91c29358',\n      back: backSrc,\n    },\n    {\n      order: 8,\n      name: 'Diplomat',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Fdiplomatico.jpg?alt=media&token=2f9dc4c6-d36b-48e8-90ac-586e564aab42',\n      back: backSrc,\n    },\n    {\n      order: 9,\n      name: 'Artist',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Fartista.jpg?alt=media&token=ae23d6cf-6b55-40f1-bda4-1e25e5874069',\n      back: backSrc,\n    },\n    {\n      order: 9,\n      name: 'Queen',\n      front:\n        'https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fextra%2Freina.jpg?alt=media&token=65331dac-2e78-4e75-9320-e176784b2111',\n      back: backSrc,\n    },\n  ];\n  return deck;\n}\n\nfunction CreateDistrictCard(name, cost, type) {\n  return {name: name, cost: cost, type: type};\n  //not sure how to do specialPower which should be a function.\n}\n\nfunction CreateCharacterCard(order, name) {\n  return {order, name};\n  //not sure how to do specialPower which should be a function.\n}\n\n// export function Cards(props) {\n//   let cards = [];\n//   for (let i = 0; i < 4; i++) {\n//     cards.push(\n//       <Card key={i} cardFrontImage={'assets/cards/cardfront.png'} isReversed={true} />,\n//     );\n//   }\n\n//   return (\n//     <div\n//       style={{\n//         width: '600px',\n//         display: 'flex',\n//         position: 'fixed',\n//         left: '50%',\n//         bottom: '50px',\n//         transform: 'translateX(-50%)',\n//       }}\n//     >\n//       {cards}\n//     </div>\n//   );\n// }\n","import { INVALID_MOVE } from 'boardgame.io/core';\n// might want to structure later for modes of game TODO\nconst gameMode = {\n  NUMCHARACTERS : 8,\n  MINPLAYERS: 2,\n  MAXPLAYERS: 7,\n}\n/**\n * Function that allows user to choose a character.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} indx1 - index of deckOfCharacters that the user chose\n * @param {int} [indx2=-1] - index of deckOfCharacters to place facedown, only used when 2P grame\n */\nexport function ChooseCharacter(G, ctx, indx1, indx2 = -1) {\n  console.log(\"Entered ChooseCharacter with: \", indx1)\n  G.players[ctx.currentPlayer].chosenCharacter.splice(0,0,G.deckOfCharacters.splice(indx1,1)[0])\n\n  // if 2 players after chose place another card facedown so when 2 players two choses.\n  // First time it doesn't facedown (this is when deck of characters length === 6) \n  if (ctx.numPlayers === 2 && G.deckOfCharacters.length !== 6) {\n    if (indx1 < indx2) {\n      indx2 = indx2 - 1;\n    }\n    G.faceDownCharacterCards.push(G.deckOfCharacters.splice(indx2,1)[0])\n  }\n\n  // When playing with 7 players, when player 6 chooses move facedown to deck of characters\n  // so player 7 has two choices.\n  if (ctx.numPlayers === 7  && G.deckOfCharacters.length === 1 && ctx.playOrderPos === 5) {\n    G.deckOfCharacters.push(G.faceDownCharacterCards.pop())\n  }\n\n  // let the deck be empty for phase is over function\n  if(G.deckOfCharacters.length === 1) {\n    G.faceDownCharacterCards.push(G.deckOfCharacters.pop());\n  }\n}\n\n/**\n * Utility function to get current character from player. This works given that choosen characters are sorted in setPlayPhase() and after each turn the character is returned to deck of characters.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nexport function getCurrentCharacter(G, ctx) {\n  console.log(\"called getCurrentChar with:\" + ctx.currentPlayer)\n  let currentCharater = -1;\n  currentCharater = G.players[ctx.currentPlayer].chosenCharacter[0].order;\n  return currentCharater\n}\n\n// Send to Utils\nexport function findPlayerWithCharacter(G, ctx, characterOrder) {\n  for (let i = 0; i < ctx.numPlayers; i++) {\n    if (G.players[i].chosenCharacter.some(e => e.order === characterOrder)){\n      return i\n    }    \n  }\n  return -1;\n}\n\n/**\n * Function to take a coin in their turn.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nexport function TakeCoin(G, ctx) {\n  console.log(\"TakeCoin called\")\n  // Check if G.pileOfCoins has more thatn 2 coins.\n  \n  // If it is merchant(6) give one coin extra\n  if(getCurrentCharacter(G, ctx) === 6 && G.pileOfCoins > 1) {\n    G.players[ctx.currentPlayer].coins = G.players[ctx.currentPlayer].coins + 1;\n    G.pileOfCoins = G.pileOfCoins - 1;\n  }\n\n  if (G.pileOfCoins === 1) {\n    G.players[ctx.currentPlayer].coins = G.players[ctx.currentPlayer].coins + 1;\n    G.pileOfCoins = G.pileOfCoins - 1;\n  } else {\n    G.players[ctx.currentPlayer].coins = G.players[ctx.currentPlayer].coins + 2;\n    G.pileOfCoins = G.pileOfCoins - 2;\n  }\n\n  // If architect draw 2 district cards and add to hand\n  if(getCurrentCharacter(G, ctx) === 7 && G.deckOfCharacters.length > 2) {\n    let addCards = G.deckOfDistricts.splice(0,2)\n    G.secret[ctx.currentPlayer].hand.push(addCards[0]);\n    G.secret[ctx.currentPlayer].hand.push(addCards[1]);\n    // G.secret[ctx.currentPlayer].hand.push(G.deckOfDistricts.shift());\n    // G.secret[ctx.currentPlayer].hand.push(G.deckOfDistricts.shift());\n  }\n  \n  ctx.events.endStage();\n}\n\n/**\n * Takes top 2 district cards and allows user to choose between them\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {bool} choseFirstCard - Either chose first card or second\n */\nexport function TakeDistrictCard(G, ctx, choseFirstCard) {\n  console.log(\"TakeDistrictCard called\")\n  let first = G.deckOfDistricts.shift()\n  let second = G.deckOfDistricts.shift()\n  \n  if(choseFirstCard){\n    G.secret[ctx.currentPlayer].hand.push(first)\n    G.deckOfDistricts.push(second)\n  } else {\n    G.secret[ctx.currentPlayer].hand.push(second)\n    G.deckOfDistricts.push(first)\n  }\n\n  // If it is merchant(6) give one coin extra\n  if(getCurrentCharacter(G, ctx) === 6 && G.pileOfCoins > 1) {\n    G.players[ctx.currentPlayer].coins = G.players[ctx.currentPlayer].coins + 1;\n    G.pileOfCoins = G.pileOfCoins - 1;\n  }\n\n  // If architect draw 2 district cards and add to hand\n  if(getCurrentCharacter(G, ctx) === 7 && G.deckOfCharacters.length > 2) {\n    G.secret[ctx.currentPlayer].hand.push(G.deckOfDistricts.shift());\n    G.secret[ctx.currentPlayer].hand.push(G.deckOfDistricts.shift());\n  }\n\n  ctx.events.endStage();\n}\n\n/**\n * Utility function check weather the player still can build.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nfunction canBuild(G, ctx) {\n  let canBuild = false;\n  if(G.players[ctx.currentPlayer].districtBuiltOnTurn === 0 || (G.players[ctx.currentPlayer].districtBuiltOnTurn < 3 && getCurrentCharacter(G, ctx) === 7)){\n    canBuild = true;\n  }\n  return canBuild;\n}\n\n/**\n * Function to call when building a district card.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} handIndex - index of card that is built\n */\nexport function BuildDistrict(G, ctx, handIndex) {\n  console.log(\"Entered BuildDistrict\")\n  //Do not allow if it has more than 1, unles is architect.\n  if(canBuild(G, ctx)) {\n    G.players[ctx.currentPlayer].districtBuiltOnTurn = G.players[ctx.currentPlayer].districtBuiltOnTurn + 1;\n    // Check if user has sufficient coins, should be checked before allowing to select that hand.\n    if(G.players[ctx.currentPlayer].coins >= G.secret[ctx.currentPlayer].hand[handIndex].cost) {\n      G.players[ctx.currentPlayer].coins = G.players[ctx.currentPlayer].coins - G.secret[ctx.currentPlayer].hand[handIndex].cost;\n      G.pileOfCoins = G.pileOfCoins + G.secret[ctx.currentPlayer].hand[handIndex].cost;\n      G.players[ctx.currentPlayer].builtCity.push(G.secret[ctx.currentPlayer].hand.splice(handIndex,1)[0])\n    }\n  }\n  // check if it has 7 districs if yes put first to finish\n  if(G.players[ctx.currentPlayer].builtCity.length >= 7 && G.finishedFirst === -1) {\n    G.finishedFirst = ctx.currentPlayer\n  }\n  // if Warlord(8) setStage('extraStage')\n  if(getCurrentCharacter(G, ctx) === 8) {\n    ctx.events.setStage('extraStage');\n  }\n}\n\n/**\n * Function to call to end or skip your turn, it returns to deck of characters your choosen card\n * and reset's powerUsed.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nexport function SkipOrEndStage(G, ctx) {\n  G.players[ctx.currentPlayer].powerUsed = false;\n  G.players[ctx.currentPlayer].districtBuiltOnTurn = 0;\n\n  // if Warlord(8) setStage('extraStage')\n  if(getCurrentCharacter(G, ctx) === 8) {\n    ctx.events.setStage('extraStage');\n  } else {\n    // move user lowest character to characterdeck\n    G.deckOfCharacters.push(G.players[ctx.currentPlayer].chosenCharacter.splice(0,1)[0]);\n    ctx.events.endStage();\n    ctx.events.endTurn();\n  }\n}\n\n/**\n * Function to call to end your turn in warloard, it returns to deck of characters your choosen card\n * and reset's powerUsed.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nexport function EndTurn(G, ctx) {\n  G.players[ctx.currentPlayer].powerUsed = false;\n  G.players[ctx.currentPlayer].districtBuiltOnTurn = 0;\n\n  // move user lowest character to characterdeck\n  G.deckOfCharacters.push(G.players[ctx.currentPlayer].chosenCharacter.splice(0,1)[0]);\n  ctx.events.endStage();\n  ctx.events.endTurn(); \n}\n\n/**\n * Changes G state to establish who to kill this turn. Effect is taken in BeginPlayTurn()\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} toMurder - character number to murder.\n */\nfunction assasinPower(G, ctx, toMurder) { \n  G.murderedCharacter = toMurder;\n}\n\n/**\n * Changes G state to establish who to mugg this turn. Effect is taken in BeginPlayTurn()\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} toSteal - character number to still from\n */\nfunction thiefPower(G, ctx, toSteal) {\n  G.muggedCharacter = {muggedFromPlayer: ctx.currentPlayer, muggedToCharacter: toSteal};\n}\n\n/**\n * Switches player hand with chosen player.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} changeHandsWith - player number to switch hands with\n */\nfunction magicianPowerA(G, ctx, changeHandsWith) {\n  const resultSecret = {...G.secret};\n\n  const currentPlayerHand = [...G.secret[ctx.currentPlayer].hand];\n  resultSecret[ctx.currentPlayer].hand = G.secret[changeHandsWith].hand\n  resultSecret[changeHandsWith].hand = currentPlayerHand;\n\n  return {...G, secret : resultSecret}\n}\n\n/**\n * Switches the player hand with the deck.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {[int]} changeMyHandIndx - array of index number from players hand to switch cards.\n */\nfunction magicianPowerB(G, ctx, changeMyHandIndx) {\n  // sort descending order\n  changeMyHandIndx.sort(function(a,b){return b-a});\n  const numOfCards = changeMyHandIndx.length;\n  changeMyHandIndx.forEach(x => {\n    G.deckOfDistricts.push(G.secret[ctx.currentPlayer].hand.splice(x,1)[0]);\n  });\n  for (let i = 0; i < numOfCards; i++) {\n    G.secret[ctx.currentPlayer].hand.push(G.deckOfDistricts.shift());\n  }\n}\n\n/**\n * Utility funtion to count how many cards of specific type of distric has the player\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} typeOfDistrict - type of the distric type which gives extra coins to the character\n */\nfunction getExtraCoins(G, ctx, typeOfDistrict) {\n  let goldDistrictCount = 0\n  G.players[ctx.currentPlayer].builtCity.forEach(city => {\n    if(city.type === typeOfDistrict) {\n      goldDistrictCount = goldDistrictCount + 1;\n    }\n  });\n  return goldDistrictCount\n}\n\n/**\n * Function that counts and adds coints to the character when specific type of city is built.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {int} typeOfDistrict - type of the distric type which gives extra coins to the character\n */\nfunction addExtraCoin(G, ctx, typeOfDistrict) {\n  let addedGold = getExtraCoins(G, ctx, typeOfDistrict);\n  console.log(\"<-------Extra coins to add:\" + addedGold);\n  while(G.pileOfCoins !== 0 && addedGold !== 0) {\n    G.pileOfCoins = G.pileOfCoins - 1;\n    addedGold = addedGold - 1;\n    G.players[ctx.currentPlayer].coins = G.players[ctx.currentPlayer].coins + 1;\n  }\n}\n\n/**\n * It is the function for the extra power for the warlord to destroy a card of another player.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {any} destroy - an object containing the player number and it's index hand card to destroy\n */\nexport function WarlordPower(G, ctx, destroy) {\n  // destroy: {\n  //  player: Int,\n  //  builtCityHandIndx: Int, \n  // }\n\n  let destroyedCity = G.players[destroy.player].builtCity.splice(destroy.builtCityHandIndx, 1)[0];\n  G.players[ctx.currentPlayer].coins =  G.players[ctx.currentPlayer].coins - (destroyedCity.cost - 1);\n  G.pileOfCoins = G.pileOfCoins + (destroyedCity.cost - 1);\n  G.deckOfDistricts.push(destroyedCity);\n  \n  // move user lowest character to characterdeck\n  G.deckOfCharacters.push(G.players[ctx.currentPlayer].chosenCharacter.splice(0,1)[0]);\n  ctx.events.endStage();\n  ctx.events.endTurn();\n}\n\n\n/**\n * Function Use character Power, thakes the current user power and uses the power of that character.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n * @param {any} payload - different payload from the front.\n */\nexport function UseCharacterPower(G, ctx, payload) {\n  console.log(\"<----Use character Power called with payload: \"+ payload)\n  // Check on front when input:\n  // If power already used the btn is desabled.\n  // Thief can not anounce assasin and assasin target.\n  if (!G.players[ctx.currentPlayer].powerUsed) {\n    G.players[ctx.currentPlayer].powerUsed = true;\n    switch (getCurrentCharacter(G,ctx)) {\n      case 1:\n        // payload: int character order number to murder\n        assasinPower(G, ctx, payload)\n        break;\n      case 2:\n        // payload: int character order number to steal\n        thiefPower(G, ctx, payload)\n        break;\n      case 3:\n        // payload: {isOptionA: true, changeHandsWith: int, changeMyHandIndx: [int]}\n        if(payload.isOptionA) {\n          magicianPowerA(G, ctx, payload.changeHandsWith); // needs testing.\n        } else {\n          magicianPowerB(G, ctx, payload.changeMyHandIndx);\n        }\n        break;\n      case 4:\n        addExtraCoin(G, ctx, 0)\n        break;\n      case 5:\n        addExtraCoin(G, ctx, 1)\n        break;\n      case 6:\n        addExtraCoin(G, ctx, 2)\n        break;\n      case 7:\n        // No use power, just explanaition\n        break;\n      case 8:\n        addExtraCoin(G, ctx, 3)\n        break;\n      default:\n        break;\n    }\n  }\n}","import {getCurrentCharacter, findPlayerWithCharacter, EndTurn} from './Moves';\n\nexport function RemoveSecretFromPlayer(G, ctx, playerID) {\n  //return G with out secret from other players.\n  //not working locally\n  const newSecrets = {...G.secret};\n\n  for (const key in newSecrets) {\n    console.log('key: ', key, ' PlayerID: ', playerID);\n    if (key !== playerID) {\n      newSecrets[key] = [];\n    }\n  }\n\n  return {...G, secret: newSecrets};\n}\n\n/**\n * Returns a shifted array for Draw Phase, the player with the crown starts and goes clockwise.\n * When number of players is 2-3 they choose 2 characters.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n * @returns {array} playerOrder - Order of players in Draw Phase\n */\nexport function GetPlayerOrderDrawPhase(G, ctx) {\n  console.log('Entered GetPlayerOrderDrawPhase');\n  let playerOrder = [...Array(ctx.numPlayers).keys()];\n  let numPlayers = ctx.numPlayers;\n  if (numPlayers < 4) {\n    let doubleTurn = [...Array(ctx.numPlayers).keys()];\n    playerOrder = playerOrder.concat(doubleTurn);\n  }\n  for (let i = 0; i < G.playerWithCrown; i++) {\n    const element = playerOrder.shift();\n    playerOrder.push(element);\n  }\n  return playerOrder;\n}\n\n/**\n * Returns the ordern in which the players will take turns depending on which character they chose,\n * if they are 2-3 players they play twice.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n * @returns {array} playerOrder - Order of players in Play Phase\n */\nexport function GetPlayerOrderPlayPhase(G, ctx) {\n  let dict = {};\n  let playerWithCrown = -1;\n  for (let i = 0; i < ctx.numPlayers; i++) {\n    for (let j = 0; j < G.players[i].chosenCharacter.length; j++) {\n      let key = i + j * ctx.numPlayers;\n      dict[key] = G.players[i].chosenCharacter[j].order;\n    }\n  }\n\n  // https://stackoverflow.com/questions/1069666/sorting-object-property-by-values\n  let playerOrder = Object.keys(dict).sort(function (a, b) {\n    return dict[a] - dict[b];\n  });\n  if (ctx.numPlayers < 4) {\n    for (let i = 0; i < playerOrder.length; i++) {\n      playerOrder[i] = playerOrder[i] % ctx.numPlayers;\n    }\n  }\n\n  // Maps keys to Int.\n  playerOrder = playerOrder.map(function (x) {\n    return parseInt(x, 10);\n  });\n  console.log('GetPlayerOrderPlayPhase');\n  return playerOrder;\n}\n\nfunction getRndInteger(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nfunction isKing(G, indx) {\n  let isKing = false;\n  if (G.deckOfCharacters[indx].order === 4) {\n    isKing = true;\n  }\n  return isKing;\n}\n\n/**\n * Intial set up for any number of players to start choosing characters.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n */\nexport function SetDrawPhase(G, ctx) {\n  var randomNumber = Math.floor(Math.random() * 8); //random between 0 to 8\n  G.faceDownCharacterCards.push(G.deckOfCharacters.splice(randomNumber, 1)[0]);\n  if (ctx.numPlayers < 6 && ctx.numPlayers > 3) {\n    randomNumber = Math.floor(Math.random() * 7);\n    while (isKing(G, randomNumber)) {\n      randomNumber = Math.floor(Math.random() * 7);\n    }\n    G.faceUpCharacterCards.push(G.deckOfCharacters.splice(randomNumber, 1)[0]);\n    if (ctx.numPlayers === 4) {\n      randomNumber = randomNumber = Math.floor(Math.random() * 6);\n      while (isKing(G, randomNumber)) {\n        randomNumber = Math.floor(Math.random() * 6);\n      }\n      G.faceUpCharacterCards.push(G.deckOfCharacters.splice(randomNumber, 1)[0]);\n    }\n    return G;\n  }\n}\n\n/**\n * The draw phase finished when deck of characters is empty in any case.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n */\nexport function IsDrawPhaseOver(G, ctx) {\n  let phaseIsComplete = G.deckOfCharacters.length === 0;\n  return phaseIsComplete;\n}\n\n/**\n * Function called at the start of each players action turn. This checks when the player was mugged or murdered and moves the crown.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n */\nexport function BeginPlayTurn(G, ctx) {\n  if (G.players[ctx.currentPlayer].chosenCharacter[0].order === 4) {\n    G.playerWithCrown = ctx.currentPlayer;\n  }\n\n  if (getCurrentCharacter(G, ctx) === G.murderedCharacter) {\n    console.log(\n      '<-------Player :' +\n        ctx.currentPlayer +\n        ' was murdered and lost turn with character: ' +\n        getCurrentCharacter(G, ctx),\n    );\n    EndTurn(G, ctx);\n    return G;\n  }\n\n  if (getCurrentCharacter(G, ctx) === G.muggedCharacter.muggedToCharacter) {\n    if (G.muggedCharacter.muggedToCharacter === G.murderedCharacter) {\n      console.log('Can not mugg dead people');\n    } else {\n      console.log('<-------Player :' + ctx.currentPlayer + ' was mugged: ');\n      let muggedPlayer = findPlayerWithCharacter(\n        G,\n        ctx,\n        G.muggedCharacter.muggedToCharacter,\n      );\n      G.players[G.muggedCharacter.muggedFromPlayer].coins =\n        G.players[G.muggedCharacter.muggedFromPlayer].coins +\n        G.players[muggedPlayer].coins;\n      G.players[muggedPlayer].coins = 0;\n    }\n  }\n\n  return G;\n}\n\n/**\n * Orders arr of player when two caracter are chosen.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n */\nexport function SetPlayPhase(G, ctx) {\n  let newPlayers = {...G.players};\n  if (ctx.numPlayers < 4) {\n    for (const key in newPlayers) {\n      newPlayers[key].chosenCharacter.sort(function (a, b) {\n        return a.order - b.order;\n      });\n    }\n  }\n  return {...G, players: newPlayers};\n}\n\nexport function IsPlayPhaseOver(G, ctx) {\n  // Considering that each play turn the character card is returned to deck of character from player who used it.\n  let deckCount =\n    G.deckOfCharacters.length +\n    G.faceDownCharacterCards.length +\n    G.faceUpCharacterCards.length;\n  return deckCount === 8;\n}\n\n/**\n * Cleans faceDownCharacterCards, faceUpCharacterCards so that deckOfCharacters is full again with 8 characters.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n */\nexport function CleanPlayPhase(G, ctx) {\n  // reset murdered character per play phase.\n  G.murderedCharacter = -1;\n  G.muggedCharacter = {muggedFromPlayer: -1, muggedToCharacter: -1};\n\n  for (let i = 0; i < ctx.numPlayers; i++) {\n    while (G.players[i].chosenCharacter.length !== 0) {\n      G.deckOfCharacters.push(G.players[i].chosenCharacter.pop());\n    }\n  }\n\n  while (G.faceDownCharacterCards.length !== 0) {\n    G.deckOfCharacters.push(G.faceDownCharacterCards.pop());\n  }\n\n  while (G.faceUpCharacterCards.length !== 0) {\n    G.deckOfCharacters.push(G.faceUpCharacterCards.pop());\n  }\n\n  return G;\n}\n\n/**\n * Function called to check if a game is finished by some player who built 7 cities.\n * @param {any} G - Game State\n * @param {any} ctx - Game context\n * @returns {boolean} gameIsOver - If a player finished building 7 districts\n */\nexport function IsGameOver(G, ctx) {\n  let gameIsOver = false;\n  if (G.finishedFirst !== -1 && ctx.phase === \"drawPhase\") {\n    gameIsOver = true;\n  }\n  // might have to calculate here the scores. and send back to ctx.gameover\n  return gameIsOver;\n}\n\nexport function GameOver(G, ctx) {\n  let scores = {};\n  \n  // scoring and all other things.\n  // a) player point equal to cost of all build districts.\n  // b) if it has one distric of each color +3 points\n  // c) if finished building at least 7 building +2 points\n  //    if it was the first +4 points.\n  // if tie the player with most gold coins winds.\n  // set\n}\n\nexport function GetCurrentSituation(G, ctx) {\n  console.log('Entered GetCurrentSituation');\n  // TODO sets the current situation to all other users.\n  // like, it is your turn, or it is player 0's turn, etc.\n  let currentSituation\n  currentSituation = {\n    phase: ctx.phase,\n    activePlayer: ctx.activePlayers, \n  }\n  return currentSituation;\n}","import {CreateDeckOfDistricts, CreateDeckOfCharacters} from './Cards';\nimport {\n  GetPlayerOrderDrawPhase,\n  GetPlayerOrderPlayPhase,\n  SetDrawPhase,\n  IsDrawPhaseOver,\n  BeginPlayTurn,\n  SetPlayPhase,\n  IsPlayPhaseOver,\n  CleanPlayPhase,\n  GetCurrentSituation,\n  RemoveSecretFromPlayer,\n  IsGameOver,\n  GameOver,\n} from './Logic';\nimport {\n  ChooseCharacter,\n  TakeCoin,\n  TakeDistrictCard,\n  BuildDistrict,\n  SkipOrEndStage,\n  EndTurn,\n  UseCharacterPower,\n  WarlordPower,\n} from './Moves';\nimport {GAME_NAME} from './config';\n// G {\n//   pileOfCoins : 30,\n//   deckOfDistricts: [districtCard],\n//   deckOfCharacters: [characterCard],\n//   faceDownCharacterCards: [characterCard],\n//   faceUpCharacterCards: [characterCard],\n//   playerWithCrown : Int,\n//   finishedFirst: -1,\n//   murderedCharacter: -1,\n//   muggedCharacter = {muggedFromPlayer: -1, muggedToCharacter: -1},\n//   secret: {\n//      0 : {\n//        hand: [districtCard]\n//      },\n//      ...\n//   },\n//   players : { // In round table sit order\n//      0 : {\n//            playerstate with secret and non\n//            coins: Int,\n//            builtCity: [districtCard],\n//            handCount : Int,\n//            chosenCharacter: [characterCard],\n//            powerUsed: bool,\n//            districtBuiltOnTurn: int,\n//          },\n//      1 : {},\n//      2 : {},\n//         ...\n//   }\n// }\n\n/**git\n * Shuffles the given array using Durstenfeld Shuffle\n * @param {array} array - array to shuffle\n */\nfunction Shuffle(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n}\n\n/**\n * Gets the oldest player from the game to assign as King who goes\n * first in the game.\n * @returns {int} index of player.\n */\nfunction GetOldestPlayer() {\n  //TODO\n  return 0;\n}\n\n/**\n * Initial set up for one player.\n * @returns {any} JSON like set up for player.\n */\nfunction PlayerInitialSetUp() {\n  return {\n    coins: 2,\n    builtCity: [],\n    handCount: 4,\n    chosenCharacter: [],\n    powerUsed: false,\n    districtBuiltOnTurn: 0,\n  };\n}\n\n/**\n * Creates G, the game state and sets up for numPlayers in ctx\n * @param {any} ctx JSON like.\n * @returns {any} JSON like G the game state\n */\nfunction GameSetUp(ctx) {\n  let pileOfCoins = 30;\n  let deckOfDistricts = CreateDeckOfDistricts();\n  Shuffle(deckOfDistricts);\n  let deckOfCharacters = CreateDeckOfCharacters();\n  Shuffle(deckOfCharacters);\n  let faceDownCharacterCards = [];\n  let faceUpCharacterCards = [];\n  let playerWithCrown = GetOldestPlayer();\n  let finishedFirst = -1;\n  let murderedCharacter = -1;\n  let muggedCharacter = {muggedFromPlayer: -1, muggedToCharacter: -1};\n  let secret = {};\n  let players = {};\n  for (let i = 0; i < ctx.numPlayers; i++) {\n    players[i] = PlayerInitialSetUp();\n    secret[i] = {};\n    secret[i].hand = [];\n    for (let j = 0; j < 4; j++) {\n      secret[i].hand.push(deckOfDistricts.pop());\n    }\n    pileOfCoins = pileOfCoins - 2;\n  }\n  return {\n    pileOfCoins,\n    deckOfDistricts,\n    deckOfCharacters,\n    faceDownCharacterCards,\n    faceUpCharacterCards,\n    playerWithCrown,\n    finishedFirst,\n    murderedCharacter,\n    muggedCharacter,\n    secret,\n    players,\n  };\n}\n\nconst CitadelsGame = {\n  name: GAME_NAME,\n\n  setup: (ctx) => GameSetUp(ctx),\n\n  //playerView: (G, ctx, playerID) => (RemoveSecretFromPlayer(G, ctx, playerID)), //not sure it works yet.\n\n  phases: {\n    drawPhase: {\n      turn: {\n        order: {\n          // Get the initial value of playOrderPos.\n          // This is called at the beginning of the phase.\n          first: (G, ctx) => 0,\n          // Get the next value of playOrderPos.\n          // This is called at the end of each turn.\n          // The phase ends if this returns undefined.\n          next: (G, ctx) => (ctx.playOrderPos + 1) % ctx.numPlayers,\n          playOrder: (G, ctx) => GetPlayerOrderDrawPhase(G, ctx),\n        },\n        moveLimit: 1,\n      },\n      onBegin: (G, ctx) => SetDrawPhase(G, ctx), //needs test\n      moves: {ChooseCharacter},\n      endIf: (G, ctx) => IsDrawPhaseOver(G, ctx),\n      next: 'playPhase',\n      start: true,\n    },\n\n    playPhase: {\n      turn: {\n        activePlayers: {\n          currentPlayer: {stage: 'takeActionStage'},\n          next: {\n            currentPlayer: {stage: 'takeActionStage'},\n          },\n        },\n        onBegin: (G, ctx) => BeginPlayTurn(G, ctx),\n        order: {\n          first: (G, ctx) => 0,\n          next: (G, ctx) => (ctx.playOrderPos + 1) % ctx.numPlayers,\n          playOrder: (G, ctx) => GetPlayerOrderPlayPhase(G, ctx),\n        },\n        stages: {\n          takeActionStage: {\n            moves: {TakeCoin, TakeDistrictCard, UseCharacterPower},\n            next: 'buildStage',\n          },\n          buildStage: {\n            moves: {BuildDistrict, SkipOrEndStage, UseCharacterPower},\n          },\n          extraStage: {\n            moves: {WarlordPower, EndTurn},\n          },\n        },\n      },\n      onBegin: (G, ctx) => SetPlayPhase(G, ctx),\n      endIf: (G, ctx) => IsPlayPhaseOver(G, ctx),\n      onEnd: (G, ctx) => CleanPlayPhase(G, ctx), //needs test\n      next: 'drawPhase',\n    },\n  },\n\n  minPlayers: 2,\n  maxPlayers: 7,\n\n  endIf: (G, ctx) => IsGameOver(G, ctx),\n\n  onEnd: (G, ctx) => GameOver(G, ctx),\n\n  // Disable undo feature for all the moves in the game\n  disableUndo: true,\n};\n\nexport default CitadelsGame;\n","function IsMyTurn(currentPlayer, playerID) {\n  let isMyTurn = false;\n  if (currentPlayer === playerID) {\n    isMyTurn = true;\n  }\n  return isMyTurn\n}\n\nfunction HashOfString(string) {\n  var hash = 0, i, chr;\n    for (i = 0; i < string.length; i++) {\n      chr   = string.charCodeAt(i);\n      hash  = ((hash << 5) - hash) + chr;\n      hash |= 0; // Convert to 32bit integer\n    }\n    return hash;\n}\n\nfunction FindPlayerWithCharacter(G, numPlayers, characterOrder) {\n  for (let i = 0; i < numPlayers; i++) {\n    if (G.players[i].chosenCharacter.some(e => e.order === characterOrder)){\n      return i\n    }    \n  }\n  return -1;\n}\n\n/**\n * Utility function check weather the player still can build.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nfunction CanBuild(G, ctx) {\n  let canBuild = false;\n  if(G.players[ctx.currentPlayer].districtBuiltOnTurn === 0 || (G.players[ctx.currentPlayer].districtBuiltOnTurn < 3 && getCurrentCharacter(G, ctx) === 7)){\n    canBuild = true;\n  }\n  return canBuild;\n}\n\n/**\n * Utility function to get current character from player. This works given that choosen characters are sorted in setPlayPhase() and after each turn the character is returned to deck of characters.\n * @param {G} G - Game state provided by boardGame.io\n * @param {ctx} ctx - ctx states provided by boardGame.io\n */\nfunction getCurrentCharacter(G, ctx) {\n  console.log(\"called getCurrentChar with:\" + ctx.currentPlayer)\n  let currentCharater = -1;\n  currentCharater = G.players[ctx.currentPlayer].chosenCharacter[0].order;\n  return currentCharater\n}\n\nfunction GetCurrentSituation(G, ctx) {\n  console.log('Entered GetCurrentSituation');\n  // TODO sets the current situation to all other users.\n  // like, it is your turn, or it is player 0's turn, etc.\n  let currentSituation\n  currentSituation = {\n    phase: ctx.phase,\n    activePlayer: ctx.activePlayers, \n  }\n  return currentSituation;\n}\n\nexport {IsMyTurn, HashOfString, FindPlayerWithCharacter, CanBuild, GetCurrentSituation};","/*\n * Copyright 2018 The boardgame.io Authors\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Logo = ({ width, height }) => (\n  <svg\n    width={width || 128}\n    height={height || 128}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 128 128\"\n  >\n    <path\n      d=\"M64,120.37,15.27,92.28V35.91L64,7.82l48.73,28.09V92.28Z\"\n      fill=\"#373748\"\n    />\n    <path\n      fill=\"#000\"\n      d=\"M64,124,12,94V34L64,4l52,30V94ZM18.33,90.37,64,116.74l45.67-26.37V37.63L64,11.26,18.33,37.63Z\"\n    />\n    <path\n      d=\"M81.77,43.17c5.92,0,10.51,1.72,13.57,5.16,3.25,3.44,4.77,8.41,4.77,14.71q0,10.32-5.15,16.06c-3.44,3.82-8.22,5.73-14.53,5.73-5.92,0-10.51-1.72-13.56-5.35-3.25-3.63-4.78-8.6-4.78-15.29s1.72-12,5.16-15.67S75.46,43.17,81.77,43.17Zm-.57,5.16c-4.4,0-7.45,1.15-9.56,3.63s-3,6.31-3,11.66c0,5.73,1,9.74,3,12.42,2.11,2.48,5.16,3.82,9.56,3.82s7.64-1.34,9.74-3.82,3.25-6.5,3.25-11.85c0-5.54-1.15-9.55-3.25-12C88.65,49.48,85.59,48.33,81.2,48.33Z\"\n      fill=\"#fff\"\n    />\n    <path\n      d=\"M39.35,71.45l.19,12.8H33.43L33.62,72l-.19-28.48h6.11l-.19,27.9Z\"\n      fill=\"#fff\"\n    />\n  </svg>\n);\n\nLogo.propTypes = {\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default Logo;\n","/*\n * Copyright 2018 The boardgame.io Authors\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\n\nimport React from 'react';\n\nconst UIContext = React.createContext();\n\nexport default UIContext;\n","/*\n * Copyright 2017 The boardgame.io Authors\n *\n * Use of this source code is governed by a MIT-style\n * license that can be found in the LICENSE file or at\n * https://opensource.org/licenses/MIT.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport UIContext from './ui-context';\nimport { Draggable, DragComponent } from 'react-dragtastic';\nimport './card.css';\n\nexport function GetDraggable(props, classNames, cardStyle, onClick) {\n  /* eslint-disable-next-line react/display-name */\n  return ({ isActive, events }) => {\n    return (\n      <div\n        className={classNames.join(' ')}\n        style={{\n          ...props.style,\n          ...cardStyle,\n          opacity: isActive ? 0 : 1,\n          pointerEvents: isActive ? 'none' : 'all',\n        }}\n        onClick={onClick}\n        {...events}\n      >\n        {props.isFaceUp ? props.front : props.back}\n      </div>\n    );\n  };\n}\n\nexport function GetDragComponent(\n  props,\n  classNames,\n  ref,\n  isOverAcceptedCallback\n) {\n  /* eslint-disable-next-line react/display-name, react/prop-types */\n  return ({ x, y, isOverAccepted, currentlyHoveredDroppableId }) => {\n    const classes = [...classNames];\n    /* eslint-disable-next-line react/prop-types */\n    let content = props.back;\n\n    isOverAcceptedCallback(isOverAccepted);\n\n    /* eslint-disable-next-line react/prop-types */\n    if (props.isFaceUp) {\n      /* eslint-disable-next-line react/prop-types */\n      content = props.front;\n    }\n\n    if (currentlyHoveredDroppableId !== null) {\n      if (isOverAccepted) {\n        classes.push('accept');\n      } else {\n        classes.push('reject');\n      }\n    }\n\n    return (\n      <div\n        className={classes.join(' ')}\n        ref={ref}\n        style={{\n          cursor: 'pointer',\n          borderWidth: 2,\n          pointerEvents: 'none',\n          position: 'fixed',\n          zIndex: 2000000000,\n          boxShadow: '5px 5px 5px #eee',\n          left: x - 50,\n          top: y - 70,\n        }}\n      >\n        {content}\n      </div>\n    );\n  };\n}\n/* eslint-enable */\n\nexport class CardImpl extends React.Component {\n  static propTypes = {\n    isFaceUp: PropTypes.bool,\n    front: PropTypes.node,\n    back: PropTypes.node,\n    className: PropTypes.string,\n    dragZone: PropTypes.string,\n    style: PropTypes.any,\n    onClick: PropTypes.func,\n    context: PropTypes.any,//.isRequired,\n    inDeck: PropTypes.bool,\n    data: PropTypes.any,\n    deckPosition: PropTypes.number,\n    highlighted: PropTypes.any,\n  };\n\n  static defaultProps = {\n    onClick: () => {},\n    isFaceUp: false,\n    dragZone: 'bgio-card',\n    front: <div className=\"bgio-card__front\">Card</div>,\n    back: (\n      <div className=\"bgio-card__back\">\n        <Logo width=\"48\" />\n      </div>\n    ),\n  };\n\n  constructor(props) {\n    super(props);\n    //this.id = props.context.genID();\n    this.dragComponentRef = React.createRef();\n    this.isOverAccepted = false;\n  }\n\n  onClick = () => {\n    this.props.onClick(this.props.data);\n  };\n\n  render() {\n    const classNames = ['bgio-card'];\n    if (this.props.className) {\n      classNames.push(this.props.className);\n    }\n\n    let cardStyle = {};\n\n    if (this.props.inDeck) {\n      cardStyle = {\n        position: 'absolute',\n        zIndex: this.props.deckPosition,\n      };\n    }\n\n    return (\n      <div>\n        <Draggable\n          id={this.id}\n          type={this.props.dragZone}\n          data={this.props.data}\n        >\n          {GetDraggable(this.props, classNames, cardStyle, this.onClick)}\n        </Draggable>\n\n        <DragComponent for={this.id}>\n          {GetDragComponent(\n            this.props,\n            classNames,\n            this.dragComponentRef,\n            o => (this.isOverAccepted = o)\n          )}\n        </DragComponent>\n      </div>\n    );\n  }\n}\n\nconst Card = props => (\n  <UIContext.Consumer>\n    {context => <CardImpl {...props} context={context} />}\n  </UIContext.Consumer>\n);\n\nexport { Card };\n","import React, { useState, useContext } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, Checkbox, Select, InputLabel, MenuItem } from '@material-ui/core';\nimport { Card } from '../bgioComponents/card';\nimport UIContext from '../bgioComponents/ui-context';\nimport { HashOfString, CanBuild } from './Utiliy';\n\nfunction ChooseCharacterDialog({deckOfCharacters,faceDownCharacterCards,faceUpCharacterCards, ChooseCharacter}) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  // TODO : implement for two players in which you choose two.\n  const [chosenCharacter, setChosenCharacter] = useState({\n    value1: -1,\n    value2: -1,\n  });\n  const uicontext = useContext(UIContext);\n  \n  const handleClickOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleClose = () => {\n    setDialogOpen(false);\n    ChooseCharacter(chosenCharacter.value1, chosenCharacter.value2);\n  }\n\n  let cardsToChoose = [];\n\n  // Rendering face down cards\n  faceDownCharacterCards.forEach(cardElement => {\n    const image = <img src={cardElement.back} alt=\"Card-Face-Down\" />\n    cardsToChoose.push(\n      <Card\n        back={image}\n        isFaceUp={false}\n        canHover={false}\n        className='card'\n        key={HashOfString(cardElement.name)}\n        context={uicontext}\n      />\n    );\n  });\n  cardsToChoose.push(<br></br>);\n\n  // Render face up cards\n  faceUpCharacterCards.forEach(cardElement => {\n    let keyIndx = 0;\n    const image = <img src={cardElement.front} alt={cardElement.name+\"-Card-Front\"} />\n    cardsToChoose.push(\n      <Card\n        front={image}\n        isFaceUp={true}\n        canHover={false}\n        className='card'\n        key={cardElement.name}\n        context={uicontext}\n      />\n    );\n    keyIndx=keyIndx+1;\n  });\n  cardsToChoose.push(<br></br>);\n\n  // Reneder choosable cards\n  for (let index = 0; index < deckOfCharacters.length; index++) {\n    const image = <img src={deckOfCharacters[index].front} alt={deckOfCharacters[index].name+\"-Card-Front\"} />\n    cardsToChoose.push(\n      <Card\n        front={image}\n        isFaceUp={true}\n        canHover={true}\n        className='highlight'\n        key= {deckOfCharacters[index].name}\n        onClick={() => {setChosenCharacter({value1: index, value2: -1});console.log({index})}}\n        context={uicontext}\n      />\n    );\n  }\n\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n        Choose Character\n      </Button>\n      <Dialog open={dialogOpen}\n        disableBackdropClick={true}\n        disableEscapeKeyDown={true}\n        fullWidth={true}\n        aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Choose Character</DialogTitle>\n        <DialogContent>\n          {cardsToChoose}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Choose\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nfunction ShowPlayers({numPlayers, setPayload, currentPlayer}) {\n  let players = []\n  for (let index = 0; index < numPlayers; index++) {\n    if (index == currentPlayer) {\n      const image = <img src={\"\"} alt={\"Card-Face-Down\"} />\n      players.push(\n        <Card\n          back={image}\n          isFaceUp={false}\n          canHover={false}\n          className='card'\n          key={\"Player \"+index}\n        />\n      );\n    } else {\n      const image = <img src={\"\"} alt={\"Player \"+index} />\n      players.push(\n        <Card\n          front={image}\n          isFaceUp={true}\n          canHover={true}\n          className='highlight'\n          key= {\"Player \"+index}\n          onClick={() => {setPayload({isOptionA: true, changeHandsWith: index, changeMyHandIndx: []});}}\n        />\n      );\n    }\n  }\n\n  return(\n    players\n  );\n}\n\nfunction ShowHand({hand, setPayload}) {\n  let handCards = [];\n  const [selectedCards, setSelectedCards] = useState([]);\n\n  const handleClick = (index) => {\n    // TODO : highlight cards\n    let containIndx = selectedCards.findIndex(element => element === index);\n    if (containIndx !== -1) {\n      setSelectedCards([...selectedCards.slice(0,containIndx), selectedCards.slice(0,containIndx)])\n    } else {\n      setSelectedCards([...selectedCards, index]);\n    }\n\n    setPayload({isOptionA: false, changeHandsWith: -1, changeMyHandIndx: selectedCards});\n  }\n\n  for (let index = 0; index < hand.length; index++) {\n    const image = <img src={hand[index].front} alt={hand[index].name+\"-Card-Front\"} />\n    handCards.push(\n      <Card\n        front={image}\n        isFaceUp={true}\n        canHover={true}\n        className='highlight'\n        key= {\"Player \"+index}\n        onClick={() => handleClick(index)}\n      />\n    );\n  }\n  \n  return(\n    handCards\n  );\n}\n\nfunction UseCharacterPowerDialog({characterNumber, murderedCharacter, numPlayers, hand, currentPlayer, useCharacterBtn, setUseCharacterBtn, UseCharacterPower}) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const uicontext = useContext(UIContext);\n  const [payload, setPayload] = useState();\n  const [checkBox, setCheckBox] = useState(false);\n\n  const backSrc = \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fback_gray.jpg?alt=media&token=7a1f8e7e-4a08-426a-9edd-09e60e22496a\";\n  const deck = [\n    {order: 1, name: \"Assasin\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fasesino.jpg?alt=media&token=03ceea66-dbc1-435d-b46e-1c1edd48b141\", back: backSrc},\n    {order: 2, name: \"Thief\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fladron.jpg?alt=media&token=dfd057fc-3073-40ce-9053-bad997173482\", back: backSrc},\n    {order: 3, name: \"Magician\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmago.jpg?alt=media&token=7ee85db5-3682-486d-820b-2225fce7aea5\", back: backSrc},\n    {order: 4, name: \"King\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Frey.jpg?alt=media&token=60239d45-6c7c-424c-9b77-e2e10c38ad86\", back: backSrc},\n    {order: 5, name: \"Bishop\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fobispo.jpg?alt=media&token=fda603aa-89c4-4692-b09a-e823940d2409\", back: backSrc},\n    {order: 6, name: \"Merchant\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fmercader.jpg?alt=media&token=2705ddf3-cf31-47c5-9a79-56f462f43085\", back: backSrc},\n    {order: 7, name: \"Architect\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Farquitecto.jpg?alt=media&token=ee9cee94-7064-4d4e-8f81-760e2df8c772\", back: backSrc},\n    {order: 8, name: \"Warlord\", front: \"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fcharacters%2Fbase%2Fguerrero.jpg?alt=media&token=f56f6050-9c7f-47df-93f6-3b8d157f4b89\", back: backSrc},\n  ]\n\n  const handleClickOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleClose = () => {\n    setDialogOpen(false);\n    setUseCharacterBtn(true);\n    UseCharacterPower(payload);\n  }\n\n  const handleChange = (event) => {\n    setCheckBox(event.target.checked);\n  }\n\n  let dialogContent = [];\n\n  switch (characterNumber) {\n    case 1:\n      console.log(\"ENTEred\");\n        for (let index = 1; index < deck.length; index++) {\n          const image = <img src={deck[index].front} alt={deck[index].name+\"-Card-Front\"} />\n          dialogContent.push(\n            <Card\n              front={image}\n              isFaceUp={true}\n              canHover={true}\n              className='highlight'\n              key= {deck[index].name}\n              onClick={() => setPayload(index)}\n              context={uicontext}\n            />\n          );\n        }\n        break;\n      case 2:\n        for (let index = 2; index < deck.length; index++) {\n          if (index === murderedCharacter) {\n            const image = <img src={deck[index].back} alt={\"Card-Face-Down\"} />\n            dialogContent.push(\n              <Card\n                back={image}\n                isFaceUp={false}\n                canHover={false}\n                className='card'\n                key={HashOfString(deck[index].name)}\n                context={uicontext}\n              />\n            );\n          } else {\n            const image = <img src={deck[index].front} alt={deck[index].name+\"-Card-Front\"} />\n            dialogContent.push(\n              <Card\n                front={image}\n                isFaceUp={true}\n                canHover={true}\n                className='highlight'\n                key= {deck[index].name}\n                onClick={() => {setPayload(index);}}\n                context={uicontext}\n              />\n            );\n          } \n        }\n        break;\n      case 3:\n        dialogContent.push(\n          <div>\n            <Checkbox\n              label=\"Option A\"\n              checked={checkBox}\n              onChange={handleChange}\n              name=\"checkOption\"\n              color=\"primary\"\n            />\n            { checkBox \n            ? <ShowPlayers numPlayers={numPlayers} setPayload={setPayload} currentPlayer={currentPlayer}></ShowPlayers>\n            : <ShowHand hand={hand} setPayload={setPayload}></ShowHand>\n            }\n          </div>\n        );\n        break;\n    }\n\n  return (\n    <div>\n      { characterNumber > 3\n        ? <div>\n            <Button variant=\"outlined\" color=\"primary\" disabled={useCharacterBtn} onClick={ () => UseCharacterPower(-1)}>\n              Use Character Power\n            </Button>\n          </div>\n        : <div>\n            <Button variant=\"outlined\" color=\"primary\" disabled={useCharacterBtn} onClick={handleClickOpen}>\n              UseCharacterPower\n            </Button>\n            <Dialog open={dialogOpen}\n              fullWidth={true}\n              aria-labelledby=\"form-dialog-title\">\n              <DialogTitle id=\"form-dialog-title\">Use Power</DialogTitle>\n              <DialogContent>\n                {dialogContent}\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={handleClose} color=\"primary\">\n                  Use Power\n                </Button>\n              </DialogActions>\n            </Dialog>\n          </div>\n        }\n    </div>\n  )\n}\n\nfunction TakeActionDialog({pileOfCoins, deckOfDistricts, setEndStageBtn, setBuildDistrictBtn, takeActionBtn, setTakeActionBtn,  TakeCoin, TakeDistrictCard}) {\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const uicontext = useContext(UIContext);\n  const [action, setAction] = useState(\"\");\n\n  const handleClickOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleClose = () => {\n    setDialogOpen(false);\n    setBuildDistrictBtn(false);\n    setEndStageBtn(false);\n    setTakeActionBtn(true);\n    \n    if (action === \"takeCoin\") {\n      TakeCoin();\n    } else if (action === \"takeDistrict0\") {\n      TakeDistrictCard(true);\n    }else if (action === \"takeDistrict1\") {\n      TakeDistrictCard(false);\n    }\n    \n  }\n\n  let takeActionOptions = []\n\n  // Adding option for coins\n  if (pileOfCoins>2) {\n    if(pileOfCoins === 1) {\n      const image = <img src={\"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Fone_coin.jpg?alt=media&token=5c54886b-6975-440f-84d9-98f372045981\"} alt={\"One-Coin-Card\"} />\n      takeActionOptions.push(\n        <Card\n          front={image}\n          isFaceUp={true}\n          canHover={true}\n          className='highlight'\n          key= {\"One-Coin\"}\n          onClick={() => {setAction(\"takeCoin\")}}\n          context={uicontext}\n        />\n      );\n    } else {\n      const image = <img src={\"https://firebasestorage.googleapis.com/v0/b/citadels-ldaw.appspot.com/o/cards%2Ftwo_coin.jpg?alt=media&token=71911bbd-817d-44ec-9922-da8af74e91ee\"} alt={\"Two-Coin-Card\"} />\n      takeActionOptions.push(\n        <Card\n          front={image}\n          isFaceUp={true}\n          canHover={true}\n          className='highlight'\n          key= {\"Two-Coins\"}\n          onClick={() => {setAction(\"takeCoin\")}}\n          context={uicontext}\n        />\n      );\n    }\n  }\n\n  // Adding district card options\n  if (deckOfDistricts.length > 2) {\n    if(deckOfDistricts.length !== 1) {\n      const image = <img src={deckOfDistricts[1].front} alt={deckOfDistricts[1].name+\"-Card-Front\"} />\n      takeActionOptions.push(\n        <Card\n          front={image}\n          isFaceUp={true}\n          canHover={true}\n          className='highlight'\n          key= {deckOfDistricts[1].name}\n          onClick={() => {setAction(\"takeDistrict1\")}}\n          context={uicontext}\n        />\n      );\n    }\n    const image = <img src={deckOfDistricts[0].front} alt={deckOfDistricts[0].name+\"-Card-Front\"} />\n    takeActionOptions.push(\n      <Card\n        front={image}\n        isFaceUp={true}\n        canHover={true}\n        className='highlight'\n        key= {deckOfDistricts[0].name}\n        onClick={() => {setAction(\"takeDistrict0\")}}\n        context={uicontext}\n      />\n    );\n  }\n\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" disabled={takeActionBtn} onClick={handleClickOpen}>\n        Take Action\n      </Button>\n      <Dialog open={dialogOpen}\n        fullWidth={true}\n        aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Choose which action</DialogTitle>\n        <DialogContent>\n          {takeActionOptions}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Action\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nfunction BuildDistricDialog({props, hand, coins, buildDistrictBtn, setBuildDistrictBtn, BuildDistrict}) {\n  \n  const [districtToBuild, setDistrictToBuild] = useState(-1);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const uicontext = useContext(UIContext);\n\n  const handleClickOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleClick = (index, cost, coins) => {\n    // TODO: Highlight current card and not others\n    if(cost <= coins) {\n      setDistrictToBuild(index);\n    } else {\n      console.log(\"Can not use because it is expensive. show alert.\")\n    }\n  }\n\n  const handleClose = (props) => {\n    // if(CanBuild(props.G, props.ctx)){\n    //   setBuildDistrictBtn(false);\n    // } else {\n    //   setBuildDistrictBtn(true);\n    // }\n    setBuildDistrictBtn(true);\n    setDialogOpen(false);\n    BuildDistrict(districtToBuild);\n  }\n\n  let buildOptions = []\n\n  for (let index = 0; index < hand.length; index++) {\n    const image = <img src={hand[index].front} alt={hand[index].name+\"-Card-Front\"} />\n    buildOptions.push(\n      <Card\n        front={image}\n        isFaceUp={true}\n        canHover={true}\n        className='highlight'\n        key= {hand[index].name+\"-Card-Front\"}\n        onClick={() => handleClick(index, hand[index].cost, coins)}\n        context={uicontext}\n      />\n    );\n  }\n\n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" disabled={buildDistrictBtn} onClick={() => handleClickOpen}>\n        Build Distric\n      </Button>\n      <Dialog open={dialogOpen}\n        fullWidth={true}\n        aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Build District</DialogTitle>\n        <DialogContent>\n          {buildOptions}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => handleClose(props)} color=\"primary\">\n            Build\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nfunction PlayerHand({hand, coins, setPayLoad, playerID}) {\n  let handCards = [];\n\n  const handleClick = (index) => {\n    setPayLoad({player: playerID, builtCityHandIndx: index});\n  }\n\n  const handleClickNot = (index) => {\n    // TODO: show alert or highlight red\n    console.log(\"Not sufficient to destroy\");\n  }\n\n  for (let index = 0; index < hand.length; index++) {\n    if (hand[index].cost > coins) {\n      const image = <img src={hand[index].front} alt={hand[index].name+\"-Card-Front\"} />\n      handCards.push(\n        <Card\n          front={image}\n          isFaceUp={true}\n          canHover={true}\n          className='highlight'\n          key= {hand[index].name}\n          onClick={() => handleClickNot(index)}\n        />\n      );\n    } else {\n      const image = <img src={hand[index].front} alt={hand[index].name+\"-Card-Front\"} />\n      handCards.push(\n        <Card\n          front={image}\n          isFaceUp={true}\n          canHover={true}\n          className='highlight'\n          key= {hand[index].name}\n          onClick={() => handleClick(index)}\n        />\n      );\n    }\n  }\n  \n  return(\n    handCards\n  );\n}\n\nfunction DestroyDistricDialog({hands, bishopPlayerID, coins, WarlordPower, EndTurn, setEndStageBtn, setBuildDistrictBtn, setTakeActionBtn, setUseCharacterBtn}) {\n  const [destroyBtn, setDestroyBtn] = useState(true);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [payLoad, setPayLoad] = useState({player: -1, builtCityHandIndx: -1})\n  const [playerID, setPlayerID] = useState(0);\n  const uicontext = useContext(UIContext);\n\n  const handleClickOpen = () => {\n    setDialogOpen(true);\n  };\n\n  const handleClose = () => {\n    setDestroyBtn(true);\n    setDialogOpen(false);\n    setEndStageBtn(true);\n    setBuildDistrictBtn(true);\n    setTakeActionBtn(false);\n    setUseCharacterBtn(false);\n    WarlordPower(payLoad);\n  }\n\n  const handleCloseEnd = () => {\n    setDestroyBtn(true);\n    setDialogOpen(false);\n    setEndStageBtn(true);\n    setBuildDistrictBtn(true);\n    setTakeActionBtn(false);\n    setUseCharacterBtn(false);\n    EndTurn();\n  }\n\n  const handleChange = (event) => {\n    setPlayerID(event.target.value);\n  };\n\n  let menuItems = []\n\n  for (let index = 0; index < hands.length; index++) {\n    if(index !== bishopPlayerID) {\n      menuItems.push(\n        <MenuItem value={index}>Player {index}</MenuItem>\n      );\n    }\n  }\n\n  let distroyDialogContent = []\n\n  distroyDialogContent.push(\n    <div>\n      <InputLabel id=\"playerToDestroy\">Player Num</InputLabel>\n      <Select\n          labelId=\"playerToDestroy\"\n          id=\"playerToDestroy-select\"\n          value={playerID}\n          onChange={() => handleChange}\n        >\n          {menuItems}\n        </Select>\n        <PlayerHand hand={hands[playerID]} coins={coins} setPayLoad={setPayLoad} playerID={playerID}></PlayerHand>\n    </div>\n  );\n  \n  \n  return (\n    <div>\n      <Button variant=\"outlined\" color=\"primary\" disabled={destroyBtn} onClick={handleClickOpen}>\n        Destroy\n      </Button>\n      <Dialog open={dialogOpen}\n        fullWidth={true}\n        aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">Destroy Distric</DialogTitle>\n        <DialogContent>\n          {distroyDialogContent}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Destroy\n          </Button>\n          <Button onClick={handleCloseEnd} color=\"secondary\">\n            End Turn\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nexport { ChooseCharacterDialog, UseCharacterPowerDialog, TakeActionDialog, BuildDistricDialog, DestroyDistricDialog };","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\n\nimport {BiDollarCircle} from 'react-icons/bi';\nimport {FaCity} from 'react-icons/fa';\nimport {GiCardBurn} from 'react-icons/gi';\nimport {Tooltip} from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  root: {\n    width: 275,\n    padding: 8,\n    '&:last-child': {\n      paddingBottom: '8 !important',\n    },\n  },\n});\n\nfunction PlayerCard(props) {\n  const classes = useStyles();\n\n  console.log('Player Card');\n  console.log(props);\n\n  let citiesBuilt = [];\n  for (let index = 0; index < props.citiesBuilt.length; index++) {\n    citiesBuilt.push(props.citiesBuilt[index].name);\n  }\n\n  return (\n    <Card\n      className={classes.root}\n      style={{margin: '6px 0 6px 1px', backgroundColor: 'rgba(62, 0, 238, 0.6)'}}\n    >\n      <Typography variant=\"subtitle1\">{props.username}</Typography>\n      <Typography variant=\"subtitle1\">\n        {props.character.length !== 0 ? props.character[0].name : '???'}\n      </Typography>\n      <div\n        style={{\n          flex: '0 0 20%',\n          display: 'flex',\n          justifyContent: 'space-around',\n        }}\n      >\n        <Typography>\n          <BiDollarCircle /> {props.coins}\n        </Typography>\n        <Typography>\n          <GiCardBurn /> {props.cardsInHand}\n        </Typography>\n        <Tooltip title={citiesBuilt.length != 0 ? citiesBuilt : ''} placement=\"center\">\n          <Typography>\n            <FaCity /> {props.citiesBuilt.length}\n          </Typography>\n        </Tooltip>\n      </div>\n    </Card>\n  );\n}\n\nexport default PlayerCard;\n","import React, {useState} from 'react';\nimport {Button} from '@material-ui/core';\nimport {IsMyTurn, FindPlayerWithCharacter, GetCurrentSituation} from './Utiliy';\nimport {\n  ChooseCharacterDialog,\n  UseCharacterPowerDialog,\n  TakeActionDialog,\n  BuildDistricDialog,\n  DestroyDistricDialog,\n} from './Dialogs.react';\nimport PlayerCard from './PlayerCard.react';\nimport {Card} from '../bgioComponents/card';\n\nfunction PlayPhaseUI({props}) {\n  const [endStageBtn, setEndStageBtn] = useState(true);\n  const [buildDistrictBtn, setBuildDistrictBtn] = useState(true);\n  const [takeActionBtn, setTakeActionBtn] = useState(false);\n  const [useCharacterBtn, setUseCharacterBtn] = useState(false);\n  let devCharacterNumber = 8;\n\n  // if playphase:\n  //  render use character power which renders dialog depending on power for intput and get payload\n  //  render takeaction btn which shows dialiog to take coin or district and after choosing enable build distric btn and enable end or skip btn and if warlord enable destroy btn\n  //  render build distric btn disabled which shows dialog for building district\n  //  render skip or end stage btn disabled\n  //  if warlord enable destroy btn disabled disolay dialog for warlord.\n  return (\n    <div>\n      <UseCharacterPowerDialog\n        //characterNumber={devCharacterNumber}\n        characterNumber={\n          props.G.players[props.ctx.currentPlayer].chosenCharacter[0].order\n        }\n        murderedCharacter={props.G.murderedCharacter}\n        numPlayers={props.ctx.numPlayers}\n        currentPlayer={props.ctx.currentPlayer}\n        hand={props.G.secret[props.ctx.currentPlayer].hand}\n        useCharacterBtn={useCharacterBtn}\n        setUseCharacterBtn={setUseCharacterBtn}\n        UseCharacterPower={props.moves.UseCharacterPower}\n      ></UseCharacterPowerDialog>\n      <br></br>\n      <TakeActionDialog\n        pileOfCoins={props.G.pileOfCoins}\n        deckOfDistricts={props.G.deckOfDistricts}\n        setEndStageBtn={setEndStageBtn}\n        setBuildDistrictBtn={setBuildDistrictBtn}\n        takeActionBtn={takeActionBtn}\n        setTakeActionBtn={setTakeActionBtn}\n        TakeCoin={props.moves.TakeCoin}\n        TakeDistrictCard={props.moves.TakeDistrictCard}\n      ></TakeActionDialog>\n      <br></br>\n      <BuildDistricDialog\n        props={props}\n        hand={props.G.secret[props.ctx.currentPlayer].hand}\n        coins={props.G.players[props.ctx.currentPlayer].coins}\n        buildDistrictBtn={buildDistrictBtn}\n        setBuildDistrictBtn={setBuildDistrictBtn}\n        BuildDistrict={props.moves.BuildDistrict}\n      ></BuildDistricDialog>\n      <br></br>\n      {props.G.players[props.ctx.currentPlayer].chosenCharacter[0].order === 8 ? (\n        <DestroyDistricDialog\n          hands={props.G.secret}\n          bishopPlayerID={FindPlayerWithCharacter(\n            props.G.players,\n            props.ctx.numPlayers,\n            5,\n          )}\n          coins={props.G.players[props.ctx.currentPlayer].coins}\n          WarlordPower={props.moves.WarlordPower}\n          EndTurn={props.moves.EndTurn}\n          setEndStageBtn={setEndStageBtn}\n          setBuildDistrictBtn={setBuildDistrictBtn}\n          setTakeActionBtn={setTakeActionBtn}\n          setUseCharacterBtn={setUseCharacterBtn}\n        ></DestroyDistricDialog>\n      ) : (\n        <div></div>\n      )}\n      <br></br>\n      <Button\n        variant=\"outlined\"\n        color=\"primary\"\n        onClick={() => {\n          props.moves.SkipOrEndStage();\n          setEndStageBtn(true);\n          setBuildDistrictBtn(true);\n          setTakeActionBtn(false);\n          setUseCharacterBtn(false);\n        }}\n        disabled={endStageBtn}\n      >\n        End Turn\n      </Button>\n    </div>\n  );\n}\n\nfunction OtherPlayerTurn({props}) {\n  let situation = GetCurrentSituation(props.G, props.ctx);\n  // returns what is happening.\n  return (\n    <div>\n      <h1>Not your turn yet</h1>\n      <h1>We are on: {situation.phase} phase</h1>\n      <h1>{situation.activePlayer} is playing now</h1>\n    </div>\n  );\n}\n\nfunction Board(props) {\n  let devTurn = 'myTurn';\n  let devPhase = 'playPhase'; //\"playPhase\"\n\n  console.log(props);\n\n  let playerCards = [];\n  for (let index = 0; index < Object.keys(props.G.players).length; index++) {\n    if (props.playerID != index) {\n      playerCards.push(\n        <PlayerCard\n          key={index}\n          username={`Jugador ${index}`}\n          character={\n            props.ctx.currentPlayer == index\n              ? props.G.players[index].chosenCharacter\n              : Array(0)\n          }\n          coins={props.G.players[index].coins}\n          cardsInHand={props.G.players[index].handCount}\n          citiesBuilt={props.G.players[index].builtCity}\n        />,\n      );\n    }\n  }\n\n  let districtsInMyHand = [];\n  for (let index = 0; index < props.G.secret[props.playerID].hand.length; index++) {\n    console.log('Carta ' + index);\n    const image = (\n      <img\n        src={props.G.secret[props.playerID].hand[index].imageURL}\n        alt={props.G.secret[props.playerID].hand[index].name + '-Card-Front'}\n        width=\"100px\"\n        height=\"140px\"\n      />\n    );\n    districtsInMyHand.push(\n      <Card\n        isFaceUp={true}\n        front={image}\n        canHover={true}\n        className=\"highlight\"\n        key={index}\n      />,\n    );\n  }\n\n  if (IsMyTurn(props.ctx.currentPlayer, props.ctx.playerID) || devTurn === 'myTurn') {\n    if (props.ctx.phase === 'drawPhase' || devPhase === 'drawPhase') {\n      return (\n        <div style={{display: 'flex'}}>\n          <div style={{flex: '0 0 20%'}}>{playerCards}</div>\n          {/* TODO: if two players choose two */}\n          <ChooseCharacterDialog\n            deckOfCharacters={props.G.deckOfCharacters}\n            faceDownCharacterCards={props.G.faceDownCharacterCards}\n            faceUpCharacterCards={props.G.faceUpCharacterCards}\n            ChooseCharacter={props.moves.ChooseCharacter}\n          ></ChooseCharacterDialog>\n          <div\n            style={{\n              width: '600px',\n              display: 'flex',\n              position: 'fixed',\n              left: '50%',\n              bottom: '50px',\n              transform: 'translateX(-50%)',\n            }}\n          >\n            {districtsInMyHand}\n          </div>\n        </div>\n      );\n    } else if (props.ctx.phase === 'playPhase' || devPhase === 'playPhase') {\n      return (\n        <div style={{display: 'flex'}}>\n          <div style={{flex: '0 0 20%'}}>{playerCards}</div>\n          <PlayPhaseUI props={props} />\n          <div\n            style={{\n              width: '600px',\n              display: 'flex',\n              position: 'fixed',\n              left: '50%',\n              bottom: '50px',\n              transform: 'translateX(-50%)',\n            }}\n          >\n            {districtsInMyHand}\n          </div>\n        </div>\n      );\n    }\n  }\n\n  if (props.ctx.gameover !== null) {\n    return <h1>GAME IS OVER WINNERS:...</h1>;\n  }\n\n  return (\n    <div style={{display: 'flex'}}>\n      <div style={{flex: '0 0 20%'}}>{playerCards}</div>\n      <OtherPlayerTurn props={props}></OtherPlayerTurn>\n      <div\n        style={{\n          width: '600px',\n          display: 'flex',\n          position: 'fixed',\n          left: '50%',\n          bottom: '50px',\n          transform: 'translateX(-50%)',\n        }}\n      >\n        {districtsInMyHand}\n      </div>\n    </div>\n  );\n}\n\nexport default Board;\n","import {Client} from 'boardgame.io/react';\nimport CitadelsGame from 'game/CitadelsGame';\nimport {SocketIO} from 'boardgame.io/multiplayer';\nimport Board from 'components/game/Board.react';\nimport {BGIO_SERVER_URL} from 'game/config/client';\n\nconst GameApp = Client({\n  game: CitadelsGame,\n  board: Board,\n  multiplayer: SocketIO({server: BGIO_SERVER_URL}),\n  debug: true,\n});\n\nexport default GameApp;","import React, {useContext, useState, useEffect, useCallback} from 'react';\nimport {useStoreState} from 'easy-peasy';\nimport {useParams} from 'react-router-dom';\nimport LobbySetup from 'components/lobby/LobbySetup.react';\nimport GameApp from 'components/game/GameApp.react';\n\nfunction LobbyPlay() {\n  const {id} = useParams();\n  const activeRoomPlayer = useStoreState((s) => s.activeRoomPlayer);\n\n  return (\n    <GameApp\n      matchID={id}\n      playerID={String(activeRoomPlayer.playerID)}\n      credentials={activeRoomPlayer.credential}\n    />\n  );\n}\n\nexport default function Lobby() {\n  const [isGameRunning, setGameRunning] = useState(false);\n\n  return isGameRunning ? (\n    <LobbyPlay />\n  ) : (\n    <LobbySetup startGame={() => setGameRunning(true)} />\n  );\n}\n","import app from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/firestore';\n\nconst config = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID,\n};\n\nclass Firebase {\n  constructor() {\n    app.initializeApp(config);\n\n    this.auth = app.auth();\n    this.facebookProvider = new app.auth.FacebookAuthProvider();\n    this.firestore = app.firestore();\n  }\n\n  createUserWithEmailAndPassword = (email, password) =>\n    this.auth.createUserWithEmailAndPassword(email, password);\n\n  signInWithEmailAndPassword = (email, password) =>\n    this.auth.signInWithEmailAndPassword(email, password);\n\n  signOut = () => this.auth.signOut();\n\n  fetchUserProfile = async () => {\n    const userData = await this.firestore\n      .collection('Users')\n      .doc(this.auth.currentUser.uid)\n      .get();\n    return userData.data();\n  };\n\n  updateProfile = (user) => {\n    return this.firestore\n      .collection('Users')\n      .doc(this.auth.currentUser.uid)\n      .update(user)\n      .catch((error) => console.error('Error: ', error));\n  };\n}\n\nexport const AUTH_ERRORS = {\n  WRONG_PASSWORD: 'auth/wrong-password',\n  USER_NOT_FOUND: 'auth/user-not-found',\n};\n\nexport default Firebase;\n","import React from 'react';\nimport {useContext, useState} from 'react';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport {AUTH_ERRORS} from 'utils/Firebase';\nimport {useHistory} from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport FormControl from '@material-ui/core/FormControl';\nimport IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faFacebookF} from '@fortawesome/free-brands-svg-icons';\nimport validator from 'validator';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport * as ROUTES from 'constants/routes';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  field: {\n    marginTop: 16,\n  },\n  title: {\n    marginBottom: 24,\n  },\n  submit: {\n    marginTop: 16,\n    width: '100%',\n    position: 'relative',\n  },\n  submitProgress: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  button: {\n    width: '100%',\n    minHeight: 36,\n  },\n  socialContainer: {\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  social: {\n    border: '1px solid #ddd',\n    borderRadius: '50%',\n    display: 'inline-flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 40,\n    width: 40,\n    cursor: 'pointer',\n  },\n});\n\nfunction SignInForm() {\n  const firebase = useContext(FirebaseContext);\n  const history = useHistory();\n  const [showPassword, setShowPassword] = useState(false);\n  const [fields, setFields] = useState({\n    email: '',\n    password: '',\n  });\n  const [fieldErrors, setFieldErrors] = useState({\n    email: null,\n    password: null,\n  });\n\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n\n  function onFacebookLogin() {\n    firebase.auth\n      .signInWithPopup(firebase.facebookProvider)\n      .then((result) => {\n        // The signed-in user info.\n        const user = result.user;\n\n        return firebase.firestore.collection('Users').doc(user.uid).set({\n          username: user.displayName,\n          email: user.email,\n        });\n      })\n      .then(() => {\n        history.replace(ROUTES.HOME);\n      })\n      .catch(() => {\n        // TODO: Handle errors\n      });\n  }\n\n  function onSubmit(event) {\n    event.preventDefault();\n\n    let errors = {\n      email: null,\n      password: null,\n    };\n\n    if (!validator.isEmail(fields.email)) {\n      errors = {...errors, email: 'Must be a valid email'};\n    }\n\n    if (validator.isEmpty(fields.password)) {\n      errors = {...errors, password: 'Must not be empty'};\n    }\n\n    setFieldErrors(errors);\n\n    const noNullErrors = Object.keys(errors).reduce((acc, current) => {\n      if (errors[current] == null) {\n        return acc;\n      }\n      acc[current] = errors[current];\n      return acc;\n    }, {});\n\n    if (Object.keys(noNullErrors).length !== 0) {\n      return;\n    }\n\n    setLoading(true);\n\n    firebase\n      .signInWithEmailAndPassword(fields.email, fields.password)\n      .then(() => {\n        setLoading(false);\n        history.replace(ROUTES.HOME);\n      })\n      .catch((err) => {\n        console.log(err.code);\n        if (err.code === AUTH_ERRORS.USER_NOT_FOUND) {\n          setFieldErrors({...fieldErrors, email: 'Not found'});\n        } else if (err.code === AUTH_ERRORS.WRONG_PASSWORD) {\n          setFieldErrors({...fieldErrors, password: 'Incorrect password'});\n        }\n        setLoading(false);\n      });\n  }\n\n  return (\n    <div className={classes.root}>\n      <Typography className={classes.title} variant=\"h3\" align=\"center\" gutterBottom>\n        Sign In\n      </Typography>\n      <div className={classes.socialContainer}>\n        <button onClick={onFacebookLogin} className={classes.social}>\n          <FontAwesomeIcon icon={faFacebookF} />\n        </button>\n      </div>\n      <form noValidate className={classes.form} onSubmit={onSubmit} method=\"POST\">\n        <TextField\n          type=\"email\"\n          name=\"email\"\n          className={classes.field}\n          value={fields.email}\n          onChange={(e) => setFields({...fields, email: e.target.value})}\n          label=\"Email\"\n          variant=\"outlined\"\n          error={fieldErrors.email != null}\n          helperText={fieldErrors.email}\n        />\n        <FormControl\n          className={classes.field}\n          variant=\"outlined\"\n          error={fieldErrors.password != null}\n        >\n          <InputLabel htmlFor=\"sign-in-password\">Password</InputLabel>\n          <OutlinedInput\n            id=\"sign-in-password\"\n            name=\"password\"\n            type={showPassword ? 'text' : 'password'}\n            value={fields.password}\n            onChange={(e) => setFields({...fields, password: e.target.value})}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  edge=\"end\"\n                >\n                  {showPassword ? <Visibility /> : <VisibilityOff />}\n                </IconButton>\n              </InputAdornment>\n            }\n            labelWidth={70}\n          />\n          {fieldErrors.password != null ? (\n            <FormHelperText>{fieldErrors.password}</FormHelperText>\n          ) : null}\n        </FormControl>\n        <div className={classes.submit}>\n          <Button\n            className={classes.button}\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={loading}\n            id=\"sign-in-button\"\n          >\n            {!loading && 'Sign In'}\n          </Button>\n          {loading && <CircularProgress size={24} className={classes.submitProgress} />}\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default SignInForm;\n","export const AUTHENTICATION = '/auth';\nexport const LOBBY = '/rooms/:id';\nexport const HOME = '/';\n","import React from 'react';\nimport {useContext, useState} from 'react';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport {useHistory} from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport FormControl from '@material-ui/core/FormControl';\nimport IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport * as ROUTES from 'constants/routes';\nimport validator from 'validator';\nimport FormHelperText from '@material-ui/core/FormHelperText';\n\nconst useStyles = makeStyles({\n  root: {\n    width: '100%',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  field: {\n    marginTop: 16,\n  },\n  title: {\n    marginBottom: 24,\n  },\n  submit: {\n    marginTop: 16,\n    width: '100%',\n    position: 'relative',\n  },\n  submitProgress: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12,\n  },\n  button: {\n    width: '100%',\n    minHeight: 36,\n  },\n});\n\nfunction SignUpForm() {\n  const firebase = useContext(FirebaseContext);\n  const history = useHistory();\n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmationPassword, setShowConfirmationPassword] = useState(false);\n  const [fields, setFields] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmationPassword: '',\n  });\n  const [fieldErrors, setFieldErrors] = useState({\n    username: null,\n    email: null,\n    password: null,\n    confirmationPassword: null,\n  });\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n\n  function onSubmit(event) {\n    event.preventDefault();\n\n    let errors = {\n      username: null,\n      email: null,\n      password: null,\n      confirmationPassword: null,\n    };\n\n    if (validator.isEmpty(fields.username)) {\n      errors = {...errors, username: 'Must not be empty'};\n    }\n\n    if (!validator.isEmail(fields.email)) {\n      errors = {...errors, email: 'Must be a valid email'};\n    }\n\n    if (!validator.isLength(fields.password, {min: 6})) {\n      errors = {...errors, password: 'Must be at least six characters long'};\n    }\n\n    if (\n      errors.password == null &&\n      !validator.equals(fields.password, fields.confirmationPassword)\n    ) {\n      errors = {...errors, confirmationPassword: 'Passwords must be equal'};\n    }\n\n    setFieldErrors(errors);\n\n    const noNullErrors = Object.keys(errors).reduce((acc, current) => {\n      if (errors[current] == null) {\n        return acc;\n      }\n      acc[current] = errors[current];\n      return acc;\n    }, {});\n\n    if (Object.keys(noNullErrors).length !== 0) {\n      return;\n    }\n\n    setLoading(true);\n\n    firebase\n      .createUserWithEmailAndPassword(fields.email, fields.password)\n      .then((result) =>\n        firebase.firestore.collection('Users').doc(result.user.uid).set({\n          username: fields.username,\n          email: fields.email,\n        }),\n      )\n      .then(() => {\n        setLoading(false);\n        history.replace(ROUTES.HOME);\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }\n\n  return (\n    <div className={classes.root}>\n      <Typography className={classes.title} variant=\"h3\" align=\"center\" gutterBottom>\n        Sign Up\n      </Typography>\n      <form className={classes.form} onSubmit={onSubmit} noValidate method=\"POST\">\n        <TextField\n          name=\"username\"\n          className={classes.field}\n          value={fields.username}\n          onChange={(e) => setFields({...fields, username: e.target.value})}\n          label=\"Username\"\n          variant=\"outlined\"\n          error={fieldErrors.username != null}\n          helperText={fieldErrors.username}\n        />\n        <TextField\n          type=\"email\"\n          name=\"email\"\n          className={classes.field}\n          value={fields.email}\n          onChange={(e) => setFields({...fields, email: e.target.value})}\n          label=\"Email\"\n          variant=\"outlined\"\n          error={fieldErrors.email != null}\n          helperText={fieldErrors.email}\n        />\n        <FormControl\n          className={classes.field}\n          variant=\"outlined\"\n          error={fieldErrors.password != null}\n        >\n          <InputLabel htmlFor=\"sign-up-password\">Password</InputLabel>\n          <OutlinedInput\n            id=\"sign-up-password\"\n            name=\"password\"\n            type={showPassword ? 'text' : 'password'}\n            value={fields.password}\n            onChange={(e) => setFields({...fields, password: e.target.value})}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  edge=\"end\"\n                >\n                  {showPassword ? <Visibility /> : <VisibilityOff />}\n                </IconButton>\n              </InputAdornment>\n            }\n            labelWidth={70}\n          />\n          {fieldErrors.password != null ? (\n            <FormHelperText>{fieldErrors.password}</FormHelperText>\n          ) : null}\n        </FormControl>\n        <FormControl\n          className={classes.field}\n          variant=\"outlined\"\n          error={fieldErrors.confirmationPassword != null}\n        >\n          <InputLabel htmlFor=\"sign-up-confirmation-password\">\n            Confirm Password\n          </InputLabel>\n          <OutlinedInput\n            id=\"sign-up-confirmation-password\"\n            name=\"confirmationPassword\"\n            type={showConfirmationPassword ? 'text' : 'password'}\n            value={fields.confirmationPassword}\n            onChange={(e) =>\n              setFields({...fields, confirmationPassword: e.target.value})\n            }\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={() => setShowConfirmationPassword(!showConfirmationPassword)}\n                  edge=\"end\"\n                >\n                  {showConfirmationPassword ? <Visibility /> : <VisibilityOff />}\n                </IconButton>\n              </InputAdornment>\n            }\n            labelWidth={135}\n          />\n          {fieldErrors.confirmationPassword != null ? (\n            <FormHelperText>{fieldErrors.confirmationPassword}</FormHelperText>\n          ) : null}\n        </FormControl>\n        <div className={classes.submit}>\n          <Button\n            className={classes.button}\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={loading}\n          >\n            {!loading && 'Sign Up'}\n          </Button>\n          {loading && <CircularProgress size={24} className={classes.submitProgress} />}\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default SignUpForm;\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport clsx from 'clsx';\nimport SignInForm from 'components/authentication/SignInForm.react';\nimport SignUpForm from 'components/authentication/SignUpForm.react';\n\nconst useStyles = makeStyles({\n  root: {\n    background: '#6A62D2',\n    height: '100vh',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  card: {\n    minWidth: 768,\n    display: 'flex',\n  },\n  panel: {\n    flex: 1,\n    padding: 24,\n  },\n  rightPanel: {\n    background: '#C0E5C8',\n  },\n});\n\nfunction Authentication() {\n  const classes = useStyles();\n  return (\n    <main className={classes.root}>\n      <Paper className={classes.card}>\n        <div className={classes.panel}>\n          <SignInForm />\n        </div>\n        <div className={clsx(classes.panel, classes.rightPanel)}>\n          <SignUpForm />\n        </div>\n      </Paper>\n    </main>\n  );\n}\n\nexport default Authentication;\n","import React from 'react';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport {useContext, useState, useEffect} from 'react';\nimport {Redirect} from 'react-router-dom';\n\nimport * as ROUTES from 'constants/routes';\n\nfunction AuthRenderer({children, fallback}) {\n  const firebase = useContext(FirebaseContext);\n  // Initial state\n  const [state, setState] = useState({loading: true, authenticated: false});\n\n  useEffect(() => {\n    const listener = firebase.auth.onAuthStateChanged((logged) => {\n      if (logged === null) {\n        setState({loading: false, authenticated: false});\n        return;\n      }\n      setState({loading: false, authenticated: true});\n    });\n    return function () {\n      // Cleanup\n      listener();\n    };\n  }, [setState, firebase]);\n\n  if (state.loading) {\n    return fallback;\n  }\n\n  if (!state.loading && !state.authenticated) {\n    return <Redirect to={ROUTES.AUTHENTICATION} />;\n  }\n\n  return children;\n}\n\nexport default AuthRenderer;\n","import React from 'react';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport {useContext, useState, useEffect} from 'react';\nimport {Redirect} from 'react-router-dom';\n\nimport * as ROUTES from 'constants/routes';\n\n// Renders the children when there is not a session, the opposite of AuthRenderer\nfunction NoAuthRenderer({children, fallback}) {\n  const firebase = useContext(FirebaseContext);\n  // Initial state\n  const [state, setState] = useState({loading: true, authenticated: false});\n\n  useEffect(() => {\n    const listener = firebase.auth.onAuthStateChanged((logged) => {\n      if (logged === null) {\n        setState({loading: false, authenticated: false});\n        return;\n      }\n      setState({loading: false, authenticated: true});\n    });\n    return function () {\n      // Cleanup\n      listener();\n    };\n  }, [setState, firebase]);\n\n  if (state.loading) {\n    return fallback;\n  }\n\n  if (!state.loading && !state.authenticated) {\n    return children;\n  }\n\n  return <Redirect to={ROUTES.HOME} />;\n}\n\nexport default NoAuthRenderer;\n","import React from 'react';\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom';\nimport Home from 'components/home/Home.react';\nimport Lobby from 'components/lobby/Lobby.react';\nimport Authentication from 'components/authentication/Authentication.react';\nimport AuthRenderer from 'components/shared/AuthRenderer.react';\nimport NoAuthRenderer from 'components/shared/NoAuthRenderer.react';\nimport * as ROUTES from 'constants/routes';\n\nconst App = () => (\n  <Router>\n    <Switch>\n      <Route exact path={ROUTES.HOME}>\n        <AuthRenderer fallback={<p>Loading...</p>}>\n          <Home />\n        </AuthRenderer>\n      </Route>\n      <Route exact path={ROUTES.AUTHENTICATION}>\n        <NoAuthRenderer fallback={<p>Loading...</p>}>\n          <Authentication />\n        </NoAuthRenderer>\n      </Route>\n      <Route exact path={ROUTES.LOBBY}>\n        <AuthRenderer fallback={<p>Loading...</p>}>\n          <Lobby />\n        </AuthRenderer>\n      </Route>\n    </Switch>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'typeface-nunito';\nimport 'index.css';\nimport {StoreProvider} from 'easy-peasy';\nimport {initializeStore} from 'store';\nimport {PLAYER_STORAGE_KEY} from 'store/store';\nimport App from 'App.react';\nimport GameApp from 'components/game/GameApp.react';\nimport FirebaseContext from 'components/firebase/FirebaseContext.react';\nimport Firebase from 'utils/Firebase';\n// Import the wrapper component, and the the creator function\nimport {MuiThemeProvider, createMuiTheme} from '@material-ui/core/styles';\n\n// Create a new theme using Nunito\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: 'Nunito, Roboto, sans-serif',\n  },\n});\n\nconst savedPlayer = localStorage.getItem(PLAYER_STORAGE_KEY);\n\nconst store = initializeStore({\n  activeRoomPlayer: savedPlayer ? JSON.parse(savedPlayer) : null,\n});\n\nReactDOM.render(\n  <StoreProvider store={store}>\n    <FirebaseContext.Provider value={new Firebase()}>\n      {/* <SocketContext.Provider value={new SocketIOClient()}> */}\n      <MuiThemeProvider theme={theme}>\n        <App />\n        {/* <GameApp /> */}\n      </MuiThemeProvider>\n      {/* </SocketContext.Provider> */}\n    </FirebaseContext.Provider>\n  </StoreProvider>,\n  document.getElementById('root'),\n);\n","import {createStore} from 'easy-peasy';\nimport {setInitState, store} from 'store/store';\nimport LobbyService from 'services/LobbyService';\n\n// export interface StoreInjections {\n//   lobbyApi: LobbyService;\n// }\n\nexport const initializeStore = (initialState) => {\n  setInitState(initialState);\n  return createStore(store, {\n    initialState,\n    injections: {lobbyApi: new LobbyService()},\n  });\n};\n"],"sourceRoot":""}